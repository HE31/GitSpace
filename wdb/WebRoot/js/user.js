/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

define("module/util",["jquery"],function(e){e.AXD=e.AXD||{versions:"aixuedai1.0"},e.AXD.util={isIE6:function(){return e.browser.msie&&"6.0"==e.browser.version?!0:!1},isIOS:function(){return/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)},isValidReg:function(e){var t=/<|>|\[|\]|\{|\}|『|』|※|○|●|◎|§|△|▲|☆|★|◇|◆|□|▼|㊣|﹋|⊕|⊙|〒|ㄅ|ㄆ|ㄇ|ㄈ|ㄉ|ㄊ|ㄋ|ㄌ|ㄍ|ㄎ|ㄏ|ㄐ|ㄑ|ㄒ|ㄓ|ㄔ|ㄕ|ㄖ|ㄗ|ㄘ|ㄙ|ㄚ|ㄛ|ㄜ|ㄝ|ㄞ|ㄟ|ㄢ|ㄣ|ㄤ|ㄥ|ㄦ|ㄧ|ㄨ|ㄩ|■|▄|▆|\*|@|#|\^|\\/;return 1==t.test(e)?!1:!0},isValidURL:function(t){var a=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(a)?!1:!0)},isValidDomain:function(t){var a=/^(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(a)?!1:!0)},isEmail:function(e){var t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?!0:!1},isPhoneNumber:function(e){var t=/^1[0-9]{10}$/;return t.test(e)?!0:!1},isDate:function(e){var t=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return t.test(e)?!0:!1},isNumber:function(e){var t=/^\d*$/;return null==e.match(t)?!1:!0},isQq:function(e){var t=/^\d{5,10}$/;return t.test(e)?!0:!1},isDecimal:function(e){var t=/^\d{0,8}\.{0,1}(\d{1,2})?$/;return null==e.match(t)?!1:!0},isValidPost:function(e){var t=/^\d{6}$/;return null==e.match(t)?!1:!0},isCERT:function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return null==e.match(t)?!1:!0},getBrithday:function(e){var t="";return t=15==e.length?"19"+e.substring(6,8):e.substring(6,10)},isAdult:function(t){var a=parseInt(e.AXD.util.getBrithday(t)),i=parseInt((new Date).getFullYear());return i-a>=18?!0:!1},isBirthday:function(e){var t=/\d{4}-\d{2}-\d{2}/;return null==e.match(t)?!1:!0},requestPrameVal:function(e){var t=location.href,a=t.substring(t.indexOf("?")+1,t.length).split("&"),s={};for(i=0;j=a[i];i++)s[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);var n=s[e.toLowerCase()];return"undefined"==typeof n?"":n},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},lTrim:function(e){return e.replace(/(^\s*)/g,"")},rTrim:function(e){return e.replace(/(\s*$)/g,"")},isNULL:function(t){return null==t?!0:0==e.AXD.util.trim(t).length?!0:!1},isInt:function(e){var t=/^(-|\+)?\d+$/;return t.test(e)},getMsgLength:function(e){for(var t=0,a=e.length,i=0;a>i;i++){var s=e.charCodeAt(i);t+=s>=1&&126>=s||s>=65376&&65439>=s?.5:1}return t},checkAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!0},uncheckAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!1},getWordLength:function(t){t=e.AXD.util.trim(t);var a=0,i=0;return i=t.replace(/[^\x00-\xff]/g,"**").length,a=parseInt(i/2)==i/2?i/2:parseInt(i/2)+1},getDomain:function(e){var t="null";("undefined"==typeof e||null==e)&&(e=window.location.href);var a=/.*\:\/\/([^\/]*).*/,i=e.match(a);return"undefined"!=typeof i&&null!=i&&(t=i[1]),t},addFavorite:function(e,t){var a=-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL";document.all?window.external.addFavorite(e,t):window.sidebar?window.sidebar.addPanel(e,t,""):alert("您可以尝试通过快捷键"+a+" + D 加入到收藏夹~")},addNDays:function(e,t){var a=new Date(Date.parse(e.replace(/-/g,"/")));return a.setDate(a.getDate()+parseInt(t)),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},getPosition:function(t){var a=t.offset().top,i=t.offset().left,s=a+t.outerHeight(),n=i+t.outerWidth(),o=i+t.outerWidth()/2,l=a+t.outerHeight()/2;/iPad/i.test(navigator.userAgent)&&(a-=e(window).scrollTop(),s-=e(window).scrollTop(),l-=e(window).scrollTop());var r={leftTop:function(){return{x:i,y:a}},leftMid:function(){return{x:i,y:l}},leftBottom:function(){return{x:i,y:s}},topMid:function(){return{x:o,y:a}},rightTop:function(){return{x:n,y:a}},rightMid:function(){return{x:n,y:l}},rightBottom:function(){return{x:n,y:s}},MidBottom:function(){return{x:o,y:s}},middle:function(){return{x:o,y:l}}};return r},queryTransform:function(){for(var e=location.search.slice(1).split("&"),t={},a="",i=0,s=e.length;s>i;i++)a=e[i].split("="),a.length>1&&(t[a[0]]=a[1]);return t},toDecimal2:function(e){var t=parseFloat(e);if(isNaN(t))return!1;var t=Math.round(100*e)/100,a=t.toString(),i=a.indexOf(".");for(0>i&&(i=a.length,a+=".");a.length<=i+2;)a+="0";return a}},e.fn.extend({disableBtn:function(){e(this).addClass("disabled")},enableBtn:function(){var t=e(this);setTimeout(function(){t.removeClass("disabled")},100)}}),Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1})}),define("module/dialog",["jquery","module/util","jqtools","overlay"],function(e){e.AXD.dialog={conf:{id:"J_AXDDialog",title:"提示",html:"",callback:function(){},showtitle:!0,showclose:!0,showMask:!0,width:"",closecallback:function(){}},init:function(t){var a=e.AXD.dialog.conf;t&&e.extend(a,t);var i=a.id,s=""!==a.width?"width:"+a.width+"!important":"";if(e("#"+i)[0])e("#"+i).data("overlay").load();else{var n="";n+='<div id="'+i+'" class="g-dialog" style="'+s+'">',a.showtitle&&(n+='<div class="hd">',n+="<h3>"+a.title+"</h3>",n+="</div>"),n+='<div class="bd">',n+=a.html,n+="</div>",a.showclose&&(n+='<a class="common-icon close" href="javascript:;"><img src="../photo/a.png"></a>'),n+="</div>",e("body").append(n);var o={top:"center",oneInstance:!1,closeOnClick:!1,load:!0,closeOnEsc:!1};a.showMask&&(o.mask={color:"#000",loadSpeed:200,closeSpeed:0,opacity:.3}),e("#"+i).overlay(o),0==a.showclose&&e("#"+i+" .close").remove(),e("#"+i+" .close").unbind().bind("click",function(){e("#"+i).data("overlay").close(),e("#"+i).remove(),a.closecallback()}),e("#"+i+" .close-dialog").bind("click",function(){e("#"+i).data("overlay").close(),e("#"+i).remove()}),a.callback()}},confirm:function(t,a){var i='<div class="clearfix unit mt10" style="height:60px;font-size:16px;text-align: center;">'+t+"</div>";i+='<div class="clearfix unit mt10" style="width: 306px;"><a href="javascript:;" class="btn common-btn mr10 gray fl close-dialog">否</a><a href="javascript:;" class="btn common-btn  orange fl J_Save">是</a></div>',e.AXD.dialog.init({id:"J_Confirm",title:"提示",html:i,showtitle:!0,width:"500px",callback:function(){e("#J_Confirm .J_Save").off("click").live("click",function(){"function"==typeof a&&a()})}})},complete:function(t,a,i){e.AXD.dialog.init({id:"J_CompleteDialog",title:"",html:t,showtitle:!1,showclose:!1,width:"500px",callback:function(){var t=i||3,s=setInterval(function(){t--,e("#J_CompleteDialog em").text(t),0==t&&(e("#J_CompleteDialog").data("overlay").close(),clearInterval(s),"function"==typeof a&&a())},1e3)}})}}}),define("module/extendfn",["jquery","module/util"],function(e){e.fn.extend({dropdown:function(t){var a={classNm:".dropdown",timer:null,fadeSpeed:100,duration:2e3};t&&e.extend(a,t);var i=this,s=e(a.classNm);i.each(function(){var t=e(this);t.hover(function(){clearTimeout(a.timer),s.fadeIn(a.fadeSpeed)},function(){a.timer=setTimeout(function(){s.fadeOut(a.fadeSpeed)},a.duration)}),s.hover(function(){clearTimeout(a.timer),s.show()},function(){a.timer=setTimeout(function(){s.fadeOut(a.fadeSpeed)},a.duration)})})},insertAtCursor:function(t){var a=e(this)[0];if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=t,this.focus();else if(a.selectionStart||"0"==a.selectionStart){var i=a.selectionStart,s=a.selectionEnd,n=a.scrollTop;a.value=a.value.substring(0,i)+t+a.value.substring(s,a.value.length),this.focus(),a.selectionStart=i+t.length,a.selectionEnd=i+t.length,a.scrollTop=n}else this.value+=t,this.focus()},disableBtn:function(){e(this).addClass("disabled")},enableBtn:function(){var t=e(this);setTimeout(function(){t.removeClass("disabled")},500)},validatePhone:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldtel:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入手机号"),void s.show()):e.AXD.util.isPhoneNumber(t)?""!==i.oldtel&&t===i.oldtel?(s.find(".msg").text("新手机号不能与原手机号相同"),void s.show()):(s.hide(),void n.show()):(s.find(".msg").text("请输入正确的手机号"),void s.show())})},validateAcount:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入帐号"),void s.show()):void s.hide()})},validateAcountPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):void s.hide()})},validateNomalName:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,msg:"请填写"},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text(i.msg),void s.show()):void s.hide()})},validatecheckbox:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var e=a.closest(i.parentclass).find(i.errorclass).eq(i.index),t=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return e.hide(),t.hide(),"checked"!=a.attr("checked")?(e.find(".msg").text("请先同意合约"),void e.show()):void e.hide()})},validateVerifyImg:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入图形验证码"),void s.show()):void s.hide()})},validateTelcode:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入手机验证码"),void s.show()):void s.hide()})},validateAichuangcode:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),t.length>10?(s.find(".msg").text("爱创码格式不正确"),void s.show()):isNaN(t)?(s.find(".msg").text("爱创码格式不正确"),void s.show()):void s.hide()})},validatePayPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,action:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):6!=t.length?(s.find(".msg").text("密码长度为6位数字"),void s.show()):/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由6位数字组成"),void s.show())})},validateNPayPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldpwd:e(".oldpwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入新密码"),void s.show()):t==e.trim(i.oldpwd.val())?(s.find(".msg").text("新密码不能和原密码一致"),void s.show()):6!=t.length?(s.find(".msg").text("密码长度为6位数字"),void s.show()):/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由6位数字组成"),void s.show())})},validatePassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,action:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):"login"!=i.action&&"modifypassword"!=i.action?t.length<8?(s.find(".msg").text("密码长度为8-16位数字,字母组合而成"),void s.show()):t.length>16?(s.find(".msg").text("密码长度必须小于16位"),void s.show()):/[a-zA-Z]+/.test(t)&&/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由8-16位数字,字母组合而成"),void s.show()):void 0})},validateNPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldpwd:e(".oldpwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入新密码"),void s.show()):t==e.trim(i.oldpwd.val())?(s.find(".msg").text("新密码不能和原密码一致"),void s.show()):t.length<8?(s.find(".msg").text("密码长度必须大于8位"),void s.show()):t.length>16?(s.find(".msg").text("密码长度必须小于16位"),void s.show()):/[a-zA-Z]+/.test(t)&&/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由8-16位数字，英文，特殊符号组合而成"),void s.show())})},validateCPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,pwd:e(".pwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请再次输入密码"),void s.show()):t!=e.trim(i.pwd.val())?(s.find(".msg").text("两次密码输入不一致"),void s.show()):void s.hide()})},validateName:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入真实姓名"),void s.show()):(s.hide(),void n.show())})},validateCert:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入身份证号码"),void s.show()):void e.post(aixuedai.path+"user/checkCert",{cert:t},function(e){e&&(100==e.status?(s.hide(),n.show()):(s.find(".msg").text(e.info),s.show()))})})}})}),define("module/tipshow",["jquery","module/util"],function(e){e.AXD.tip={conf:{timer:null,timerLength:3e3,tipClass:"tipmodal tipmodal-error"},show:function(t,a){clearTimeout(e.AXD.tip.conf.timer);var i=e.AXD.util.getPosition(t).topMid();e(".tipbox")[0]||e("body").append('<div class="tipbox "'+a+"></div>"),e(".tipbox").attr("class","tipbox "+e.AXD.tip.conf.tipClass),e(".tipbox").html(a);var s=e(".tipbox").outerWidth(),n=e(".tipbox").outerHeight();e(".tipbox").css({left:i.x-s/2+"px",top:i.y-n-10+"px"}).fadeIn(),e.AXD.tip.conf.timer=setTimeout(function(){e(".tipbox").fadeOut()},e.AXD.tip.conf.timerLength)}}}),define("module/getverificationcode",["jquery","module/util","module/tipshow"],function(e){function t(t){i=null,nowSecond=60,t.html('<em id="J_Countdown">60</em>秒后重新发送'),i=setInterval(function(){0==nowSecond?(clearInterval(i),t.html("获取短信验证码"),t.removeClass("disabled timing")):(nowSecond-=1,e("#J_Countdown").text(nowSecond),t.addClass("disabled timing"))},1e3)}function a(e){clearInterval(i),e.html("获取短信验证码"),e.removeClass("disabled timing")}var i=null;e.fn.getVerifactionCode=function(s){var n={url:aixuedai.path+"common/sendCodeMsg",telselector:"",smstype:"",oldtel:"",failcallback:null};n=e.extend(n,s),e(this).on("click",function(){var s=e(this);if(!e(this).hasClass("disabled")){var o=n.telValue?n.telValue:e.trim(e(n.telselector).val());if(""==o)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,"手机号码不能为空!"),!1;if(!e.AXD.util.isPhoneNumber(o))return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,"手机号码格式不正确"),!1;if(""!==n.oldtel&&o===n.oldtel)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,"新手机号不能与原手机号相同"),!1;i&&clearInterval(i),t(e(this));var l=n.virifyselector?e.trim(e(n.virifyselector).val()):"";e.ajax({url:n.url,type:"post",dataType:"json",data:{telphone:o,smstype:n.smstype,verify:l},success:function(t){t&&(t.ret.success===!0?(e.AXD.tip.conf.tipClass="tipmodal tipmodal-ok",e.AXD.tip.show(s,t.ret.resultDes)):"function"==typeof n.failcallback?(a(s),n.failcallback(t)):(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,t.ret.resultDes)),n.virifyselector&&e(n.virifyselector).parent().find("img").attr("src",aixuedai.path+"vcode?t="+Math.random()))},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,"服务器繁忙，请稍候再试!")}})}})}}),define("module/setPayPassword",["jquery","module/util","module/extendfn","jqtools","module/dialog","module/tipshow","module/getverificationcode"],function(e){e(function(){function t(){e("#J_ModifyOldPwd_Pay").validatePayPassword({parentclass:".modify-paypwd-box",index:0,action:"modifypassword"}),e("#J_ModifyPwd_Pay").validateNPayPassword({parentclass:".modify-paypwd-box",index:1,oldpwd:e("#J_ModifyOldPwd_Pay")}),e("#J_ModifyCPwd_Pay").validateCPassword({parentclass:".modify-paypwd-box",index:2,pwd:e("#J_ModifyPwd_Pay")}),e("#J_PwdBtn_Pay").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".modify-paypwd-box .base-input").trigger("blur"),e(".modify-paypwd-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ModifyOldPwd_Pay").val()),s=e.trim(e("#J_ModifyPwd_Pay").val());e.trim(e("#J_ModifyCPwd_Pay").val());t.disableBtn(),e.ajax({url:"/mall/safe/modifyPayPwd",type:"post",dataType:"json",data:{password:i,newPwd:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">支付密码修改成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>",e("#editPaypwd").hide(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}function a(){e("#J_Cardid").validateNomalName({parentclass:".set-paypwd-box",index:0,msg:"请输入身份证号后四位"}),e("#J_ModifyPwd_Pay2").validateNPayPassword({parentclass:".set-paypwd-box",index:1}),e("#J_ModifyCPwd_Pay2").validateCPassword({parentclass:".set-paypwd-box",index:2,pwd:e("#J_ModifyPwd_Pay2")}),e("#J_PwdBtn_Pay2").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".set-paypwd-box .base-input").trigger("blur"),e(".set-paypwd-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ModifyPwd_Pay2").val()),s=e.trim(e("#J_Cardid").val());t.disableBtn(),e.ajax({url:"/mall/safe/paypwd/set",type:"post",dataType:"json",data:{card:s,pwd:i},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">支付密码设置成功！</h3>',i+="</div>",e("#setPaypwd").hide(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}function i(){e("#findPaygpwd .code-btn").getVerifactionCode({smstype:"normal",telValue:e(".bangTel").attr("data-tel")}),e("#J_PayCode").validateNomalName({parentclass:".modify-payfind-box",index:0,msg:"请输入验证码"}),e("#J_ModifyPwd_PayFind").validateNPayPassword({parentclass:".modify-payfind-box",index:1}),e("#J_ModifyCPwd_PayFind").validateCPassword({parentclass:".modify-payfind-box",index:2,pwd:e("#J_ModifyPwd_PayFind")}),e("#J_PwdBtn_PayFind").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".modify-payfind-box .base-input").trigger("blur"),e(".modify-payfind-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_PayCode").val()),s=e.trim(e("#J_ModifyPwd_PayFind").val());e.trim(e("#J_ModifyCPwd_PayFind").val());t.disableBtn(),e.ajax({url:"/mall/safe/resetPayPwd",type:"post",dataType:"json",data:{phone:e(".bangTel").attr("data-tel"),checkCode:i,newPwd:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">找回支付密码成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>","/mall/safe/payCenter.html"!=window.location.pathname&&e("#findPaygpwd").hide(),e(".g-dialog").remove(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}var s='<div class="set-paypwd-box pl40"><div class="unit clearfix mb20"><label class="fl">身份证后四位:</label><input type="text" id="J_Cardid" maxlength="4" class="base-input fl" placeholder="请输入身份证号后四位"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><div class="unit clearfix mb20"><label class="fl">支付密码:</label><input type="password" id="J_ModifyPwd_Pay2" maxlength="6" class="base-input fl" placeholder="请设置6位数字密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><div class="unit clearfix mb30"><label class="fl">再输一次:</label><input type="password" id="J_ModifyCPwd_Pay2" maxlength="6" class="base-input fl"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><p class="mlnext"><a id="J_PwdBtn_Pay2" class="common-btn orange mr30">完 成</a></p></div>',n='<div class="modify-paypwd-box pl40"> <div class="unit clearfix mb20"> <label class="fl">旧支付密码:</label> <input type="password" id="J_ModifyOldPwd_Pay" maxlength="6" class="base-input fl" placeholder="请输入旧密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <div class="unit clearfix mb20"> <label class="fl">新支付密码:</label> <input type="password" id="J_ModifyPwd_Pay" maxlength="6" class="base-input fl" placeholder="请设置6位数字密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <div class="unit clearfix mb30"> <label class="fl">再输一次:</label> <input type="password" id="J_ModifyCPwd_Pay" maxlength="6" class="base-input fl"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <p class="mlnext"><a id="J_PwdBtn_Pay" class="common-btn orange mr30 inblock">完 成</a><a class="ml20 blue-color eleb mt20 fs14 findPay">忘记支付密码？</a></p> </div>';e(document).on("click",".setPay",function(){e.AXD.dialog.init({id:"setPaypwd",title:"设置支付密码",html:s,showtitle:!0,width:"650px",callback:function(){a()}})}),e(document).on("click",".editPay, .editPay2",function(){e.AXD.dialog.init({id:"editPaypwd",title:"修改支付密码",html:n,showtitle:!0,width:"650px",callback:function(){t()}})}),e(document).on("click",".findPay",function(){e(".g-dialog").length>0&&e(".g-dialog").data("overlay").close(),e.AXD.dialog.init({id:"findPaygpwd",title:"找回支付密码",html:e("#findpwd").html(),showtitle:!0,width:"680px",callback:function(){i()}})}),e.AXD.initFindPayPwd=i,e.AXD.initFindPayPwdDialog=function(){e(".g-dialog").length>0&&e(".g-dialog").data("overlay").close(),e.AXD.dialog.init({id:"findPaygpwd",title:"找回支付密码",html:e("#findpwd").html(),showtitle:!0,width:"680px",callback:function(){i()}})},e.AXD.setPaypwd=function(){e(".g-dialog").length>0&&e(".g-dialog").data("overlay")&&e(".g-dialog").data("overlay").close();var t='<div class="clearfix unit  fs16 ml20 mr20 mt10"><h3 class="fs18">您的支付密码还未设置，请先设置支付密码</h3></div>';t+='<div class="clearfix unit  fs14 ml20 mr20 mt10">进行支付密码设置能保护您的账号资金安全</div>',t+='<div class="clearfix unit mt30 mb20" style="width: 306px;"><a href="javascript:;" class="btn common-btn mr10 gray fl close-dialog">取消</a><a href="javascript:;" class="btn common-btn  orange fl J_Save">马上设置</a></div>',e.AXD.dialog.init({id:"J_Confirm",title:"提示",html:t,showtitle:!0,width:"500px",callback:function(){e("#J_Confirm .J_Save").off("click").live("click",function(){e(".g-dialog").length>0&&e(".g-dialog").data("overlay").close(),e.AXD.dialog.init({id:"setPaypwd",title:"设置支付密码",html:s,showtitle:!0,width:"650px",callback:function(){a()}})})}})}})}),define("module/forgetpassword",["jquery","module/util","module/extendfn","jqtools","module/dialog","module/tipshow","module/getverificationcode"],function(e){e(function(){e(".forget-password-btn").live("click",function(){var t="";t+="<div>",t+='<div class="clearfix unit">',t+='<label class="fl">手机号：</label>',t+='<input type="text" class="base-input fl" placeholder="请输入手机号码" id="J_ForgetPhone"/>',t+='<div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div>',t+="</div>",t+='<div class="clearfix unit mt10">',t+='<label class="fl">验证码：</label>',t+='<input type="text" class="base-input code-input fl" placeholder="请输入验证码" id="J_ForgetTelCode"/>',t+='<a href="javascript:;" class="common-btn blue1 fl ml15 code-btn" id="J_GetForgetCodeBtn">获取验证码</a>',t+='<div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div>',t+="</div>",t+='<div class="clearfix unit mt10">',t+='<label class="fl">新密码：</label>',t+='<input type="password" class="base-input fl" placeholder="请输入新密码" id="J_ForgetPassword"/>',t+='<div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div>',t+="</div>",t+='<div class="clearfix unit mt10">',t+='<label class="fl">确认密码：</label>',t+='<input type="password" class="base-input fl" placeholder="请确认新密码" id="J_ForgetCPassword"/>',t+='<div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div>',t+="</div>",t+='<div class="clearfix unit mt10">',t+='<label class="fl"></label>',t+='<a href="javascript:;" class="btn common-btn orange fl"  id="J_ForgetDialogBtn">确定</a>',t+="</div>",t+="</div>",e(".g-dialog").length>0&&e(".g-dialog").data("overlay")&&e(".g-dialog").data("overlay").close(),e.AXD.dialog.init({id:"J_ForgetPassWordDialog",title:"找回密码",width:"775px",html:t}),e("#J_ForgetPhone").validatePhone({parentclass:".g-dialog",index:0}),e("#J_ForgetTelCode").validateTelcode({parentclass:".g-dialog",index:1}),e("#J_ForgetPassword").validatePassword({parentclass:".g-dialog",index:2}),e("#J_ForgetCPassword").validateCPassword({parentclass:".g-dialog",index:3,pwd:e("#J_ForgetPassword")}),e("#J_ForgetPassWordDialog .base-input").val(""),e("#J_GetForgetCodeBtn").getVerifactionCode({url:aixuedai.path+"common/sendCodeMsg",smstype:"findpwd",telselector:"#J_ForgetPassWordDialog #J_ForgetPhone",virifyselector:"#J_ForgetPassWordDialog #J_ForgetVerifyCode"})}),e("#J_ForgetPassWordDialog #J_ForgetPhone").live("blur",function(){var t=e(this);e.AXD.util.isPhoneNumber(e.trim(t.val()))?(e("#J_ForgetPassWordDialog #J_VerifyBox").show(),e("#J_ForgetPassWordDialog #J_VerifyBox input").focus()):e("#J_ForgetPassWordDialog #J_VerifyBox").hide()}),e("#J_ForgetDialogBtn").live("click",function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e("#J_ForgetPassWordDialog .base-input").trigger("blur"),e("#J_ForgetPassWordDialog .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ForgetPhone").val()),s=e.trim(e("#J_ForgetTelCode").val()),n=e.trim(e("#J_ForgetPassword").val());t.disableBtn(),e.ajax({url:aixuedai.path+"pwdReset",type:"post",dataType:"json",data:{telphone:i,checkCode:s,password:n},success:function(a){if(a){if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">找回密码成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后跳转至登录界面，请使用新的登录密码重新登录。</div>',i+="</div>",e.AXD.dialog.init({id:"J_ModifyPwdResultDialog",title:"",html:i,showtitle:!1,showclose:!1,width:"500px",callback:function(){var t=3;setInterval(function(){t--,e("#J_ModifyPwdResultDialog em").text(t),0==t&&(location.href=aixuedai.path+"logOut.html")},1e3)}})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes);t.enableBtn()}},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})})}),define("module/loginDialog",["jquery","module/util","module/dialog","module/forgetpassword"],function(e){e.AXD.dialog.login=function(t){var a=!1;e(document).keypress(function(t){13==t.keyCode&&e("#logBtn").trigger("click")});var i={redictUrl:"",regurl:""};i=e.extend(i,t);var s="this.src='/vcode?t='+Math.random();",n="";n+='<div class="logFram" >',n+='<div class="logItem">',n+='    <p class="logTip"></p>',n+='    <p class="mt15">',n+='        <input class="userPut fs14" type="text" maxlength="11" placeholder="手机号码" id="logname">',n+="    </p>",n+='    <p class="mb20">',n+='        <input class="pwdPut fs14" type="password" maxlength="40" placeholder="登录密码" id="logpwd">',n+="    </p>",n+='    <p class="mb20 validateSpan dn">',n+='        <input type="text" maxlength="6" id="logcode" class="base-input vert_mid"><img class="vert_mid verifyimg ml10" src="/vcode" title="刷新验证码" onclick="'+s+'" id="J_RegVerifyImg"></p>',n+='    <p class="mb35 clearfix"><a class="blue-color fs14 fl" href="/goreg.html">注册新用户</a><a class="blue-color fs14 fr forget-password-btn">忘记登录密码？</a></p>',n+='    <p> <a class="common-btn orange logbtn" data-url="/mall/bill/order/creditBillDetail.html" id="logBtn">登 录</a></p>',n+="</div>",n+="</div>",e(".g-dialog").length>0&&e(".g-dialog").data("overlay")&&e(".g-dialog").data("overlay").close(),jQuery.AXD.dialog.init({id:"J_LoginDialog",title:"爱学贷登录",html:n,width:"500px",callback:function(){}}),e("#logBtn").live("click",function(){var t=e(this),i=e.trim(e("#logname").val()),s=e("#logpwd").val(),n=e.trim(e("#logcode").val());if(""===i&&""===s)return e(".logTip").show().html("请输入手机号和密码！"),!1;if(""===i)return e(".logTip").show().html("请输入手机号！"),!1;var o=e.AXD.util.isPhoneNumber(i);if(o===!1)return e(".logTip").show().html("手机号码格式不正确！"),!1;if(""===s)return e(".logTip").show().html("请输入密码！"),!1;var l={username:i,password:s,code:n,url:e("#logBtn").data("url")?e("#logBtn").data("url"):""};if(a){if(""===n)return e(".logTip").show().html("请输入验证码！"),!1;l.code=n}t.hasClass("disabled")||(t.disableBtn(),e.ajax({type:"POST",url:"doLogin",data:l,success:function(i){i.ret.success===!0?e("#logBtn").data("url")?window.location.href=e("#logBtn").data("url"):window.location.href="/mall/person/personCenter.html":(e("#J_RegVerifyImg").trigger("click"),i.loginNum>=3&&(e(".validateSpan").show(),a=!0),e(".logTip").show().html(i.ret.resultDes),t.enableBtn())},error:function(){e(".logTip").show().html("登录失败！")}}))})}}),define("module/checkUserStatus",["jquery","module/util","module/dialog","module/setPayPassword","module/loginDialog"],function(e){e.AXD.checkUserStatus=function(t,a,i,s){var n=!1;return e.ajax({url:"/common/checkUserStatus",
data:a,dataType:"json",type:"POST",async:!1,success:function(t){if(t.ret.success===!1){var a="";"STATUS10"===t.ret.code?e.AXD.dialog.login():"STATUS11"===t.ret.code||("STATUS13"===t.ret.code?e.AXD.setPaypwd():"STATUS12"===t.ret.code&&(a="/mall/goinfo.html?auth=true",e.AXD.dialog.init({id:"J_Dialog",title:"",showtitle:!1,width:"500px",html:'<div class="pt20 pb20 tac fs16"><h2>请验证用户信息,三秒后自动跳转验证页面~</h2></div>'}),setTimeout(function(){window.location.href=a},3e3))),n=!1}else n=!0},error:function(){n=!1}}),n}}),define("module/cartCount",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/cart/getCartCount",type:"POST",dataType:"json",success:function(t){e(".J_cart").find("b").text(t.cartCount)}})}e.AXD.getCartCount=t,aixuedai.userid>0&&t()})}),define("page/index/news",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/message/unreadnum",dataType:"json",data:{},type:"POST",success:function(t){t.ret.success?e(".H_newsNum").text(t.ret.result):alert(t.ret.resultDes)},error:function(){console.log("error")}})}function a(){e.ajax({url:"/mall/message/nearlNewsList",dataType:"json",data:{},type:"POST",success:function(t){if(t.issuccess){e(".newsFont").addClass("hasHover");var a="";e.each(t.bizObj.list,function(e,t){var i=t.isRead,s="";"y"==i&&(s="H_changeColor");var n=t.title,o=t.iconUrl,l=t.content,r=t.time,d=t.isOutlink,c=t.outlinkUrl;"y"===d&&null!==c&&""!==c&&"null"!==c||(c="javascript:"),a+='<a class="listNews '+s+'" data-id="'+t.id+'" href="'+c+'" target="_blank"><img src="'+aixuedai.staticpath+"/images/news/"+o+'" class="'+s+'"><p>'+n+'</p><span class="fr mr10 timeNews">'+r+'</span><p class="downFont cc9 fs12">'+l+"</p></a>"}),e(".news").html('<div class="hg5 fs14">未读消息(<b class="orange-color newsNum">'+e(".H_newsNum").text()+"</b>)</div>"+a+'<a class="chakan fs16 clearfix checkNews" href="/mall/message/gonews.html" target="_blank">查看所有消息</a>'),e(".newsFont").addClass("H_hover")}else alert(t.result.resultDes)},error:function(){console.log("error")}})}function i(t,i){e.ajax({url:"/mall/message/read",dataType:"json",type:"POST",data:{id:i},success:function(i){i.ret.success?(e(t).addClass("changeColor"),e(t).find(".img").addClass("changeColor"),a()):alert(i.ret.resultDes)},error:function(){console.log("error")}})}t();var s=null;e(".newsFont").mouseover(function(){e(".newsFont").hasClass("hasHover")?e(".news").slideDown():(e(".news").slideDown(),a()),s&&clearTimeout(s)}).mouseout(function(){s=setTimeout(function(){e(".news").slideUp(),clearTimeout(s)},500)}),e(document).on("click",'.listNews:not(".H_changeColor")',function(){var a=e(this).attr("data-id");i(this,a),t()})})}),define("main",["jquery","module/util","lazyload","module/dialog","module/checkUserStatus"],function(e){"use strict";e(function(){function t(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}t("_OkLJ_%UJ"),e("#J_PendantClose").on("click",function(t){e(this).closest(".pendant").fadeOut()}),e("#J_Report")[0]&&e("#J_Report").click(function(){var t="";t+='<div class="main">',t+='<a class="qqNumber fw fs16" target="blank" href="http://wpa.qq.com/msgrd?V=3&uin=2976373015&Site=爱学贷在线举报&Menu=yes">',t+="2976373015</a>",t+='<div class="email fw fs16">',t+="fengkongbu@aixuedai.com</div>",t+="</div>",e.AXD.dialog.init({id:"J_ReportBookDialog",title:"举报拿大奖",html:t,width:"900px"})}),aixuedai.userid>0&&requirejs(["module/cartCount","page/index/news"]),e("#J_menuTable")[0]&&(e(".header-bottom.fixed").find(".first").on("mouseenter",function(){e("#J_menuTable").animate({top:"44px"},300,"linear")}),e(".noIndexMenu").on("mouseenter",function(){e(document).scrollTop()<150&&(e("#J_noIndexMenuTable").parent().parent().find(".layout1200").css("height","400px"),e("#J_noIndexMenuTable").animate({top:"0px"},300,"linear"))}),e("#J_menuTable").on("mouseleave",function(){e("#J_menuTable").animate({top:"-355px"},300,"linear")}),e(".noIndexFixed").on("mouseleave",function(){e("#J_noIndexMenuTable").animate({top:"-345px"},300,"linear",function(){e("#J_noIndexMenuTable").parent().parent().find(".layout1200").css("height","0px")})}),e(window).scroll(function(){e("#J_menuTable").stop(),e("#J_menuTable").animate({top:"-347px"},300,"linear");var t=e(window).scrollTop();t>120?e.AXD.util.isIE6()||(e("#J_RSide").stop(),e("#J_RSide").animate({right:"0px"},"linear"),e("#header .header-bottom").addClass("fixed"),e(".menuBox .menu").stop(),e("#J_menuTable").show(),e(".menuBox .menu").animate({top:"-300px"},300,"linear")):e.AXD.util.isIE6()||(e("#J_RSide").stop(),e("#J_RSide").animate({right:"-80px"},"linear"),e("#header .header-bottom").removeClass("fixed"),e(".menuBox .menu").stop(),e("#J_menuTable").hide(),e(".menuBox .menu").animate({top:"0px"},300,"linear"))})),e("#J_RSide .to-top-icon").bind("click",function(){e("html,body").animate({scrollTop:"0px"},300)})})}),define("module/jquery.tips",["jquery"],function(e){e.fn.tips=function(t){var a={activation:"hover",keepAlive:!1,maxWidth:"300px",edgeOffset:3,direction_v:"top",direction_h:"left",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},exit:function(){}},i=e.extend(a,t);if(e("#tip_holder").length<=0){var s=e('<div id="tip_holder" style="max-width:'+i.maxWidth+';"></div>'),n=e('<div id="tip_content"></div>'),o=e('<div id="tip_arrow"></div>');e("body").append(s.html(n).prepend(o.html('<div id="tip_arrow_inner"></div>')))}else var s=e("#tip_holder"),n=e("#tip_content"),o=e("#tip_arrow");return this.each(function(){function t(){i.enter.call(this),n.html(r),s.hide().removeAttr("class").css("margin","0"),o.removeAttr("style"),d=parseInt(l.offset().top),c=parseInt(l.offset().left),u=parseInt(l.outerWidth()),f=parseInt(l.outerHeight()),p=s.outerWidth(),m=s.outerHeight(),h=Math.round((u-p)/2),v=Math.round((f-m)/2),g=Math.round(c+h),y=Math.round(d+f+i.edgeOffset),b="",x="",w=Math.round(p-12)/2,"bottom"==i.direction_v?b="_bottom":"top"==i.direction_v?b="_top":"left"==i.direction_v?b="_left":"right"==i.direction_v&&(b="_right");var t=h+c<parseInt(e(window).scrollLeft()),a=p+c>parseInt(e(window).width());t&&0>h||"_right"==b&&!a||"_left"==b&&c<p+i.edgeOffset+5?(b="_right",x=Math.round(m-13)/2,w=-12,g=Math.round(c+u+i.edgeOffset),y=Math.round(d+v)):(a&&0>h||"_left"==b&&!t)&&(b="_left",x=Math.round(m-13)/2,w=Math.round(p),g=Math.round(c-(p+i.edgeOffset+5)),y=Math.round(d+v));var D=d+f+i.edgeOffset+m+8>parseInt(e(window).height()+e(window).scrollTop()),k=d+f-(i.edgeOffset+m+8)<0;switch(D||"_bottom"==b&&D||"_top"==b&&!k?("_top"==b||"_bottom"==b?b="_top":b+="_top",x=m,y=Math.round(d-(m+5+i.edgeOffset))):(k|("_top"==b&&k)||"_bottom"==b&&!D)&&("_top"==b||"_bottom"==b?b="_bottom":b+="_bottom",x=-12,y=Math.round(d+f+i.edgeOffset)),"_right_top"==b||"_left_top"==b?y+=5:("_right_bottom"==b||"_left_bottom"==b)&&(y-=5),("_left_top"==b||"_left_bottom"==b)&&(g+=5),i.direction_h){case"left":g=Math.round(c),w=Math.round(u-12)/2;break;case"right":g=Math.round(c+u-p),w=Math.round(u-12)/2+p-u}o.css({"margin-left":w+"px","margin-top":x+"px"}),s.css({"margin-left":g+"px","margin-top":y+"px"}).attr("class","tip"+b),_&&clearTimeout(_),_=setTimeout(function(){s.stop(!0,!0).fadeIn(i.fadeIn)},i.delay)}function a(){i.exit.call(this),_&&clearTimeout(_),_=setTimeout(function(){s.fadeOut(i.fadeOut)},i.delay),e("#tip_holder").hover(function(){clearTimeout(_)},function(){_=setTimeout(function(){s.fadeOut(i.fadeOut)},i.delay)})}var l=e(this);if(i.content)var r=i.content;else var r=l.attr(i.attribute);if(""!=r){i.content||l.removeAttr(i.attribute);var d,c,u,f,p,m,h,v,g,y,b,x,w,_=!1;"hover"==i.activation?(l.hover(function(){t()},function(){i.keepAlive||a()}),i.keepAlive&&s.hover(function(){},function(){a()})):"focus"==i.activation?l.focus(function(){t()}).blur(function(){a()}):"click"==i.activation&&(l.click(function(){return t(),!1}).hover(function(){},function(){i.keepAlive||a()}),i.keepAlive&&s.hover(function(){},function(){a()}))}})}}),define("module/dateinput",["jquery"],function(e){!function(e,t){function a(e,t){return new Date(e,t+1,0).getDate()}function i(e,t){for(e=""+e,t=t||2;e.length<t;)e="0"+e;return e}function s(e,t,a,s){var n=t.getDate(),o=t.getDay(),l=t.getMonth(),r=t.getFullYear(),d={d:n,dd:i(n),ddd:p[s].shortDays[o],dddd:p[s].days[o],m:l+1,mm:i(l+1),mmm:p[s].shortMonths[l],mmmm:p[s].months[l],yy:String(r).slice(2),yyyy:r},c=u[e](a,t,d,s);return m.html(c).html()}function n(e){return parseInt(e,10)}function o(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function l(e){if(e!==t){if(e.constructor==Date)return e;if("string"==typeof e){var a=e.split("-");if(3==a.length)return new Date(n(a[0]),n(a[1])-1,n(a[2]));if(!/^-?\d+$/.test(e))return;e=n(e)}var i=new Date;return i.setDate(i.getDate()+e),i}}function r(i,r){function d(t,a,n){T=t,g=t.getFullYear(),y=t.getMonth(),b=t.getDate(),n||(n=e.Event("api")),"click"!=n.type||e.browser.msie||i.focus(),n.type="beforeChange",N.trigger(n,[t]),n.isDefaultPrevented()||(i.val(s(a.formatter,t,a.format,a.lang)),n.type="change",N.trigger(n),i.data("date",t),_.hide(n))}function u(t){t.type="onShow",N.trigger(t),e(document).on("keydown.d",function(t){if(t.ctrlKey)return!0;var a=t.keyCode;if(8==a||46==a)return i.val(""),_.hide(t);if(27==a||9==a)return _.hide(t);if(e(f).index(a)>=0){if(!x)return _.show(t),t.preventDefault();var s=e("#"+C.weeks+" a"),n=e("."+C.focus),o=s.index(n);return n.removeClass(C.focus),74==a||40==a?o+=7:75==a||38==a?o-=7:76==a||39==a?o+=1:(72==a||37==a)&&(o-=1),o>41?(_.addMonth(),n=e("#"+C.weeks+" a:eq("+(o-42)+")")):0>o?(_.addMonth(-1),n=e("#"+C.weeks+" a:eq("+(o+42)+")")):n=s.eq(o),n.addClass(C.focus),t.preventDefault()}return 34==a?_.addMonth():33==a?_.addMonth(-1):36==a?_.today():(13==a&&(e(t.target).is("select")||e("."+C.focus).click()),e([16,17,18,9]).index(a)>=0)}),e(document).on("click.d",function(t){var a=t.target;e(a).parents("#"+C.root).length||a==i[0]||m&&a==m[0]||_.hide(t)})}var m,h,v,g,y,b,x,w,_=this,D=new Date,k=D.getFullYear(),C=r.css,J=p[r.lang],A=e("#"+C.root),P=A.find("#"+C.title),T=i.attr("data-value")||r.value||i.val(),X=i.attr("min")||r.min,S=i.attr("max")||r.max;if(0===X&&(X="0"),T=l(T)||D,X=l(X||new Date(k+r.yearRange[0],1,1)),S=l(S||new Date(k+r.yearRange[1]+1,1,-1)),!J)throw"Dateinput: invalid language: "+r.lang;if("date"==i.attr("type")){var w=i.clone(),j=w.wrap("<div/>").parent().html(),B=e(j.replace(/type/i,"type=text data-orig-type"));r.value&&B.val(r.value),i.replaceWith(B),i=B}i.addClass(C.input);var N=i.add(_);if(!A.length){if(A=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",C.root),A.children().eq(0).attr("id",C.head).end().eq(1).attr("id",C.body).children().eq(0).attr("id",C.days).end().eq(1).attr("id",C.weeks).end().end().end().find("a").eq(0).attr("id",C.prev).end().eq(1).attr("id",C.next),P=A.find("#"+C.head).find("div").attr("id",C.title),r.selectors){var M=e("<select/>").attr("id",C.month),I=e("<select/>").attr("id",C.year);P.html(M.add(I))}for(var q=A.find("#"+C.days),O=0;7>O;O++)q.append(e("<span/>").text(J.shortDays[(O+r.firstDay)%7]));e("body").append(A)}r.trigger&&(m=e("<a/>").attr("href","#").addClass(C.trigger).click(function(e){return r.toggle?_.toggle():_.show(),e.preventDefault()}).insertAfter(i));var F=A.find("#"+C.weeks);I=A.find("#"+C.year),M=A.find("#"+C.month),e.extend(_,{show:function(t){if(!(i.attr("readonly")||i.attr("disabled")||x||(t=t||e.Event(),t.type="onBeforeShow",N.trigger(t),t.isDefaultPrevented()))){e.each(c,function(){this.hide()}),x=!0,M.off("change").change(function(){_.setValue(n(I.val()),n(e(this).val()))}),I.off("change").change(function(){_.setValue(n(e(this).val()),n(M.val()))}),h=A.find("#"+C.prev).off("click").click(function(){return h.hasClass(C.disabled)||_.addMonth(-1),!1}),v=A.find("#"+C.next).off("click").click(function(){return v.hasClass(C.disabled)||_.addMonth(),!1}),_.setValue(T);var a=i.offset();return/iPad/i.test(navigator.userAgent)&&(a.top-=e(window).scrollTop()),A.css({top:a.top+i.outerHeight({margins:!0})+r.offset[0],left:a.left+r.offset[1]}),r.speed?A.show(r.speed,function(){u(t)}):(A.show(),u(t)),_}},setValue:function(i,s,c){var u=n(s)>=-1?new Date(n(i),n(s),n(c==t||isNaN(c)?1:c)):i||T;if(X>u?u=X:u>S&&(u=S),"string"==typeof i&&(u=l(i)),i=u.getFullYear(),s=u.getMonth(),c=u.getDate(),-1==s?(s=11,i--):12==s&&(s=0,i++),!x)return d(u,r),_;y=s,g=i,b=c;var f,p=new Date(i,s,1-r.firstDay),m=p.getDay(),w=a(i,s),k=a(i,s-1);if(r.selectors){M.empty(),e.each(J.months,function(t,a){X<new Date(i,t+1,1)&&S>new Date(i,t,0)&&M.append(e("<option/>").html(a).attr("value",t))}),I.empty();for(var A=D.getFullYear(),j=A+r.yearRange[0];j<A+r.yearRange[1];j++)X<new Date(j+1,0,1)&&S>new Date(j,0,0)&&I.append(e("<option/>").text(j));M.val(s),I.val(i)}else P.html(J.months[s]+" "+i);F.empty(),h.add(v).removeClass(C.disabled);for(var B,N,q=m?0:-7;(m?42:35)>q;q++)B=e("<a/>"),q%7===0&&(f=e("<div/>").addClass(C.week),F.append(f)),m>q?(B.addClass(C.off),N=k-m+q+1,u=new Date(i,s-1,N)):q>=m+w?(B.addClass(C.off),N=q-w-m+1,u=new Date(i,s+1,N)):(N=q-m+1,u=new Date(i,s,N),o(T,u)?B.attr("id",C.current).addClass(C.focus):o(D,u)&&B.attr("id",C.today)),X&&X>u&&B.add(h).addClass(C.disabled),S&&u>S&&B.add(v).addClass(C.disabled),B.attr("href","#"+N).text(N).data("date",u),f.append(B);return F.find("a").click(function(t){var a=e(this);return a.hasClass(C.disabled)||(e("#"+C.current).removeAttr("id"),a.attr("id",C.current),d(a.data("date"),r,t)),!1}),C.sunday&&F.find("."+C.week).each(function(){var t=r.firstDay?7-r.firstDay:0;e(this).children().slice(t,t+1).addClass(C.sunday)}),_},setMin:function(e,t){return X=l(e),t&&X>T&&_.setValue(X),_},setMax:function(e,t){return S=l(e),t&&T>S&&_.setValue(S),_},today:function(){return _.setValue(D)},addDay:function(e){return this.setValue(g,y,b+(e||1))},addMonth:function(e){var t=y+(e||1),i=a(g,t),s=i>=b?b:i;return this.setValue(g,t,s)},addYear:function(e){return this.setValue(g+(e||1),y,b)},destroy:function(){i.add(document).off("click.d keydown.d"),A.add(m).remove(),i.removeData("dateinput").removeClass(C.input),w&&i.replaceWith(w)},hide:function(t){if(x){if(t=e.Event(),t.type="onHide",N.trigger(t),t.isDefaultPrevented())return;e(document).off("click.d keydown.d"),A.hide(),x=!1}return _},toggle:function(){return _.isOpen()?_.hide():_.show()},getConf:function(){return r},getInput:function(){return i},getCalendar:function(){return A},getValue:function(e){return e?s(r.formatter,T,e,r.lang):T},isOpen:function(){return x}}),e.each(["onBeforeShow","onShow","change","onHide"],function(t,a){e.isFunction(r[a])&&e(_).on(a,r[a]),_[a]=function(t){return t&&e(_).on(a,t),_}}),r.editable||i.on("focus.d click.d",_.show).keydown(function(t){var a=t.keyCode;return!x&&e(f).index(a)>=0?(_.show(t),t.preventDefault()):((8==a||46==a)&&i.val(""),t.shiftKey||t.ctrlKey||t.altKey||9==a?!0:t.preventDefault())}),l(i.val())&&d(T,r)}e.tools=e.tools||{version:"@VERSION"};var d,c=[],u={},f=[75,76,38,39,74,72,40,37],p={};d=e.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:t,max:t,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(e,t){u[e]=t},localize:function(t,a){e.each(a,function(e,t){a[e]=t.split(",")}),p[t]=a}},d.localize("en",{months:"一月,二月,三月,四月,五月,六月,七月,八月,九月,十月,十一月,十二月",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"日,一,二,三,四,五,六",shortDays:"日,一,二,三,四,五,六"});var m=e("<a/>");d.addFormatter("default",function(e,t,a){return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(e){return e in a?a[e]:e})}),d.addFormatter("prefixed",function(e,t,a){return e.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,function(e,t){return t in a?a[t]:e})}),e.expr[":"].date=function(t){var a=t.getAttribute("type");return a&&"date"==a||!!e(t).data("dateinput")},e.fn.dateinput=function(t){if(this.data("dateinput"))return this;t=e.extend(!0,{},d.conf,t),e.each(t.css,function(e,a){a||"prefix"==e||(t.css[e]=(t.css.prefix||"")+(a||e))});var a;return this.each(function(){var i=new r(e(this),t);c.push(i);var s=i.getInput().data("dateinput",i);a=a?a.add(s):s}),a?a:this}}(jQuery)}),define("page/user/bill",["jquery","module/util","module/tipshow","module/dateinput"],function(e){e(function(){function t(e,t){var a=new Date(e);a=a.valueOf(),a+=24*t*60*60*1e3,a=new Date(a);var i=a.getFullYear(),s=a.getMonth()+1,n=a.getDate();9>=s&&(s="0"+s),9>=n&&(n="0"+n);var o=i+"-"+s+"-"+n;return console.log(o),o}function a(){var t=new Date(e("#delayTime").data("dateinput").getValue()),a=(new Date).parseISO8601(e("#paydate").val()),s=Math.abs(t.getTime()-a.getTime())+1,n=Math.ceil(s/864e5);e(".diffDays").text(n+"天").attr("data-diffdays",n),e(".J_paydelay").addClass("disabled"),i(n)}function i(t){var a=e('input[name="billId"]').val(),i=e('input[name="billType"]').val(),s={billId:a,days:t,type:i};e.ajax({url:"/mall/bill/order/calcuteDelay",data:s,dataType:"json",type:"POST",success:function(t){if(t.ret.success===!0){var a=t.ret.result;a=e.AXD.util.toDecimal2(a/1e3),e("#J_fee").text(a),e(".J_paydelay").removeClass("disabled")}else e("#J_fee").text("--"),e.AXD.tip.show(e("#J_fee"),t.ret.resultDes)},error:function(){e("#J_fee").text("--")}})}function s(){var t=e("#J_DialogPostPone").attr("billId"),a=e("#monthNum").attr("data-val"),i=(e('input[name="billType"]').val(),{billId:t,monthday:a});e.ajax({url:"/mall/bill/order/fenq",data:i,dataType:"json",type:"POST",success:function(t){if(t.ret.success===!0){var a=t.ret.result,i=e.AXD.util.toDecimal2(a.totalMoney/1e3),s=(e.AXD.util.toDecimal2(a.amtDelay/1e3),e.AXD.util.toDecimal2(a.amtInstalment/1e3)),n=e.AXD.util.toDecimal2(a.amtDelay/1e3),o=e.AXD.util.toDecimal2(a.serverpay/1e3),l=e.AXD.util.toDecimal2(a.amtInstal/1e3),r=e.AXD.util.toDecimal2(a.monthCapital/1e3);e("#J_DialogPostPone .curfenq").text(s),e("#J_DialogPostPone .benj").text("￥"+r),e("#J_DialogPostPone .svrfee").text("￥"+o),0===a.amtDelay?e("#J_DialogPostPone .lastfee").parent().addClass("dn"):e("#J_DialogPostPone .lastfee").text("￥"+l),0===a.amtInstal?e("#J_DialogPostPone .prevfee").parent().addClass("dn"):e("#J_DialogPostPone .prevfee").text("￥"+l),0===a.amtDelay?e("#J_DialogPostPone .postfee").parent().addClass("dn"):e("#J_DialogPostPone .postfee").text("￥"+n),e("#J_DialogPostPone .payfee").text(i)}},error:function(){e("#J_fee").text("费用计算错误")}})}function n(){e("#monthNum").text(e(".tMonth li:eq(0)").text()).attr("data-val",e(".tMonth li:eq(0)").find("a").attr("data-val")),setTimeout(function(){s()},100)}function o(){function t(t){var a=e("<form />").attr("action","/mall/bill/order/payNow_fq").attr("method","POST");e.each(t,function(t,i){e('<input type="text" name="'+t+'" value="'+i+'" />').appendTo(a)}),e('<input type="text" name="returnUrl" value="/mall/bill/order/creditBillDetail.html" />').appendTo(a),e('<input type="submit" value="Submit" />').appendTo(a),a.appendTo("body"),a.submit()}function a(t){var a=e("#"+t),i=e.AXD.util.isDate(e.trim(a.val()));return 0==i?(a.val(""),!1):!0}function i(t){var a=e("<form />").attr("action","/mall/bill/order/payDelayFee").attr("method","POST");e.each(t,function(t,i){e('<input type="text" name="'+t+'" value="'+i+'" />').appendTo(a)}),e('<input type="submit" value="Submit" />').appendTo(a),a.appendTo("body"),a.submit()}e(document).on("click",".chkDeft",function(){e(".checkitem").hasClass("checked")?(e(".H_pay").disableBtn(),e(".checkitem").removeClass("checked")):(e(".H_pay").enableBtn(),e(".checkitem").addClass("checked"))}),e(document).on("click",".H_pay",function(a){a.preventDefault();var i=e(this);if(!i.hasClass("disabled")){i.disableBtn();var s=e("#J_DialogPostPone").attr("billId"),n=e("#monthNum").attr("data-val"),o={billId:s,periodNum:n};e.ajax({url:"/mall/bill/order/billInstalment",data:o,dataType:"json",type:"POST",success:function(a){a.ret.success===!0?t(a.ret.result):(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,a.ret.resultDes)),i.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"服务器繁忙，请稍候再试!"),i.enableBtn()}}),setTimeout(function(){i.enableBtn()},3e3)}}),e(".monthSelect").click(function(){e(".tMonth").toggle()}),e(".tMonth li").click(function(){e("#monthNum").text(e(this).text()).attr("data-val",e(this).find("a").attr("data-val")),s()}),e(document).on("keyup","#delayTime",function(){a("delayTime")}),e(".J_paydelay").on("click",function(t){t.preventDefault();var s=e(this);if(""==e("#delayTime").val())return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",void e.AXD.tip.show(s,"请选择延期日期~");if(a("delayTime"),!s.hasClass("disabled")){s.disableBtn();var n=e('input[name="billId"]').val(),o=e(".diffDays").attr("data-diffdays"),l={billId:n,days:o};e('input[name="days"]').val(o),e.ajax({url:"/mall/bill/order/checkDelayFee",data:l,dataType:"json",type:"POST",success:function(t){t.ret.success===!0?i(t.ret.result):(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,t.ret.resultDes)),s.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(s,"服务器繁忙，请稍候再试!"),s.enableBtn()}}),setTimeout(function(){s.enableBtn()},3e3)}})}function l(t){var a=e(".yearsNum").attr("data-val"),i=a+(t>9?t:"0"+t),s="/mall/bill/order/creditBillDetail.html?period="+i;window.location.href=s}var r=e('input[name="billId"]').val(),d='<div id="H_postpone"> <p class="cc6 fs14">每期账单只支持一次延期申请<span class="cc2">（最多延期至<span class="enddate"> </span>)</span></p><p style="height:30px;line-height:30px;" class="cc6 fs14 mt30 ml20">本期还款金额:<span style="margin-left:10px;" class="fs14 cc2">￥</span><span style="position:relative;top:2px;" class="fs18 cc2 J_payMoney"></span></p><span style="height:30px;line-height:30px;" class="cc6 fs14 ml20 mt5 fl">请选择延期日期:</span><div class="H_time_controlx fl mt5 ml10"><input id="delayTime" type="text" /><input id="paydate" type="hidden" /></div><div class="cb"></div><p class="fs14 cc6 ml20 mt40 fl">延期天数:<span class="cc2 fs18 diffDays"></span></p><p class="fl fs14 cc6 mt35 ml20">延期费用: <span class="cc1">￥</span><span id="J_fee" class="cc1 fs24"></span></p><form action="/mall/bill/order/payDelayFee.html" method="post" target="_blank">	   <input type="hidden" name="billId" value="'+r+'"> 	   <input type="hidden" name="days" value=""> 		<input type="submit" value="支付延期费用" class="J_paydelay ccfff fs18 fl common-btn orange wh45 mt25 ml20"></form><div class="cb"></div><div class="mb15"></div></div>';e(".postpone").on("click",function(i){i.preventDefault();var s=e(this).data("enddate"),n=e(this).data("paydate");n=t(n,1);var l=e(this).data("money");l=e.AXD.util.toDecimal2(parseFloat(l)/1e3),e.AXD.dialog.init({id:"J_DialogPostPone",title:"延期申请",html:d,showtitle:!0,width:"525px",callback:function(){e(".J_payMoney").text(l),e(".J_paydelay").addClass("disabled"),o(),e(".enddate").text(s),e("#paydate").val(n),e("#delayTime").dateinput({format:"yyyy-mm-dd",min:n,value:n,max:s,change:function(e,t){a(s,t)}})}})}),Date.prototype.parseISO8601=function(e){var t,a=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,i=new Date(NaN),s=a.exec(e);return s&&(t=+s[2],i.setFullYear(s[1],t-1,s[3]),t!=i.getMonth()+1&&i.setTime(NaN)),i};var c=parseInt(e("#J_upPeriod").val()),u=parseInt(e("#J_downPeriod").val()),f="";f+='<div id="installment"> ',f+='<p><span class="fs14 cc6">本期可分期金额:</span><span class="fs14 cc2">￥</span><span class="cc2 fs24 curfenq"></span></p>',f+='<label class="fl ml40  fs16 mt35" style="line-height:42px;">分期月数:</label>',f+='<div class="fl base-select-outer ml5 monthSelect mt35" id="J_GoodsFirstSelect" style="relative">',f+='    <div class="clearfix base-select-text-box">',f+='     <span class="fl base-select-text fs16" data-val="0" data-index="0" id="monthNum">1个月</span>',f+='      <span class="common-icon select-down-arrow fr"></span>',f+="   </div>",f+='<ul class="tMonth base-select-ulx">';for(var p=1;25>p;p++)p>=u&&c>=p&&(f+='<li><a href="javascript:;" data-val="'+p+'">'+p+"个月</a></li>");if(f+="</ul>",f+="</div>",f+='<div class="cb"></div>',f+='<div class="H_line mt20"></div>',f+='<div class="fr mt20">',f+='<div class="cb"></div>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">本金: </span><span class="fs14 ml10 cc2 benj"> </span></p>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">服务费: </span><span class="fs14 ml10 cc2 svrfee"> </span></p>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">上期账单金额:</span><span class="fs14 ml10 cc2 lastfee"> </span></p>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">往期分期金额:</span><span class="fs14 ml10 cc2 prevfee"> </span></p>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">逾期费: </span><span class="fs14 ml10 cc2 postfee"> </span></p>',f+='<p class="H_lh30"><span class="tar clearfix H_boxwidth fl fs14 cc6">应付金额：</span><span class="cc1 fs14">￥</span><span class="fs24 cc1 payfee"> </span></p>',f+=' <div class="mb25">',f+='   <label class="checkitem chkDeft fl mt22 checked"></label>',f+='     <span href="javascript:;" class="fs14 intro-color fl ml5 mt20" style="*margin-top:5px" id="J_RedAgreeBtn">同意<a href="/protocol/stage.html" target="_blank" class="cc5">《爱学贷分期协议》</a></span>',f+=' <form action="/mall/bill/order/payNow.html" method="post"  class="fl">',f+=' 		       <input type="hidden" name="billId" value=""> ',f+=' 			 <input type="submit" value="立即还款" class="H_pay common-btn orange fr mt10">',f+=" </form>",f+='    <div class="cb"></div>',f+=" </div>",f+=" </div>",e(".J_fqPay").on("click",function(t){t.preventDefault();var a=e(this).parent().find('input[name="billId"]').val();e.AXD.dialog.init({id:"J_DialogPostPone",title:"账单分期",html:f,showtitle:!0,width:"640px",callback:function(){e("#J_DialogPostPone").attr("billId",a),e("#J_DialogPostPone").find('input[name="billId"]').val(a),n(),o()}})}),e(".H_check_more").length>0){var m=(new Date).getFullYear();e(".yearsNum").text(m+"年").attr("data-val",m),e(".H_pointer").click(function(){var t=e(".J_period").data("period");e.each(e(".H_day li"),function(a,i){var s=e(this);t==s.text()&&s.addClass("on")}),e(".H_date").toggle(),e(".H_check_more").toggleClass("H_border"),e(".H_push").toggle()}),e(".H_pre").click(function(){m>2e3&&(m--,e(".yearsNum").text(m+"年").attr("data-val",m))}),e(".H_next").click(function(){var t=new Date;m<t.getFullYear()+1&&(m++,e(".yearsNum").text(m+"年").attr("data-val",m))}),e(".H_day li").click(function(){var t=e(this).text();e(".H_date").hide(),e(".H_check_more").removeClass("H_border"),e(".H_push").hide(),l(t)})}e(".payBack").on("click",function(){var t=e(this);return t.hasClass("disabled")?!1:(t.data("oldval",t.val()).val("提交中...").disableBtn(),void setTimeout(function(){t.val(t.data("oldval")),t.enableBtn()},3e3))})})}),define("page/user/user",["jquery","module/util","module/dialog","module/jquery.tips","module/setPayPassword"],function(e){e(function(){function t(){var t=e("#J_RepayMent");e("#J_RepayMent_Dialog .close");return t.data("status")||t.data("prompt")?void e.AXD.dialog.init({id:"J_RepayMent_Dialog",title:"设置还款日",html:t.html(),showtitle:!0,width:"800px",callback:function(){var a=e("#J_RepayMent_Dialog .repayment");e("#J_RepayMent_Dialog .close").hide(),t.data("status")?a.eq(0).show():t.data("prompt")&&(a.eq(0).hide(),a.eq(1).fadeIn(),e("#J_RepayMent_Dialog .J_box").height(333))}}):!1}var a={0:"待审核",1:"审核通过",2:"审核拒绝",3:"提现成功",4:"提现失败",5:"提现异常",9:"提现中"};requirejs(["page/user/bill"]),e(".u-sidebar a[attr-up]").on("click",function(t){t.preventDefault();var a="";a+="<div>",a+='<div class="mt20 mb20 tac fs18">此功能系统升级中  </div>',a+="</div>",e.AXD.dialog.init({id:"J_showRegDialog",title:"",html:a,showtitle:!0,width:"500px",callback:function(){}})}),e(".J_Return_MoneyB").click(function(){function t(t,a){e.AXD.dialog.init({id:"J_Return_Money_Dialog",title:"提现",html:t,showtitle:!0,width:"800px",callback:function(){var t=e("#J_Return_Money_Dialog"),i=t.find(".div1 .J_Type p.J_Check"),s=t.find(".div2 .J_Banks p");i.live("click",function(a){var s=e(this);i.addClass("grayscale").find("label").removeClass("radioCurt").addClass("radioDef"),s.removeClass("grayscale").find("label").removeClass("radioDef").addClass("radioCurt"),t.find(".div1 .J_Type").attr("data-type",s.attr("data-type")),e("#J_Return_Money_Dialog .J_Input").hide(),s.find(".J_Input")[0]&&s.find(".J_Input").show()}),s.live("click",function(a){var i=e(this);s.removeClass("choseSty").find("label").removeClass("radioCurt").addClass("radioDef"),i.addClass("choseSty").find("label").removeClass("radioDef").addClass("radioCurt"),t.find(".div2 .J_Banks").attr("data-bank-no",i.attr("data-bank-no")),t.find(".div2 .J_Banks").attr("data-bank-id",i.attr("data-bank-id"))}),t.find(".addBankbtn").click(function(e){t.data("overlay").close()}),t.find(".J_Input").find("input").on("click focus",function(e){return e.stopPropagation(),e.preventDefault(),!1}),t.find("#txNext").live("click",function(i){var s=e("#J_H_hasPayPsw").val();if("false"==s)return e("#J_Return_Money_Dialog").data("overlay").close(),void e.AXD.setPaypwd();var n=t.find(".div1 .J_Type").data("type");if("loan"!=n){var o=e.trim(t.find(".J_Input").find("input").val());if(""==o)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",void e.AXD.tip.show(t.find(".J_Input"),"请输入现金余额！");var l=parseFloat(e("#J_Return_Money_Dialog .J_Balance_Money").attr("data-money"));if(50>o)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",void e.AXD.tip.show(t.find(".J_Input"),"低于金额50元暂不可提现！");if(o>l)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",void e.AXD.tip.show(t.find(".J_Input"),"输入的金额不能大于"+l+"元！");if(0==a)return e("#J_Return_Money_Dialog").data("overlay").close(),void e(".addBankbtn").click()}else if(0==a)return e("#J_Return_Money_Dialog").data("overlay").close(),void e(".addBankbtn").click();t.find(".div2").show(),t.find(".div1").hide()}),t.find(".J_Submit").live("click",function(a){var i=e(this);i.html("正在提交..."),i.addClass("disabled");var s=t.find(".div1 .J_Type").data("type"),n=t.find(".div2 .J_Banks").attr("data-bank-no"),o=t.find(".div2 .J_Banks").attr("data-bank-id"),l=e.trim(t.find(".J_Passwd").val());if(""==l)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",void e.AXD.tip.show(t.find(".J_Passwd"),"请输入支付密码！");var r=e("#J_Return_Money_Dialog .J_Loan_Money").attr("data-money");"loan"!=s&&(r=e.trim(t.find(".J_Input").find("input").val()));var d={amount:1e3*r,bankCardId:n,passwd:l,withdrawType:s,bankId:o};e.ajax({type:"POST",url:"/mall/person/withdraw",data:d,success:function(t){if(t.ret.success){e("#J_Return_Money_Dialog").data("overlay").close();var a='<h3 class="fs18 tac">转账到银行卡申请已提交！</h3><h3 class="fs18 tac">银行将在1-2个工作日处理完成,请注意查收！</h3><div class="mt20 tac intro-color fs14">系统将在<em class="red-color">3</em>秒后返回个人中心。</div>';e.AXD.dialog.conf={showtitle:!1},e.AXD.dialog.complete(a),setTimeout(function(){document.location.reload()},3e3)}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,t.ret.resultDes);i.removeClass("disabled"),i.html("提交")},error:function(e){console.log("提现接口请求失败！"),i.html("提交")}})})}})}e("#J_Return_Money_Dialog")[0]&&e("#J_Return_Money_Dialog").remove();e(this);e.ajax({type:"POST",url:"/mall/person/getWithdrawJson",data:{},success:function(i){if(i.ret.success){var s=i.ret.result,n=(s.loanStatus,s.balStatus),o=(s.loanAmt||0)/1e3,l=(s.balanceAmt||0)/1e3,r="yes",d="yes";0==o&&(r="no"),(null!=n||0==l)&&(d="no");var c="";"yes"==r?c="loan":"yes"==d&&(c="balance");var u="";u+='<div class="div1"><div class="J_Type" data-type="'+c+'">',u+='<p class="psty2 fs14 mb10 ',u+="yes"==r?"J_Check ":"grayscale ",u+='" data-type="loan"><label class=" ',u+="yes"==r?"radioCurt":"radioDef",u+=' vert_mid"></label><span class="vert_mid">借点花余额</span><span class="fs28 orange-color vert_mid ml10 J_Loan_Money" data-money="'+o+'">'+o.toFixed(2)+"</span>",u+='</p><p class="psty2 fs14 mb30 ',"yes"==d&&(u+="J_Check "),
("yes"==r||"no"==r&&"no"==d)&&(u+="grayscale "),u+='" data-type="balance"><label class=" ',u+="no"==r&&"yes"==d?"radioCurt":"radioDef",u+=' vert_mid"></label><span class="vert_mid">现金余额</span>&nbsp;<span class="fs28 orange-color vert_mid ml10 J_Balance_Money" data-money="'+l+'">'+l.toFixed(2)+"</span>",u+="no"==r&&"yes"==d?'<span class="J_Input ml20"><input class="base-input fs20 intro-color vert_mid wid100" value="">&nbsp;元</span>':'<span class="J_Input ml20" style="display:none;"><input class="base-input fs20 intro-color vert_mid wid100" value="">&nbsp;元</span>',null!=n&&(u+='<span class="fs14 ml20 vert_mid">'+a[n]+"</span>"),u+="</p></div><p>",u+="no"==r&&"no"==d?'<span class="common-btn orange disabled h42 wid145" id="txNext">下一步</span></p></div>':'<a class="common-btn orange h42 wid145" id="txNext">下一步</a></p></div>',u+='<div class="div2" style="display:none;"><p class="fs14 mb5">请选择提现银行卡：</p>';var f=s.banks;f.length>0&&(u+='<div class="J_Banks" data-bank-no="'+f[0].bankNo+'" data-bank-id="'+f[0].id+'">',e.each(f,function(e,t){u+='<p class="',0==e&&(u+="choseSty"),u+=' mb10" data-bank-no="'+t.bankNo+'" data-bank-id="'+t.id+'"><label class="',u+=0==e?"radioCurt":"radioDef",u+=' mr30">&nbsp;</label><span class="mr20"><img src="'+t.bankPic+'" width="37" height="37"></span>',t.bankName&&(u+='<span class="mr40">'+t.bankName+"</span>");var a=t.bankNo.substring(t.bankNo.length-4,t.bankNo.length);u+='<span class="mr20">**'+a+"</span>"}),u+="</div>"),u+='<p class="mb30"><a class="addBankbtn blue-color fs14 marg0"><label class="fs18">＋</label> 添加银行卡</a></p><p class="fs16 mb20">支付密码：<input type="password" class="base-input wid200 vert_mid J_Passwd" placeholder="请输入您的支付密码"> <a class="ml20 blue-color eleb mt20 fs14 findPay">忘记支付密码？</a></p><p><a class="common-btn orange h42 wid145 J_Submit">提交</a></p></div>',t(u,f.length)}else console.log("提现请求失败！")},error:function(e){console.log("提现请求失败！")}})}),t(),e(document).on("click","#J_RepayMent_Dialog .J_Mark a",function(){var t=e(this);t.parent("li").addClass("on").siblings().removeClass("on")}),e(document).on("click","#J_RepayMent_Dialog .J_Iknow",function(t){var a=e(this);a.addClass("disabled"),t.stopPropagation(),e.ajax({type:"post",url:"/mall/person/updateRepayDayActive",success:function(t){t.ret.success?e("#J_RepayMent_Dialog").data("overlay").close():(a.removeClass("disabled"),alert(t.ret.resultDes))}})}),e(document).on("click","#J_RepayMent_Dialog .J_ok",function(t){var a=e(this);a.addClass("disabled"),t.stopPropagation(),e.ajax({type:"post",url:"/mall/person/setUserRepayDay",data:{payday:e("#J_RepayMent_Dialog li.on a").data("id")},success:function(t){if(t.ret.success){var i=t.settleDate,s=e("#J_RepayMent_Dialog .close"),n=t.payDate,o=e("#J_RepayMent_Dialog .repayment");o.eq(0).hide(),o.eq(1).find("span").eq(0).text(i),o.eq(1).find("span").eq(1).text(n),o.eq(1).find(".c1, .c3").text(i),o.eq(1).find(".c2, .c4").text(n),o.eq(1).fadeIn(),s.hide(),e("#J_RepayMent_Dialog .J_box").height(333)}else a.removeClass("disabled"),alert("设置失败",+t.ret.resultDes)}})});var i=e("html, body");i.stop().animate({scrollTop:150},"500","swing",function(){});var s=e("#J_ShouXin");!s.data("showshouxin")||s.data("status")||s.data("prompt")||e.AXD.dialog.init({id:"activateDialog",html:'<a href="/mall/goinfo.html?auth=true" class="common-btn orange">立即开通</a>',showtitle:!1,width:"655px",callback:function(){}}),e(document).on("click",".JDH_cancelOrder",function(t){var a=e(this);a.addClass("disabled"),t.stopPropagation();var i=a.closest("tr").find("td").eq(0).html();e.ajax({type:"post",url:"/mall/loan/cancelLoan",data:{loanId:i},success:function(t){t.ret.success?window.location.reload():(a.removeClass("disabled"),e.AXD.tip.show(a,t.ret.resultDes))}})})})}),define("module/addBankCard",["jquery","module/util","module/extendfn","module/dialog","module/tipshow"],function(e){e(function(){function t(){e("#J_AddBank").addClass("disabled").closest("form").on("submit",function(t){var i=e("#J_AddBank"),s=e.trim(e("#J_BankCard").val());if(""!==s){i.disableBtn();var n={bankNo:s},o=a(i,n);return o?!0:!1}})}function a(t,a){var i=!1;return e.ajax({url:"/mall/boundBank",type:"post",dataType:"json",data:a,async:!1,success:function(e){e.ret.success&&(t.siblings("label").find('input[name="repayId"]').val(e.ret.result),i=!0)},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}}),i}e(document).on("click",".close",function(){}),e(document).on("click",".addBankbtn, .cdAddbanck",function(){e("#J_AddBankDialog")[0]&&e("#J_AddBankDialog").remove();var a=aixuedai.paydomain;a=-1!==a.indexOf("//")?a:"//"+a;var i=[];i.push('<form method="POST" id="bankForm" name="bankForm"  action="'+a+'/mall/cashier/repay/bill/create.html"><div id="banks">'),i.push('    <label class="cc2 fs16 mt10 clearfix">卡号：'),i.push('<input name="bankCardId" type="text" id="J_BankCard" autocomplete="off" placeholder="输入银行卡号进入安全智能识别" class="bankCss fs16"><input type="hidden" name="repayId" />'),i.push("    </label>"),i.push('<input type="hidden" name="userId" value="'+aixuedai.userid+'" />'),i.push('    <p class="cc6 fs14 ml50 mt10">请绑定持卡人本人的银行卡，为验证您的银行卡有效，银行从您的账户中扣除0.01元，<br>验证通过后打还您的账户中</p>'),i.push('      <input type="submit" id="J_AddBank" class="mt40 clearfix ml50 nextBtn fs18 mb20 disabled demo" value="下一步" />'),i.push("</div>"),i.push('<div id="baksty" style="display:none;">'),i.push('    <div class="bankBorder bankInfo"><img src="../photo/1.png" class="mhaoshang.pngl20 mt18 fl">'),i.push('        <p class="cardNo fl ml60">**8686</p><a class="cardType bank ml25">学生卡</a><a href="javascript:" class="fs14 cc5 fr mr10 J_AlterBank">修改</a>'),i.push("    </div>"),i.push('    <a id="J_AddBankDone" class="mt30 clearfix nextBtn fs18 mb20 demo" href="javascript:">下一步</a>'),i.push("</div></form>"),e.AXD.dialog.init({id:"J_AddBankDialog",title:"添加银行卡",html:i.join(""),callback:function(){t(),e("#J_BankCard").on("keyup",function(){""!==e(this).val()?e("#J_AddBank").removeClass("disabled"):e("#J_AddBank").addClass("disabled")})}}),e("#J_AddBankDialog #banks").show(),e("#J_AddBankDialog #baksty").hide()}),e(document).on("click","#J_AddBankDialog .J_AlterBank",function(){e("#J_AddBankDialog #banks").show(),e("#J_AddBankDialog #baksty").hide()}),e(document).on("click",".close",function(){e(".g-dialog").data("overlay")&&e(".g-dialog").data("overlay").close()}),e(document).on("click","#J_AddBankDialog #J_AddBankDone",function(){var t=e(this);t.disableBtn(),e.ajax({url:aixuedai.path+"addbankdond",type:"post",dataType:"json",data:{bankCard:bankCard},success:function(a){a&&(a.ret.success===!0?e("#J_AddBankDialog").data("overlay").close():(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()))},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}),e(document).on("keypress","#J_BankCard",function(t){13==t.keyCode&&(t.preventDefault(),e("#J_AddBank").trigger("click"))})})}),define("module/customselect",["jquery"],function(e){e.fn.customSelect=function(t){var a={selecttextbox:".base-select-text-box",selecttext:".base-select-text",selectdown:".base-select-ul",callback:function(){}};a=e.extend(a,t);var i=e(this),s=i.find(a.selectdown),n=i.find(a.selecttext);e(document).live("click",function(){s.hide()}),i.find(a.selecttextbox).live("click",function(t){t.stopPropagation(),e(a.selectdown).hide(),"none"==s.css("display")?s.show():s.hide()}),s.find("a").live("click",function(t){t.stopPropagation();var i=e(this);n.text(i.text()),n.attr("data-val",i.attr("data-val")),n.attr("data-index",s.find("a").index(i)),s.hide(),a.callback()})}}),define("module/initschool",["jquery","module/dialog","module/customselect"],function(e){e.AXD.school={conf:{schoolInput:e("#J_ChooseSchoolCity"),getProvinceUrl:aixuedai.path+"common/provinces",getCityUrl:aixuedai.path+"common/cities",getSchoolUrl:aixuedai.path+"common/schools",showMask:!0},init:function(t){var a=e.AXD.school;t&&e.extend(a.conf,t);var i=a.conf;i.schoolInput.live("click",function(){var t="";t+='<div class="clearfix">',t+='<div class="fl base-select-outer" id="J_ChooseProvince">',t+='<div class="clearfix base-select-text-box">',t+='<span class="fl base-select-text fs16">请选择所在的省份</span>',t+='<span class="common-icon select-down-arrow fr"></span>',t+="</div>",t+='<ul class="base-select-ul">',t+="</ul>",t+="</div>",t+='<div class="fl base-select-outer ml10" id="J_ChooseCity">',t+='<div class="clearfix base-select-text-box">',t+='<span class="fl base-select-text fs16">请选择学校所在市</span>',t+='<span class="common-icon select-down-arrow fr"></span>',t+="</div>",t+='<ul class="base-select-ul">',t+="</ul>",t+="</div>",t+='<div class="fl ml10 clarfix school-search-box disabled">',t+='<input type="text" placeholder="搜索学校" class="base-input fl" disabled="disabled"/>',t+='<a class="common-icon search-icon fl mt10 ml10" id="J_SearchSchoolIcon"></a>',t+="</div>",t+="</div>",t+='<ul id="J_SchoolBox" class="clearfix mt10"></ul>',jQuery.AXD.dialog.init({id:"J_ChooseSchoolDialog",title:"选择大学",html:t,showMask:i.showMask,callback:function(){a.initEvent(),a.initProvincedata(e("#J_ChooseProvince")),e("#J_ChooseCity").find("ul li a").live("click",function(t){var i=e(this).attr("data-val");i&&a.initSchooldata(e("#J_SchoolBox"),i)}),e("#J_ChooseProvince").customSelect(),e("#J_ChooseCity").customSelect()}})})},initEvent:function(){var t=this;e("#J_ChooseSchoolDialog").on("click","#J_SchoolBox li",function(){var a=e(this),i=a.attr("data-schoolName"),s=a.attr("data-schoolId"),n=a.attr("data-cityId"),o=a.attr("data-cityName"),l=a.attr("data-provinceId"),r=a.attr("data-provinceName");if("function"==typeof t.conf.selectSchoolCallback){var d={schoolId:s,schoolName:i,cityId:n,cityName:o,provinceId:l,provinceName:r};t.conf.selectSchoolCallback(d)}else t.conf.schoolInput.find(".base-select-text").html(i),t.conf.schoolInput.attr("schoolName",i),t.conf.schoolInput.attr("schoolId",s),t.conf.schoolInput.attr("cityId",n),t.conf.schoolInput.attr("cityName",o),t.conf.schoolInput.attr("provinceId",l),t.conf.schoolInput.attr("provinceName",r);e("#J_ChooseSchoolDialog").data("overlay").close()}),e("#J_ChooseSchoolDialog").on("keypress",".school-search-box input",function(a){var i=e(this);if(13==a.keyCode){var s=e("#J_SchoolBox"),n=e.trim(i.val()),o=e("#J_ChooseCity").find(".base-select-text").attr("data-val");e.post(t.conf.getSchoolUrl,{cityId:o,schoolName:n},function(t){if(t&&t.ret.success&&t.ret.result){s.html("");var a="",i=t.ret.result;e.each(i,function(e,t){var i=t.schoolName;i.indexOf(n)>=0&&(a+='<li data-provinceId="'+t.provinceId+'" data-cityId="'+t.cityId+'" data-provinceId="'+t.provinceId+'" data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>")}),s.html(a)}})}}),e("#J_ChooseSchoolDialog").on("click","#J_SearchSchoolIcon",function(){var a=e(this);if(!a.parent().hasClass("disabled")){var i=e("#J_SchoolBox"),s=e.trim(e("#J_ChooseSchoolDialog .school-search-box input").val()),n=e("#J_ChooseCity").find(".base-select-text").attr("data-val");e.post(t.conf.getSchoolUrl,{cityId:n,schoolName:s},function(t){if(t&&t.ret.success&&t.ret.result){i.html("");var a="",n=t.ret.result;e.each(n,function(e,t){var i=t.schoolName;i.indexOf(s)>=0&&(a+='<li data-provinceId="'+t.provinceId+'" data-cityId="'+t.cityId+'" data-provinceName="'+t.provinceId+'" data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>")}),i.html(a)}})}})},getProvincedata:function(t,a){var i=e.AXD.school,s=i.conf;e.post(s.getProvinceUrl,function(e){e.ret.success&&e.ret.result&&"function"==typeof a&&a(e)})},getCitydata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getCityUrl,{provinceId:a},function(e){e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},getAreadata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getCityUrl,{cityId:a},function(e){e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},getSchooldata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getSchoolUrl,{cityId:a},function(e){e.ret.success&&e.ret.result&&e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},initProvincedata:function(t){var a=e.AXD.school;a.getProvincedata(t,function(i){var s="",n=i.ret.result;e.each(n,function(e,t){s+='<li><a href="javascript:;" data-val="'+t.provinceId+'">'+t.provinceName+"</a></li>"}),t.find("ul").html(s),t.find("ul li a").live("click",function(i){a.initCitydata(e("#J_ChooseCity"),t.find(".base-select-text").attr("data-val")),e("#J_ChooseCity").find(".base-select-text").text("请选择学校所在市").attr("data-val","")})})},initCitydata:function(t,a){var i=e.AXD.school;i.conf;i.getCitydata(t,a,function(a){var i="",s=a.ret.result;e.each(s,function(e,t){i+='<li><a href="javascript:;" data-val="'+t.cityId+'">'+t.cityName+"</a></li>"}),t.find("ul").html(i)})},initSchooldata:function(t,a){var i=e.AXD.school;i.conf;i.getSchooldata(t,a,function(a){var i="",s=a.ret.result;e.each(s,function(e,t){i+='<li data-provinceId="'+t.provinceId+'" data-provinceName="'+t.provinceName+'" data-cityId="'+t.cityId+'" data-cityname="'+t.cityName+'"  data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>"}),t.html(i),""!=i?(e("#J_ChooseSchoolDialog .school-search-box").removeClass("disabled"),e("#J_ChooseSchoolDialog .school-search-box input").removeAttr("disabled")):(e("#J_ChooseSchoolDialog .school-search-box").addClass("disabled"),e("#J_ChooseSchoolDialog .school-search-box input").attr("disabled","disabled"))})}}}),define("module/authDetail",["jquery","module/util","module/dialog"],function(e){e.AXD.showAuthDialog=function(){var t='<div class="authDetails-box pl40">      </div>';e.AXD.dialog.init({id:"authDetails_box",title:"认证详情",html:t,showtitle:!0,width:"600px",callback:function(){e.ajax({url:"/mall/authProgress",dataType:"json",type:"post",success:function(t){var a="";t.ret.success&&e.each(t.ret.result,function(e,t){var i=0==e?"on":"";a+='<dl class="authpart clearfix"><dt><span class="cc9">'+t.time+'</span></dt><dd><h3 class="'+i+'">'+t.name+'</h3><p class="cc9 fs14">'+t.content+"</p></dd></dl>"}),e(".authDetails-box").html(a)}})}})}}),function(e){"use strict";"function"==typeof define&&define.amd?define("jqform",["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var a=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(a))}function a(t){var a=t.target,i=e(a);if(!i.is("[type=submit],[type=image]")){var s=i.closest("[type=submit]");if(0===s.length)return;a=s[0]}var n=this;if(n.clk=a,"image"==a.type)if(void 0!==t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=i.offset();n.clk_x=t.pageX-o.left,n.clk_y=t.pageY-o.top}else n.clk_x=t.pageX-a.offsetLeft,n.clk_y=t.pageY-a.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var s={};s.fileapi=void 0!==e("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function a(a){var i,s,n=e.param(a,t.traditional).split("&"),o=n.length,l=[];for(i=0;o>i;i++)n[i]=n[i].replace(/\+/g," "),s=n[i].split("="),l.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return l}function o(i){for(var s=new FormData,n=0;n<i.length;n++)s.append(i[n].name,i[n].value);if(t.extraData){var o=a(t.extraData);for(n=0;n<o.length;n++)o[n]&&s.append(o[n][0],o[n][1])}t.data=null;var l=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});t.uploadProgress&&(l.xhr=function(){var a=e.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(e){var a=0,i=e.loaded||e.position,s=e.total;e.lengthComputable&&(a=Math.ceil(i/s*100)),t.uploadProgress(e,i,s,a)},!1),a}),l.data=null;var d=l.beforeSend;return l.beforeSend=function(e,a){t.formData?a.data=t.formData:a.data=s,d&&d.call(this,e,a)},e.ajax(l)}function l(a){function s(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(a){i("cannot get iframe.contentWindow document: "+a)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(a){i("cannot get iframe.contentDocument: "+a),t=e.document}return t}function o(){function t(){try{var e=s(g).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(a){i("Server abort: ",a," (",a.name,")"),l(J),_&&clearTimeout(_),_=void 0}}var a=u.attr2("target"),n=u.attr2("action"),o="multipart/form-data",d=u.attr("enctype")||u.attr("encoding")||o;D.setAttribute("target",m),(!r||/post/i.test(r))&&D.setAttribute("method","POST"),n!=f.url&&D.setAttribute("action",f.url),f.skipEncodingOverride||r&&!/post/i.test(r)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(_=setTimeout(function(){w=!0,l(C)},f.timeout));var c=[];try{if(f.extraData)for(var p in f.extraData)f.extraData.hasOwnProperty(p)&&(e.isPlainObject(f.extraData[p])&&f.extraData[p].hasOwnProperty("name")&&f.extraData[p].hasOwnProperty("value")?c.push(e('<input type="hidden" name="'+f.extraData[p].name+'">').val(f.extraData[p].value).appendTo(D)[0]):c.push(e('<input type="hidden" name="'+p+'">').val(f.extraData[p]).appendTo(D)[0]));f.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",l):g.addEventListener("load",l,!1),setTimeout(t,15);try{D.submit()}catch(h){var y=document.createElement("form").submit;y.apply(D)}}finally{D.setAttribute("action",n),D.setAttribute("enctype",d),a?D.setAttribute("target",a):u.removeAttr("target"),e(c).remove()}}function l(t){if(!y.aborted&&!S){if(X=s(g),X||(i("cannot access response document"),t=J),t===C&&y)return y.abort("timeout"),void k.reject(y,"timeout");if(t==J&&y)return y.abort("server abort"),void k.reject(y,"error","server abort");if(X&&X.location.href!=f.iframeSrc||w){g.detachEvent?g.detachEvent("onload",l):g.removeEventListener("load",l,!1);var a,n="success";try{if(w)throw"timeout";var o="xml"==f.dataType||X.XMLDocument||e.isXMLDoc(X);if(i("isXml="+o),!o&&window.opera&&(null===X.body||!X.body.innerHTML)&&--j)return i("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var r=X.body?X.body:X.documentElement;y.responseText=r?r.innerHTML:null,y.responseXML=X.XMLDocument?X.XMLDocument:X,o&&(f.dataType="xml"),y.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e.toLowerCase()]},r&&(y.status=Number(r.getAttribute("status"))||y.status,y.statusText=r.getAttribute("statusText")||y.statusText);var d=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(d);if(c||f.textarea){var u=X.getElementsByTagName("textarea")[0];if(u)y.responseText=u.value,y.status=Number(u.getAttribute("status"))||y.status,y.statusText=u.getAttribute("statusText")||y.statusText;else if(c){var m=X.getElementsByTagName("pre")[0],h=X.getElementsByTagName("body")[0];m?y.responseText=m.textContent?m.textContent:m.innerText:h&&(y.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==d&&!y.responseXML&&y.responseText&&(y.responseXML=B(y.responseText));try{T=M(y,d,f)}catch(b){n="parsererror",y.error=a=b||n}}catch(b){i("error caught: ",b),n="error",y.error=a=b||n}y.aborted&&(i("upload aborted"),n=null),y.status&&(n=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===n?(f.success&&f.success.call(f.context,T,"success",y),k.resolve(y.responseText,"success",y),p&&e.event.trigger("ajaxSuccess",[y,f])):n&&(void 0===a&&(a=y.statusText),f.error&&f.error.call(f.context,y,n,a),k.reject(y,"error",a),p&&e.event.trigger("ajaxError",[y,f,a])),p&&e.event.trigger("ajaxComplete",[y,f]),p&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,y,n),S=!0,f.timeout&&clearTimeout(_),setTimeout(function(){f.iframeTarget?v.attr("src",f.iframeSrc):v.remove(),y.responseXML=null},100)}}}var d,c,f,p,m,v,g,y,b,x,w,_,D=u[0],k=e.Deferred();if(k.abort=function(e){y.abort(e)},a)for(c=0;c<h.length;c++)d=e(h[c]),n?d.prop("disabled",!1):d.removeAttr("disabled");if(f=e.extend(!0,{},e.ajaxSettings,t),f.context=f.context||f,m="jqFormIO"+(new Date).getTime(),f.iframeTarget?(v=e(f.iframeTarget),x=v.attr2("name"),x?m=x:v.attr2("name",m)):(v=e('<iframe name="'+m+'" src="'+f.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var a="timeout"===t?"timeout":"aborted";i("aborting upload... "+a),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(s){}v.attr("src",f.iframeSrc),y.error=a,f.error&&f.error.call(f.context,y,a,t),p&&e.event.trigger("ajaxError",[y,f,a]),f.complete&&f.complete.call(f.context,y,a)}},p=f.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[y,f]),f.beforeSend&&f.beforeSend.call(f.context,y,f)===!1)return f.global&&e.active--,k.reject(),k;if(y.aborted)return k.reject(),k;b=D.clk,b&&(x=b.name,x&&!b.disabled&&(f.extraData=f.extraData||{},f.extraData[x]=b.value,"image"==b.type&&(f.extraData[x+".x"]=D.clk_x,f.extraData[x+".y"]=D.clk_y)));var C=1,J=2,A=e("meta[name=csrf-token]").attr("content"),P=e("meta[name=csrf-param]").attr("content");P&&A&&(f.extraData=f.extraData||{},f.extraData[P]=A),f.forceSync?o():setTimeout(o,10);var T,X,S,j=50,B=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},N=e.parseJSON||function(e){return window.eval("("+e+")")},M=function(t,a,i){var s=t.getResponseHeader("content-type")||"",n="xml"===a||!a&&s.indexOf("xml")>=0,o=n?t.responseXML:t.responseText;return n&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,a)),"string"==typeof o&&("json"===a||!a&&s.indexOf("json")>=0?o=N(o):("script"===a||!a&&s.indexOf("javascript")>=0)&&e.globalEval(o)),o};return k}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var r,d,c,u=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),r=t.type||this.attr2("method"),d=t.url||this.attr2("action"),c="string"==typeof d?e.trim(d):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:r||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var f={};if(this.trigger("form-pre-serialize",[this,t,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var m,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,m=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,p);m&&(g=g?g+"&"+m:m),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var y=[];if(t.resetForm&&y.push(function(){u.resetForm()}),t.clearForm&&y.push(function(){u.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};y.push(function(a){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](a).each(b,arguments)})}else t.success&&y.push(t.success);if(t.success=function(e,a,i){for(var s=t.context||this,n=0,o=y.length;o>n;n++)y[n].apply(s,[e,a,i||u,u])},t.error){var x=t.error;t.error=function(e,a,i){var s=t.context||this;x.apply(s,[e,a,i,u])}}if(t.complete){var w=t.complete;t.complete=function(e,a){var i=t.context||this;w.apply(i,[e,a,u])}}var _=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),D=_.length>0,k="multipart/form-data",C=u.attr("enctype")==k||u.attr("encoding")==k,J=s.fileapi&&s.formdata;i("fileAPI :"+J);var A,P=(D||C)&&!J;t.iframe!==!1&&(t.iframe||P)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=l(v)}):A=l(v):A=(D||C)&&J?o(v):e.ajax(t),u.removeData("jqxhr").data("jqxhr",A);for(var T=0;T<h.length;T++)h[T]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&e.isFunction(e.fn.on),!s.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(s)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return s.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,s,t).on("click.form-plugin",this.selector,s,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,t).bind("click.form-plugin",s,a)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,a){var i=[];if(0===this.length)return i;var n,o=this[0],l=this.attr("id"),r=t?o.getElementsByTagName("*"):o.elements;if(r&&!/MSIE [678]/.test(navigator.userAgent)&&(r=e(r).get()),l&&(n=e(':input[form="'+l+'"]').get(),n.length&&(r=(r||[]).concat(n))),!r||!r.length)return i;var d,c,u,f,p,m,h;for(d=0,m=r.length;m>d;d++)if(p=r[d],u=p.name,u&&!p.disabled)if(t&&o.clk&&"image"==p.type)o.clk==p&&(i.push({name:u,value:e(p).val(),type:p.type}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}));else if(f=e.fieldValue(p,!0),f&&f.constructor==Array)for(a&&a.push(p),c=0,h=f.length;h>c;c++)i.push({name:u,value:f[c]});else if(s.fileapi&&"file"==p.type){a&&a.push(p);var v=p.files;if(v.length)for(c=0;c<v.length;c++)i.push({name:u,value:v[c],type:p.type});else i.push({name:u,value:"",type:p.type})}else null!==f&&"undefined"!=typeof f&&(a&&a.push(p),i.push({name:u,value:f,type:p.type,required:p.required}));if(!t&&o.clk){var g=e(o.clk),y=g[0];u=y.name,u&&!y.disabled&&"image"==y.type&&(i.push({name:u,value:g.val()}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var a=[];return this.each(function(){var i=this.name;if(i){var s=e.fieldValue(this,t);if(s&&s.constructor==Array)for(var n=0,o=s.length;o>n;n++)a.push({name:i,value:s[n]});else null!==s&&"undefined"!=typeof s&&a.push({name:this.name,value:s})}}),e.param(a)},e.fn.fieldValue=function(t){for(var a=[],i=0,s=this.length;s>i;i++){var n=this[i],o=e.fieldValue(n,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(a,o):a.push(o))}return a},e.fieldValue=function(t,a){var i=t.name,s=t.type,n=t.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!i||t.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!t.checked||("submit"==s||"image"==s)&&t.form&&t.form.clk!=t||"select"==n&&-1==t.selectedIndex))return null;if("select"==n){var o=t.selectedIndex;if(0>o)return null;for(var l=[],r=t.options,d="select-one"==s,c=d?o+1:r.length,u=d?o:0;c>u;u++){var f=r[u];if(f.selected){var p=f.value;if(p||(p=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),d)return p;l.push(p)}}return l}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,s=this.tagName.toLowerCase();a.test(i)||"textarea"==s?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("module/getProvinceCityCountry",["jquery","module/util","module/dialog","module/customselect","module/initschool"],function(e){e(function(){function t(t){var a=["北京市","天津市","上海市","重庆市"],i=!1;return e.each(a,function(e,a){return t==a?(i=!0,!1):void 0}),i}function a(t,a){var i=e("#"+t),s=e('<span class="regError fs14">'+a+"</span>");return i.parent().find(e(".regError")).remove(),""===i.val()?(i.parent().append(s),!1):!0}function i(){var t=e("#J_tel"),a=e('<span class="regError fs14">请输入格式正确的手机号！</span>'),i=e.AXD.util.isPhoneNumber(e.trim(t.val()));return 0==i?(t.parent().append(a),!1):!0}var s='<div class="addrbox"><div class="unit clearfix"><label class="eleb fl" id="labelOne">省市区:</label>&nbsp;<div class="parent fl" id="chospca"><div type="text" class="base-input citys intro-color ofh" id="detailAddr">请选择省市区</div><div class="provices"><h3 class="pca mb5"><a class="on">省份</a><a>城市</a><a>县区</a></h3><div class="prodv"></div><div class="prodv dn"> </div><div class="prodv dn"> </div></div></div></div><div class="unit clearfix mt20"><label class="eleb">详细地址:</label><input type="text" class="base-input" placeholder="请输入详细地址" id="J_addr"></div><div class="unit clearfix mt20"><label class="eleb">收货人姓名:</label><input type="text" class="base-input" placeholder="请输入收货人姓名" id="J_name"></div><div class="unit clearfix mt20"><label class="eleb">手机号码:</label><input type="text" class="base-input" placeholder="请输入手机号码" id="J_tel"></div><div class="unit clearfix fs16 mt5"><label class="eleb">&nbsp;</label><b class="chkDeft" id="defAddr"></b>&nbsp;设置为默认收货地址</div><div class="unit clearfix fs16 mt30"><label class="eleb">&nbsp;</label><a class="common-btn orange eleb bigOrange" id="J_addrSub">保 存</a></div></div>';e.AXD.getProvinceCityCountry={conf:{callback:function(){window.location.reload(!0)},setDefaultCallBack:function(){window.location.reload(!0)}}},e(document).on("click","#detailAddr",function(t){var a=e(this);e.AXD.school.conf.getProvinceUrl=aixuedai.path+"mall/selectProvinces",e.AXD.school.getProvincedata(null,function(e){for(var t=[],i="",s=e.ret.result,n=s.length,o=0,l=n;l>o;o++)i+='<a href="javascript:;" data-provinceid="'+s[o].provinceCode+'">'+s[o].province+"</a>";t.push(i);var r='<dl class="prodl dl2 fs14"><dd>'+t+"</dd></dl></dl>";'<dl class="prodl dl2 fs14"><dd>'+t[1]+'</dd></dl><dl class="prodl"><dd>'+t[2]+'</dd></dl><dl class="prodl"><dd>'+t[3]+'</dd></dl><dl class="prodl"><dd>'+t[4]+"</dd></dl>";a.next().find(".prodv").eq(0).html("").append(r)})}),e(document).on("click",".addAddr, #addAddrBtn",function(){var t,a;e("#realName").length>0?(t=e("#realName").text(),a=e("#cellphone").text()):e("li[data-deliverid] p:eq(0) span:eq(1)").length>0&&(t=e("li[data-deliverid] p:eq(0) span:eq(1)").html(),a=e("li[data-deliverid] p:eq(2) span:eq(0)").html()),e("#idConfirmBox").length>0&&e("#idConfirmBox").remove(),e.AXD.dialog.init({id:"J_Add_Addr",
title:"新增收货地址",html:s,showtitle:!0,width:"700px",callback:function(){e("#J_name").val(t).attr("disabled","disabled").addClass("bgwhite bornone"),e("#J_tel").val(a).attr("disabled","disabled").addClass("bgwhite bornone");var i=e("#J_Add_Addr").data("overlay");i.onClose=function(){e("#J_Add_Addr").remove()},e("#J_Add_Addr .pca a:last-child, #J_Add_Addr .pca a.on:last-child").css("border-right","none"),e("#J_addrSub").attr("data-fromwhere","add")}})});var n=!1;e(document).on("click",".prodv a",function(a){a.stopPropagation();var i=e(".provices .prodv").index(e(this).closest(".prodv")),s=e(".pca a").length-1,o=e(this).html();e(".prodv:eq("+i+") a").removeClass(),e(this).addClass("current"),e(".pca a:eq("+i+")").html(o).removeClass("on").next("a").addClass("on"),e(this).closest(".prodv").addClass("dn").next(".prodv").removeClass("dn");var l="",r={};if(0==i){var d=e(this).data("provinceid"),c=e(this).text();e("#detailAddr").attr({"data-province":c,"data-provinceCode":d}),n=t(c),l="city",r.provName=o,e.ajax({type:"POST",url:"/mall/selectCitys",data:{provinceCode:d},success:function(t){for(var a="",s=t.ret.result,o=s.length,r=0,d=o;d>r;r++)a+='<a href="javascript:;" data-cityid="'+s[r].cityCode+'">'+s[r].city+"</a>";n&&(a='<a href="javascript:;" data-cityid="'+s[0].cityCode+'">'+s[0].city+"</a>");var c='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";if(e(".prodv:eq("+(i+1)+")").html("").append(c),n){e(".pca a").removeClass("on").last().addClass("on");var u=s[0].cityCode,f=s[0].city;e("#detailAddr").attr({"data-city":f,"data-cityCode":u}),l="area",t.city=f,e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:u},success:function(t){for(var a="",i=t.ret.result,s=i.length,n=0,o=s;o>n;n++)a+='<a href="javascript:;" data-countyid="'+i[n].countyCode+'">'+i[n].county+"</a>";var l='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";e(".prodv").addClass("dn"),e(".prodv:eq(2)").removeClass("dn").html("").append(l)}}),e(".pca a:eq(1)").html(f),e(".pca a:eq(2)").html("县区")}}}),e(".pca a:eq(1)").html("城市"),e(".pca a:eq(2)").html("县区")}else if(1==i){var u=e(this).data("cityid"),f=e(this).text();e("#detailAddr").attr({"data-city":f,"data-cityCode":u}),l="area",r.city=o,e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:u},success:function(t){for(var a="",s=t.ret.result,n=s.length,o=0,l=n;l>o;o++)a+='<a href="javascript:;" data-countyid="'+s[o].countyCode+'">'+s[o].county+"</a>";var r='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";e(".prodv:eq("+(i+1)+")").html("").append(r)}}),e(".pca a:eq(2)").html("县区")}if(i===s){var p=e(this).data("countyid"),m=e(this).text();e("#detailAddr").attr({"data-county":m,"data-countyCode":p}),e(".pca a:eq("+i+")").addClass("on"),e(this).closest(".prodv").removeClass("dn");var h=e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(1)").html()+"/"+e(".pca a:eq(2)").html();n&&(h=e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(2)").html()),e("#detailAddr").html(h).css("color","#333"),e("#J_Add_Addr .provices").hide(),e("#detailAddr").closest(".unit").find(".regError").remove()}}),e(document).on("click","#J_addrSub",function(){var t=e("#detailAddr"),s=e(this).attr("data-isAuth"),n="";if("请选择省市区"==e("#detailAddr").html()){var o=e('<span class="regError fs14 mt15">省市区不能为空！</span>');e("#detailAddr").parent().parent().append(o)}else e("#detailAddr").closest(".unit").find(".regError").remove();if("请选择"==e("#chooseArea").html()){e("#chooseArea").closest(".unit").find(".regError").remove();var o=e('<span class="regError fs14 mt15">请选择城区！</span>');e("#chooseArea").closest(".unit").append(o)}else e("#chooseArea").closest(".unit").find(".regError").remove();var l="请输入详细地址！";a("J_addr",l);var r="请输入收货人姓名！";a("J_name",r);var r="请输入手机号！";if(a("J_tel",r)&&i()){n="y"===s?e("#chooseArea").attr("data-val"):t.data("countycode");var d={id:t.data("id"),zoneCode:n,address:e("#J_addr").val(),name:e("#J_name").val(),mobilephone:e("#J_tel").val(),isAuth:s,status:e("#defAddr").hasClass("checked")?"y":"n"};switch(e(this).data("fromwhere")){case"add":e.ajax({type:"POST",url:"/mall/deliver/saveDeliver",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.callback()}});break;case"modify":e.ajax({type:"POST",url:"/mall/deliver/editDeliver",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.callback()}})}}}),e.AXD.changeAddress={getDeliver:function(t){var a='<div class="unit clearfix  mt20"><label class="eleb fl" id="labelOne">区:</label>&nbsp;<div class="parent fl"><div id="addressArea" class="fs16 clearfix base-select-outer in-wid270"> <div class="clearfix base-select-text-box"><span class="intro-color fl base-select-text" data-val="" id="chooseArea">请选择</span><span class="common-icon select-down-arrow fr"></span></div><ul class="base-select-ul" style="display: none;"></ul></div></div><span class="regError fs14 mt15">请选择城区</span></div>';e.ajax({type:"POST",url:"/mall/deliver/getDeliverById",data:{deliverId:t},success:function(t){var i=t.deliverAddress;e.AXD.dialog.init({id:"J_Add_Addr",title:"修改收货地址",html:s,showtitle:!0,width:"700px",callback:function(){var t=e("#J_Add_Addr").data("overlay");if(t.onClose=function(){e("#J_Add_Addr").remove()},"y"===i.isAuth){var s=e("#J_addr").closest(".unit"),n='<div class="eleb fs16 cc6 mt10" style="width:470px;">'+i.address+"</div>";e("#J_Add_Addr").find(".close").remove();var o='<div class="parent fl"><div type="text" class="base-input intro-color ofh bornone" id="detailAddr" data-id="'+i.id+'">'+i.province+"/"+i.city+"</div></div>";e("#labelOne").html("省市:"),e("#labelOne").after(o),e("#chospca").remove(),e("#labelOne").closest(".unit").after(a),e("#J_addr").val(i.address).attr("disabled","disabled").addClass("bgwhite bornone"),s.append(n).find("#J_addr").hide(),e.AXD.changeAddress.intoCountyData("addressArea",i.cityCode),e("#addressArea").customSelect({callback:function(){e(this);e("#chooseArea").closest(".unit").find(".regError").remove()}})}else e("#J_Add_Addr .pca a:last-child, #J_Add_Addr .pca a.on:last-child").css("border-right","none"),e("#detailAddr").html(i.province+"/"+i.city+"/"+i.county).attr("data-countycode",i.zoneCode).attr("data-id",i.id),e("#J_addr").val(i.address);switch(e("#J_addrSub").attr({"data-fromwhere":"modify","data-isAuth":i.isAuth}),e("#J_name").val(i.name).attr("disabled","disabled").addClass("bgwhite bornone"),e("#J_tel").val(i.mobilephone).attr("disabled","disabled").addClass("bgwhite  bornone"),i.status){case"n":break;case"y":e("#defAddr").addClass("checked chekdef")}}})}})},intoCountyData:function(t,a){var i=e("#addressArea");e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:a},success:function(t){var a="",s=t.ret.result;e.each(s,function(e,t){a+='<li><a href="javascript:;" data-val="'+t.countyCode+'">'+t.county+"</a></li>"}),i.find("ul").html(a)}})}},e(document).on("click","i, #modifyAddr",function(t){t.stopPropagation();var a=e(this).parent().data("deliverid");e("#idConfirmBox").length>0&&(e("#idConfirmBox").remove(),a=e(this).closest("li").data("deliverid")),e.AXD.changeAddress.getDeliver(a)}),e(document).on("blur","#J_addr",function(){var e="请输入详细地址！";a("J_addr",e)}),e(document).on("blur","#J_name",function(){var e="请输入收货人姓名！";a("J_name",e)}),e(document).on("blur","#J_tel",function(){var e="请输入手机号！";a("J_tel",e)&&i()}),e(document).on("click","#chospca",function(t){t.stopPropagation(),e(".provices").css("display","block")}),e(document).on("click",function(t){e(".provices").css("display","none")}),e(document).on("click",".pca a",function(){e(".pca a").removeClass(),e(".prodv").addClass("dn"),e(this).addClass("on"),e(".prodv").eq(e(this).index()).removeClass("dn")}),e(document).on("click","#defAddr",function(){e(this).toggleClass("checked chekdef")}),e(document).on("click","#setDefaultId, #setDefaultAddr",function(t){t.stopPropagation();e(this);e.ajax({type:"POST",url:"/mall/deliver/setDefault",data:{deliverId:e(this).closest("li").data("deliverid")},success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.setDefaultCallBack()}})})})}),define("page/user/safeCenter",["jquery","module/util","module/extendfn","module/dialog","module/forgetpassword","module/addBankCard","module/jquery.tips","module/setPayPassword","module/initschool","module/authDetail","jqform","module/getProvinceCityCountry"],function(e){e(function(){function t(e,t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=e.substr(1).match(a);return null!=i?unescape(i[2]):null}function a(){e(".uploadFile").on("change",function(a){var i=e(this),s=i.parents(".setCardBox ").find(".imgUploadForm"),n=s.parent(),o=s.formSerialize(),l=t(o,"imageFile");l&&(n.append('<div class="uploadimg ml5 mt50 fs14 fl cc6">上传中...</div>'),s.ajaxSubmit({success:function(t){var a=s.parent().find("img:eq(0)");n.find(".uploadimg").remove(),t.ret.success?(console.log(a),a.attr("src",t.ret.result),a.attr("data-itempic",t.ret.result),n.find(".loading").remove(),e.AXD.tip.show(i,"上传图片成功"),a.attr("upload",!0),a.closest(".unit").find(".base-error").css("display","none").find(".msg").html()):(a.attr("upload",!1),n.find(".loading").remove(),t.ret.resultDes?e.AXD.tip.show(i,t.ret.resultDes):e.AXD.tip.show(i,"上传图片失败"))},url:"/uploadimg",data:o,type:"POST",dataType:"json",beforeSubmit:function(){n.css({position:"relative"}),n.append('<span class="loading"></span>')}}))})}function i(){var t=e.trim(e("#J_HDTel").val());e("#J_NewTel").validatePhone({parentclass:".setCardBox",index:0,oldtel:t}),e("#J_VCode").validateNomalName({parentclass:".setCardBox",index:1,msg:"请输入验证码"}),e(".code-btn").getVerifactionCode({smstype:"modph",telselector:"#J_NewTel",oldtel:t}),e(document).on("click","#J_cardconfirm",function(){var t=e(this),a=!1;if(!t.hasClass("disabled")){e(".setCardBox .base-input").trigger("blur"),e(".setCardBox .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0});var i=e(".cardPhoto").find("img");if(i.attr("upload")||(i.closest(".unit").find(".base-error").css("display","block").find(".msg").html("请上传照片！"),a=!0),!a){var s=e.trim(e("#J_NewTel").val()),n=e.trim(e("#J_VCode").val()),o=e(".cardPhoto").find("img").attr("src");e.ajax({url:"/mall/user/modifyTelByCard",type:"POST",dataType:"json",data:{telphone:s,code:n,identifyCardImg:o},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">手机号码修改成功！</h3>',i+='<div class="mt20 tac intro-color fs14">提交成功1-2个工作日审核成功，请耐心等待<em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>",e("#editTelNum").remove(),e("#idcardconfirm").remove(),e.AXD.dialog.complete(i,function(){})}else e.AXD.tip.show(t,a.ret.resultDes)}})}}})}function s(){e("#J_VCode").validateNomalName({parentclass:".setTelNum",index:0,msg:"请输入验证码"});var t=e(".bangTel").attr("data-tel");e(".code-btn").getVerifactionCode({smstype:"modph",telValue:t});var a=e.trim(e("#J_HDTel").val());e("#J_NewTel").validatePhone({parentclass:".setTelNum",index:0,oldtel:a}),e("#J_VCode").validateNomalName({parentclass:".setTelNum",index:1,msg:"请输入验证码"}),e(".code-btn").getVerifactionCode({smstype:"modph",telselector:"#J_NewTel",oldtel:a}),e(document).on("click","#J_AlterTel",function(){var a=e(this),i=!1;if(!a.hasClass("disabled")&&(e(".setTelNum .base-input").trigger("blur"),e(".setTelNum .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(i=!0):void 0}),!i)){var s=e.trim(e("#J_VCode").val());e.ajax({url:"/common/smsCode/check",type:"POST",dataType:"json",data:{phone:t,checkCode:s,smstype:"modph"},success:function(t){if(t)if(t.ret.success===!0){var a="";a+='<div class="TelNumBox"><div class="unit clearfix mb20"><label class="fl">新手机号码:</label><input type="text" id="J_NewTel" maxlength="11" class="base-input fl" placeholder="请输入新手机号码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div>',a+='<div class="unit clearfix mb35 fs16"><label class="fl">验证码:</label><input type="text" maxlength="6" id="J_VCode" class="wid100 vert_mid base-input code-input fl"><a class="wid150 common-btn blue1 ml10 code-btn h42 eleb fs16 fl" href="javascript:;">获取验证码</a><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div>',a+='<div class="mlnext"><a id="J_telcomplate" class="common-btn orange">完 成</a></div></div>',e("#editTelNum").remove(),e.AXD.dialog.init({id:"BindBankCardDialog",title:"更换手机号",html:a,showtitle:!0,width:"680px",callback:function(){n()}})}else e("#J_VCode").closest(".unit").find(".msg").html(t.ret.resultDes).parent().show()}})}})}function n(){var t=e.trim(e("#J_HDTel").val());e("#J_NewTel").validatePhone({parentclass:".TelNumBox",index:0,oldtel:t}),e("#J_VCode").validateNomalName({parentclass:".TelNumBox",index:1,msg:"请输入验证码"}),e(".TelNumBox .code-btn").getVerifactionCode({smstype:"modph",telselector:"#J_NewTel",oldtel:t}),e(document).on("click","#J_telcomplate",function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".TelNumBox .base-input").trigger("blur"),e(".TelNumBox .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){t.disableBtn();var i=e.trim(e("#J_NewTel").val()),s=e.trim(e("#J_VCode").val());e.ajax({url:"/mall/safe/modifyTelephone",type:"POST",dataType:"json",data:{newPhone:i,checkCode:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">手机号码修改成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>",e("#editTelNum").remove(),e("#BindBankCardDialog").remove(),e.AXD.dialog.complete(i,function(){location.href=aixuedai.path+"logOut.html"})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()}})}})}function o(){e("#J_ModifyOldPwd").validatePassword({parentclass:".modify-password-box",index:0,action:"modifypassword"}),e("#J_ModifyPwd").validateNPassword({parentclass:".modify-password-box",index:1,oldpwd:e("#J_ModifyOldPwd")}),e("#J_ModifyCPwd").validateCPassword({parentclass:".modify-password-box",index:2,pwd:e("#J_ModifyPwd")}),e("#J_PwdBtn").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".modify-password-box .base-input").trigger("blur"),e(".modify-password-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ModifyOldPwd").val()),s=e.trim(e("#J_ModifyPwd").val());e.trim(e("#J_ModifyCPwd").val());t.disableBtn(),e.ajax({url:"/mall/safe/modifyLoginPwd",type:"post",dataType:"json",data:{oldPwd:i,newPwd:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">登录密码修改成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后跳转至登录界面，请使用新的登录密码重新登录。</div>',i+="</div>",e("#editLogpwd").hide(),e.AXD.dialog.complete(i,function(){location.href=aixuedai.path+"logOut.html"})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}function l(){r=e("div.addrBox"),e.ajax({url:"/mall/getUserInfo",type:"post",dataType:"json",success:function(t){if(e("#realName").html(t.ret.realName),e("#pin").html(t.ret.pin),e("#cellphone").html(t.ret.cellphone),e("#school").html(t.ret.school),"y"===t.ret.isAuthen)e("#isAuthen").hide();else{if(""===t.ret.realName||null===t.ret.realName)return void e(".or").attr("href","/mall/goinfo.html?auth=true");if("NOT_APPLY"===t.ret.status)return void e(".or").attr("id","J_Activation2");if("CLOSE"!=t.ret.status&&"PASS"!=t.ret.status&&t.ret.avaliable)return e(".or").attr("id","J_AuthDetail2"),void e(".or").html("查看进度")}}}),e.ajax({type:"GET",url:"/mall/deliver/getdeliverListJson",success:function(t){if(t.ret.success){var a=t.ret.result;a.length>=3&&e("#addAddrBtn").remove();for(var i="",s=0,n=a.length;n>s;s++){var o="y"==a[s].status?'<span class="gray-color fs12 tindet">默认地址</span>':"",l="y"==a[s].status?'class="defaddr tindet"':"";l+="y"==a[s].isAuth?' data-isauth="y"':' data-isauth="n"';var d=null==a[s].province?"":a[s].province,c=null==a[s].city?"":a[s].city,u=null==a[s].county?"":a[s].county,f=null==a[s].address?"":a[s].address;i+=d===c?'<li data-deliverid="'+a[s].id+'" '+l+'><p><span class="widaddr tindet mr15">'+d+u+f+'</span><span class="widtel tindet">'+a[s].mobilephone+"</span>"+o+"</p></li>":'<li data-deliverid="'+a[s].id+'" '+l+'><p><span class="widaddr tindet mr15">'+d+c+u+f+'</span><span class="widtel tindet">'+a[s].mobilephone+"</span>"+o+"</p></li>"}r.find("ul").html("").append(i)}}}),r.on("mouseenter","li",function(){var t=e(e(this).hasClass("defaddr")?'<a id="modifyAddr" class="blue-color ml15 fs12">修改</a>':'<a id="setDefaultAddr" class="blue-color mr5 fs12">设为默认地址</a><a id="modifyAddr" class="blue-color fs12">修改</a>');"y"===e(this).data("isauth")&&(t=e(this).hasClass("defaddr")?"":e('<a id="setDefaultAddr" class="blue-color mr15 fs12">设为默认地址</a> ')),e(this).addClass("focus"),e(this).find("p").append(t)}),r.on("mouseleave","li",function(){e(this).removeClass("focus"),e(this).find("a").remove()})}var r;e(document).on("click","#J_Activation, #J_Activation2",function(){var t=e(this);t.hasClass("disabled")||(t.disableBtn(),e.ajax({url:"/mall/userAuth",type:"post",dataType:"json",success:function(a){a.ret.success===!0?(e("#J_Activation, #J_Activation2").html("查看进度").attr("id","J_AuthDetail"),e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"我们的校园经理将火速联系您，请保持电话畅通！"),e("#J_Activation, #J_Activation2").enableBtn()):(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),e("#J_Activation, #J_Activation2").enableBtn())},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),e("#J_Activation, #J_Activation2").enableBtn()}}))}),e(document).on("click","#J_AuthDetail, #J_AuthDetail2",function(){e(".g-dialog").data("overlay")&&e(".g-dialog").data("overlay").close(),e.AXD.showAuthDialog()}),e(".bang:last-child").css("border-bottom","none"),e(document).on("click",".telNumSet",function(){e.AXD.dialog.init({id:"editTelNum",title:"更换手机号",html:e("#setTelNum").html(),showtitle:!0,width:"650px",callback:function(){s()}})}),e(document).on("click",".editLog",function(){e.AXD.dialog.init({id:"editLogpwd",title:"修改登录密码",html:e("#setlogpwd").html(),showtitle:!0,width:"680px",callback:function(){o()}})}),e(document).on("click",".usesrAuthent",function(){e.AXD.dialog.init({id:"idConfirmBox",title:"身份认证",html:e("#idConfirm").html(),showtitle:!0,width:"820px",callback:function(){l()}})}),e(document).on("click","#J_BindBankCard",function(t){t.stopPropagation(),e.AXD.dialog.init({id:"BindBankCardDialog",title:"绑定银行卡",html:e("#addBankCardTmpl").html(),showtitle:!0,width:"680px",callback:function(){e.get("/mall/banklist",function(t){if(t.ret.success){var a=t.ret.result;0==a&&e("div.banksBox").find("dl").css("border","none");for(var i="",s=0;s<a.length;s++)i+='<dl><dt class="fl mr10"><img style="width:40px;" src="'+a[s].bankIcon+'" alt="" /></dt><dd><p class="fs16 mb5">'+a[s].bankName+'</p><p class="fs14">'+a[s].bankCode.substr(0,4)+"***********"+a[s].bankCode.substr(-4,4)+"</p></dd></dl>";e("div.banksBox .banklist").html("").append(i)}})}})}),e(document).on("click",".telnumLos",function(){var t="";t+='<div class="setCardBox pl40"><div class="unit clearfix mb20"><p class="fl fs16" style="margin-left: 110px;">提交成功1-2个工作日审核成功，请耐心等待</p>  </div>',t+='<div class="unit clearfix mb20"><label class="fl">新手机号码:</label><input type="text" id="J_NewTel" maxlength="11" class="base-input fl" placeholder="请输入新手机号码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div>',t+='<div class="unit clearfix mb20 fs16"><label class="fl">验证码:</label><input type="text" maxlength="6" id="J_VCode" class="wid100 vert_mid base-input code-input fl"><a class="wid150 common-btn blue1 ml10 code-btn h42 eleb fs16 fl" href="javascript:;">获取验证码</a><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div>',t+='<div class="unit clearfix mb20 fs16 pr"><label class="fl">手持身份证照:</label><form method="POST" class="imgUploadForm fl" class="formsty" target="iframeUpLoad" enctype="multipart/form-data"><input type="hidden" name="imgwidth" value=""><input type="hidden" name="imgheight" value=""><input name="imageFile" class="uploadFile" type="file" style="width:70px;height:70px;z-index:99;position:relative;opacity:0;-webkit-opacity: 0;-moz-opacity: 0;-khtml-opacity: 0;filter:alpha(opacity=0);"/><a class="cardPhoto pr J_Photo_Up"><img src="'+aixuedai.staticpath+'/images/reg/cardPhoto.png"/><i style="display:none;">上传图片</i></a></form><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div>',t+='<div class="mlnext"><a id="J_cardconfirm" class="common-btn orange">提 交</a></div></div><iframe src="" name="iframeUpLoad" width="0" height="0" style="display:none"></iframe>',e("#editTelNum").remove(),e.AXD.dialog.init({id:"idcardconfirm",title:"身份验证",html:t,showtitle:!0,width:"680px",callback:function(t){i(),a(),e(".uploadFile").hover(function(t){e(".J_Photo_Up i").show()},function(t){e(".J_Photo_Up i").hide()})}})}),e("#amount").tips({content:"<span>可提现金额为借点花金额和现金余额，可绑定银行卡进行提现</span>",direction_v:"top"});var d=e(".telNumSet2").attr("data-tel"),c=d.substr(0,3)+"****"+d.substr(7);e(".telNumSet2").tips({content:"<span>账号："+c+'<a class="blue-color telNumSet ml5">更改</a></span>',direction_v:"bottom"}),e(".usesrAuthent").tips({content:e("#J_tip_Authent").html(),direction_v:"bottom"}),e(".setPay").tips({content:e("#J_tip_pay").html(),direction_v:"bottom"}),e(".editPay").tips({content:e("#J_tip_pay").html(),direction_v:"bottom"}),e(".cdAddbanck").tips({content:e("#J_tip_bankcard").html(),direction_v:"bottom"}),e(".cdManagebanck").tips({content:e("#J_tip_bankcard").html(),direction_v:"bottom"}),location.href.indexOf("#findpaypassword")>0&&e.AXD.initFindPayPwdDialog(),location.href.indexOf("#setpaypassword")>0&&e.AXD.setPaypwd()})}),requirejs(["common"],function(e){requirejs(["main","page/user/user","page/user/safeCenter"])}),define("boot/user/user",function(){});