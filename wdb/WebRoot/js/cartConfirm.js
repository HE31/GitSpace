/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

define("module/util",["jquery"],function(e){e.AXD=e.AXD||{versions:"aixuedai1.0"},e.AXD.util={isIE6:function(){return e.browser.msie&&"6.0"==e.browser.version?!0:!1},isIOS:function(){return/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)},isValidReg:function(e){var t=/<|>|\[|\]|\{|\}|『|』|※|○|●|◎|§|△|▲|☆|★|◇|◆|□|▼|㊣|﹋|⊕|⊙|〒|ㄅ|ㄆ|ㄇ|ㄈ|ㄉ|ㄊ|ㄋ|ㄌ|ㄍ|ㄎ|ㄏ|ㄐ|ㄑ|ㄒ|ㄓ|ㄔ|ㄕ|ㄖ|ㄗ|ㄘ|ㄙ|ㄚ|ㄛ|ㄜ|ㄝ|ㄞ|ㄟ|ㄢ|ㄣ|ㄤ|ㄥ|ㄦ|ㄧ|ㄨ|ㄩ|■|▄|▆|\*|@|#|\^|\\/;return 1==t.test(e)?!1:!0},isValidURL:function(t){var a=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(a)?!1:!0)},isValidDomain:function(t){var a=/^(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(a)?!1:!0)},isEmail:function(e){var t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?!0:!1},isPhoneNumber:function(e){var t=/^[0-9]{11}$/;return t.test(e)?!0:!1},isDate:function(e){var t=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return t.test(e)?!0:!1},isNumber:function(e){var t=/^\d*$/;return null==e.match(t)?!1:!0},isQq:function(e){var t=/^\d{5,10}$/;return t.test(e)?!0:!1},isDecimal:function(e){var t=/^\d{0,8}\.{0,1}(\d{1,2})?$/;return null==e.match(t)?!1:!0},isValidPost:function(e){var t=/^\d{6}$/;return null==e.match(t)?!1:!0},isCERT:function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return null==e.match(t)?!1:!0},getBrithday:function(e){var t="";return t=15==e.length?"19"+e.substring(6,8):e.substring(6,10)},isAdult:function(t){var a=parseInt(e.AXD.util.getBrithday(t)),i=parseInt((new Date).getFullYear());return i-a>=18?!0:!1},isBirthday:function(e){var t=/\d{4}-\d{2}-\d{2}/;return null==e.match(t)?!1:!0},requestPrameVal:function(e){var t=location.href,a=t.substring(t.indexOf("?")+1,t.length).split("&"),s={};for(i=0;j=a[i];i++)s[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);var n=s[e.toLowerCase()];return"undefined"==typeof n?"":n},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},lTrim:function(e){return e.replace(/(^\s*)/g,"")},rTrim:function(e){return e.replace(/(\s*$)/g,"")},isNULL:function(t){return null==t?!0:0==e.AXD.util.trim(t).length?!0:!1},isInt:function(e){var t=/^(-|\+)?\d+$/;return t.test(e)},getMsgLength:function(e){for(var t=0,a=e.length,i=0;a>i;i++){var s=e.charCodeAt(i);t+=s>=1&&126>=s||s>=65376&&65439>=s?.5:1}return t},checkAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!0},uncheckAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!1},getWordLength:function(t){t=e.AXD.util.trim(t);var a=0,i=0;return i=t.replace(/[^\x00-\xff]/g,"**").length,a=parseInt(i/2)==i/2?i/2:parseInt(i/2)+1},getDomain:function(e){var t="null";("undefined"==typeof e||null==e)&&(e=window.location.href);var a=/.*\:\/\/([^\/]*).*/,i=e.match(a);return"undefined"!=typeof i&&null!=i&&(t=i[1]),t},addFavorite:function(e,t){var a=-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL";document.all?window.external.addFavorite(e,t):window.sidebar?window.sidebar.addPanel(e,t,""):alert("您可以尝试通过快捷键"+a+" + D 加入到收藏夹~")},addNDays:function(e,t){var a=new Date(Date.parse(e.replace(/-/g,"/")));return a.setDate(a.getDate()+parseInt(t)),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},getPosition:function(t){var a=t.offset().top,i=t.offset().left,s=a+t.outerHeight(),n=i+t.outerWidth(),o=i+t.outerWidth()/2,r=a+t.outerHeight()/2;/iPad/i.test(navigator.userAgent)&&(a-=e(window).scrollTop(),s-=e(window).scrollTop(),r-=e(window).scrollTop());var l={leftTop:function(){return{x:i,y:a}},leftMid:function(){return{x:i,y:r}},leftBottom:function(){return{x:i,y:s}},topMid:function(){return{x:o,y:a}},rightTop:function(){return{x:n,y:a}},rightMid:function(){return{x:n,y:r}},rightBottom:function(){return{x:n,y:s}},MidBottom:function(){return{x:o,y:s}},middle:function(){return{x:o,y:r}}};return l},queryTransform:function(){for(var e=location.search.slice(1).split("&"),t={},a="",i=0,s=e.length;s>i;i++)a=e[i].split("="),a.length>1&&(t[a[0]]=a[1]);return t},toDecimal2:function(e){var t=parseFloat(e);if(isNaN(t))return!1;var t=Math.round(100*e)/100,a=t.toString(),i=a.indexOf(".");for(0>i&&(i=a.length,a+=".");a.length<=i+2;)a+="0";return a}},e.fn.extend({disableBtn:function(){e(this).addClass("disabled")},enableBtn:function(){var t=e(this);setTimeout(function(){t.removeClass("disabled")},100)}}),Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1})}),define("module/dialog",["jquery","module/util","jqtools","overlay"],function(e){e.AXD.dialog={conf:{id:"J_AXDDialog",title:"提示",html:"",callback:function(){},showtitle:!0,showclose:!0,showMask:!0,width:"",closecallback:function(){}},init:function(t){var a=e.AXD.dialog.conf;t&&e.extend(a,t);var i=a.id,s=""!==a.width?"width:"+a.width+"!important":"";if(e("#"+i)[0])e("#"+i).data("overlay").load();else{var n="";n+='<div id="'+i+'" class="g-dialog" style="'+s+'">',a.showtitle&&(n+='<div class="hd">',n+="<h3>"+a.title+"</h3>",n+="</div>"),n+='<div class="bd">',n+=a.html,n+="</div>",a.showclose&&(n+='<a class="common-icon close" href="javascript:;"></a>'),n+="</div>",e("body").append(n);var o={top:"center",oneInstance:!1,closeOnClick:!1,load:!0,closeOnEsc:!1};a.showMask&&(o.mask={color:"#000",loadSpeed:200,closeSpeed:0,opacity:.3}),e("#"+i).overlay(o),0==a.showclose&&e("#"+i+" .close").remove(),e("#"+i+" .close").unbind().bind("click",function(){e("#"+i).data("overlay").close(),e("#"+i).remove(),a.closecallback()}),e("#"+i+" .close-dialog").bind("click",function(){e("#"+i).data("overlay").close(),e("#"+i).remove()}),a.callback()}},confirm:function(t,a){var i='<div class="clearfix unit mt10" style="height:60px;font-size:16px;text-align: center;">'+t+"</div>";i+='<div class="clearfix unit mt10" style="width: 306px;"><a href="javascript:;" class="btn common-btn mr10 gray fl close-dialog">否</a><a href="javascript:;" class="btn common-btn  orange fl J_Save">是</a></div>',e.AXD.dialog.init({id:"J_Confirm",title:"提示",html:i,showtitle:!0,width:"500px",callback:function(){e("#J_Confirm .J_Save").off("click").live("click",function(){"function"==typeof a&&a()})}})},complete:function(t,a,i){e.AXD.dialog.init({id:"J_CompleteDialog",title:"",html:t,showtitle:!1,showclose:!1,width:"500px",callback:function(){var t=i||3,s=setInterval(function(){t--,e("#J_CompleteDialog em").text(t),0==t&&(e("#J_CompleteDialog").data("overlay").close(),clearInterval(s),"function"==typeof a&&a())},1e3)}})}}}),define("module/extendfn",["jquery","module/util"],function(e){e.fn.extend({dropdown:function(t){var a={classNm:".dropdown",timer:null,fadeSpeed:100,duration:2e3};t&&e.extend(a,t);var i=this,s=e(a.classNm);i.each(function(){var t=e(this);t.hover(function(){clearTimeout(a.timer),s.fadeIn(a.fadeSpeed)},function(){a.timer=setTimeout(function(){s.fadeOut(a.fadeSpeed)},a.duration)}),s.hover(function(){clearTimeout(a.timer),s.show()},function(){a.timer=setTimeout(function(){s.fadeOut(a.fadeSpeed)},a.duration)})})},insertAtCursor:function(t){var a=e(this)[0];if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=t,this.focus();else if(a.selectionStart||"0"==a.selectionStart){var i=a.selectionStart,s=a.selectionEnd,n=a.scrollTop;a.value=a.value.substring(0,i)+t+a.value.substring(s,a.value.length),this.focus(),a.selectionStart=i+t.length,a.selectionEnd=i+t.length,a.scrollTop=n}else this.value+=t,this.focus()},disableBtn:function(){e(this).addClass("disabled")},enableBtn:function(){var t=e(this);setTimeout(function(){t.removeClass("disabled")},500)},validatePhone:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldtel:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入手机号"),void s.show()):e.AXD.util.isPhoneNumber(t)?""!==i.oldtel&&t===i.oldtel?(s.find(".msg").text("新手机号不能与原手机号相同"),void s.show()):(s.hide(),void n.show()):(s.find(".msg").text("请输入正确的手机号"),void s.show())})},validateAcount:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入帐号"),void s.show()):void s.hide()})},validateAcountPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):void s.hide()})},validateNomalName:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,msg:"请填写"},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text(i.msg),void s.show()):void s.hide()})},validatecheckbox:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var e=a.closest(i.parentclass).find(i.errorclass).eq(i.index),t=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return e.hide(),t.hide(),"checked"!=a.attr("checked")?(e.find(".msg").text("请先同意合约"),void e.show()):void e.hide()})},validateVerifyImg:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入图形验证码"),void s.show()):void s.hide()})},validateTelcode:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入手机验证码"),void s.show()):void s.hide()})},validateAichuangcode:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),t.length>10?(s.find(".msg").text("爱创码格式不正确"),void s.show()):isNaN(t)?(s.find(".msg").text("爱创码格式不正确"),void s.show()):void s.hide()})},validatePayPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,action:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):6!=t.length?(s.find(".msg").text("密码长度为6位数字"),void s.show()):/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由6位数字组成"),void s.show())})},validateNPayPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldpwd:e(".oldpwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入新密码"),void s.show()):t==e.trim(i.oldpwd.val())?(s.find(".msg").text("新密码不能和原密码一致"),void s.show()):6!=t.length?(s.find(".msg").text("密码长度为6位数字"),void s.show()):/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由6位数字组成"),void s.show())})},validatePassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,action:""},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入密码"),void s.show()):"login"!=i.action&&"modifypassword"!=i.action?t.length<8?(s.find(".msg").text("密码长度为8-16位数字,字母组合而成"),void s.show()):t.length>16?(s.find(".msg").text("密码长度必须小于16位"),void s.show()):/[a-zA-Z]+/.test(t)&&/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由8-16位数字,字母组合而成"),void s.show()):void 0})},validateNPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,oldpwd:e(".oldpwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入新密码"),void s.show()):t==e.trim(i.oldpwd.val())?(s.find(".msg").text("新密码不能和原密码一致"),void s.show()):t.length<8?(s.find(".msg").text("密码长度必须大于8位"),void s.show()):t.length>16?(s.find(".msg").text("密码长度必须小于16位"),void s.show()):/[a-zA-Z]+/.test(t)&&/[0-9]+/.test(t)?void s.hide():(s.find(".msg").text("密码由8-16位数字，英文，特殊符号组合而成"),void s.show())})},validateCPassword:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0,pwd:e(".pwd")},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请再次输入密码"),void s.show()):t!=e.trim(i.pwd.val())?(s.find(".msg").text("两次密码输入不一致"),void s.show()):void s.hide()})},validateName:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入真实姓名"),void s.show()):(s.hide(),void n.show())})},validateCert:function(t){var a=e(this),i=e.extend({errorclass:".base-error",rightclass:".base-right",parentclass:".unit",index:0},t);a.live("blur",function(){var t=e.trim(a.val()),s=a.closest(i.parentclass).find(i.errorclass).eq(i.index),n=a.closest(i.parentclass).find(i.rightclass).eq(i.index);return s.hide(),n.hide(),""==t?(s.find(".msg").text("请输入身份证号码"),void s.show()):void e.post(aixuedai.path+"user/checkCert",{cert:t},function(e){e&&(100==e.status?(s.hide(),n.show()):(s.find(".msg").text(e.info),s.show()))})})}})}),define("module/tipshow",["jquery","module/util"],function(e){e.AXD.tip={conf:{timer:null,timerLength:3e3,tipClass:"tipmodal tipmodal-error"},show:function(t,a){clearTimeout(e.AXD.tip.conf.timer);var i=e.AXD.util.getPosition(t).topMid();e(".tipbox")[0]||e("body").append('<div class="tipbox "'+a+"></div>"),e(".tipbox").attr("class","tipbox "+e.AXD.tip.conf.tipClass),e(".tipbox").html(a);var s=e(".tipbox").outerWidth(),n=e(".tipbox").outerHeight();e(".tipbox").css({left:i.x-s/2+"px",top:i.y-n-10+"px"}).fadeIn(),e.AXD.tip.conf.timer=setTimeout(function(){e(".tipbox").fadeOut()},e.AXD.tip.conf.timerLength)}}}),define("module/setPayPassword",["jquery","module/util","module/extendfn","jqtools","module/dialog","module/tipshow"],function(e){e(function(){function t(){e("#J_ModifyOldPwd_Pay").validatePayPassword({parentclass:".modify-paypwd-box",index:0,action:"modifypassword"}),e("#J_ModifyPwd_Pay").validateNPayPassword({parentclass:".modify-paypwd-box",index:1,oldpwd:e("#J_ModifyOldPwd_Pay")}),e("#J_ModifyCPwd_Pay").validateCPassword({parentclass:".modify-paypwd-box",index:2,pwd:e("#J_ModifyPwd_Pay")}),e("#J_PwdBtn_Pay").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".modify-paypwd-box .base-input").trigger("blur"),e(".modify-paypwd-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ModifyOldPwd_Pay").val()),s=e.trim(e("#J_ModifyPwd_Pay").val());e.trim(e("#J_ModifyCPwd_Pay").val());t.disableBtn(),e.ajax({url:"/mall/safe/modifyPayPwd",type:"post",dataType:"json",data:{password:i,newPwd:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">支付密码修改成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>",e("#editPaypwd").hide(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}function a(){e("#J_Cardid").validateNomalName({parentclass:".set-paypwd-box",index:0,msg:"请输入身份证号后四位"}),e("#J_ModifyPwd_Pay2").validateNPayPassword({parentclass:".set-paypwd-box",index:1}),e("#J_ModifyCPwd_Pay2").validateCPassword({parentclass:".set-paypwd-box",index:2,pwd:e("#J_ModifyPwd_Pay2")}),e("#J_PwdBtn_Pay2").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".set-paypwd-box .base-input").trigger("blur"),e(".set-paypwd-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_ModifyPwd_Pay2").val()),s=e.trim(e("#J_Cardid").val());t.disableBtn(),e.ajax({url:"/mall/safe/paypwd/set",type:"post",dataType:"json",data:{card:s,pwd:i},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">支付密码设置成功！</h3>',i+="</div>",e("#setPaypwd").hide(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}function i(){e("#findPaygpwd .code-btn").getVerifactionCode({smstype:"normal",telValue:e(".bangTel").attr("data-tel")}),e("#J_PayCode").validateNomalName({parentclass:".modify-payfind-box",index:0,msg:"请输入验证码"}),e("#J_ModifyPwd_PayFind").validateNPayPassword({parentclass:".modify-payfind-box",index:1}),e("#J_ModifyCPwd_PayFind").validateCPassword({parentclass:".modify-payfind-box",index:2,pwd:e("#J_ModifyPwd_PayFind")}),e("#J_PwdBtn_PayFind").click(function(){var t=e(this),a=!1;if(!t.hasClass("disabled")&&(e(".modify-payfind-box .base-input").trigger("blur"),e(".modify-payfind-box .base-error").each(function(){var t=e(this);return"block"==t.css("display")?void(a=!0):void 0}),!a)){var i=e.trim(e("#J_PayCode").val()),s=e.trim(e("#J_ModifyPwd_PayFind").val());e.trim(e("#J_ModifyCPwd_PayFind").val());t.disableBtn(),e.ajax({url:"/mall/safe/resetPayPwd",type:"post",dataType:"json",data:{phone:e(".bangTel").attr("data-tel"),checkCode:i,newPwd:s},success:function(a){if(a)if(a.ret.success===!0){var i="";i+="<div>",i+='<h3 class="fs18 tac">找回支付密码成功！</h3>',i+='<div class="mt20 tac intro-color fs14"><em class="red-color">3</em>秒后关闭窗口。</div>',i+="</div>","/mall/safe/payCenter.html"!=window.location.pathname&&e("#findPaygpwd").hide(),e(".g-dialog").remove(),e.AXD.dialog.complete(i,function(){window.location.reload()})}else e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn()},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}})}})}var s='<div class="set-paypwd-box pl40"><div class="unit clearfix mb20"><label class="fl">身份证后四位:</label><input type="text" id="J_Cardid" maxlength="4" class="base-input fl" placeholder="请输入身份证号后四位"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><div class="unit clearfix mb20"><label class="fl">支付密码:</label><input type="password" id="J_ModifyPwd_Pay2" maxlength="6" class="base-input fl" placeholder="请设置6位数字密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><div class="unit clearfix mb30"><label class="fl">再输一次:</label><input type="password" id="J_ModifyCPwd_Pay2" maxlength="6" class="base-input fl"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div></div><p class="mlnext"><a id="J_PwdBtn_Pay2" class="common-btn orange mr30">完 成</a></p></div>',n='<div class="modify-paypwd-box pl40"> <div class="unit clearfix mb20"> <label class="fl">旧支付密码:</label> <input type="password" id="J_ModifyOldPwd_Pay" maxlength="6" class="base-input fl" placeholder="请输入旧密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <div class="unit clearfix mb20"> <label class="fl">新支付密码:</label> <input type="password" id="J_ModifyPwd_Pay" maxlength="6" class="base-input fl" placeholder="请设置6位数字密码"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <div class="unit clearfix mb30"> <label class="fl">再输一次:</label> <input type="password" id="J_ModifyCPwd_Pay" maxlength="6" class="base-input fl"><div class="fl base-error"><span class="regError fs14 mt11 fl"></span><span class="msg fl"></span></div> </div> <p class="mlnext"><a id="J_PwdBtn_Pay" class="common-btn orange mr30 inblock">完 成</a><a class="ml20 blue-color eleb mt20 fs14 findPay">忘记支付密码？</a></p> </div>';e(document).on("click",".setPay",function(){e.AXD.dialog.init({id:"setPaypwd",title:"设置支付密码",html:s,showtitle:!0,width:"650px",callback:function(){a()}})}),e(document).on("click",".editPay, .editPay2",function(){e.AXD.dialog.init({id:"editPaypwd",title:"修改支付密码",html:n,showtitle:!0,width:"650px",callback:function(){t()}})}),e(document).on("click",".findPay",function(){e.AXD.dialog.init({id:"findPaygpwd",title:"找回支付密码",html:e("#findpwd").html(),showtitle:!0,width:"680px",callback:function(){i()}})}),e.AXD.initFindPayPwd=i,e.AXD.initFindPayPwdDialog=function(){e.AXD.dialog.init({id:"findPaygpwd",title:"找回支付密码",html:e("#findpwd").html(),showtitle:!0,width:"680px",callback:function(){i()}})},e.AXD.setPaypwd=function(){e.AXD.dialog.init({id:"setPaypwd",title:"设置支付密码",html:s,showtitle:!0,width:"650px",callback:function(){a()}})}})}),define("module/checkUserStatus",["jquery","module/util","module/dialog","module/setPayPassword"],function(e){e.AXD.checkUserStatus=function(t,a,i,s){var n=!1;return e.ajax({url:"/common/checkUserStatus",data:a,dataType:"json",type:"POST",async:!1,success:function(t){if(t.ret.success===!1){var a="";"STATUS10"===t.ret.code?(a="/login.html?url="+window.location.pathname+window.location.search,e.AXD.dialog.init({id:"J_Dialog",title:"",showtitle:!1,width:"500px",html:'<div class="pt20 pb20 tac fs16"><h2>请登入,三秒后自动跳转到登入页面~</h2></div>'}),setTimeout(function(){window.location.href=a},3e3)):"STATUS11"===t.ret.code||("STATUS13"===t.ret.code?e.AXD.setPaypwd():"STATUS12"===t.ret.code&&(a="/mall/goinfo.html?auth=true",e.AXD.dialog.init({id:"J_Dialog",title:"",showtitle:!1,width:"500px",html:'<div class="pt20 pb20 tac fs16"><h2>请验证用户信息,三秒后自动跳转验证页面~</h2></div>'}),setTimeout(function(){window.location.href=a},3e3))),n=!1}else n=!0},error:function(){n=!1}}),n}}),define("module/cartCount",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/cart/getCartCount",type:"POST",dataType:"json",success:function(t){e(".J_cart").find("b").text(t.cartCount)}})}e.AXD.getCartCount=t,aixuedai.userid>0&&t()})}),define("page/index/news",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/message/unreadnum",dataType:"json",data:{},type:"POST",success:function(t){t.ret.success?e(".H_newsNum").text(t.ret.result):alert(t.ret.resultDes)},error:function(){console.log("error")}})}function a(){e.ajax({url:"/mall/message/nearlNewsList",dataType:"json",data:{},type:"POST",success:function(t){if(t.issuccess){e(".newsFont").addClass("hasHover");var a="";e.each(t.bizObj.list,function(e,t){var i=t.isRead,s="";"y"==i&&(s="H_changeColor");var n=t.title,o=t.iconUrl,r=t.content,l=t.time,d=t.isOutlink,c=t.outlinkUrl;"y"===d&&null!==c&&""!==c&&"null"!==c||(c="javascript:"),a+='<a class="listNews '+s+'" data-id="'+t.id+'" href="'+c+'" target="_blank"><img src="'+aixuedai.staticpath+"/images/news/"+o+'" class="'+s+'"><p>'+n+'</p><span class="fr mr10 timeNews">'+l+'</span><p class="downFont cc9 fs12">'+r+"</p></a>"}),e(".news").html('<div class="hg5 fs14">未读消息(<b class="orange-color newsNum">'+e(".H_newsNum").text()+"</b>)</div>"+a+'<a class="chakan fs16 clearfix checkNews" href="/mall/message/gonews.html" target="_blank">查看所有消息</a>'),e(".newsFont").addClass("H_hover")}else alert(t.result.resultDes)},error:function(){console.log("error")}})}function i(t,i){e.ajax({url:"/mall/message/read",dataType:"json",type:"POST",data:{id:i},success:function(i){i.ret.success?(e(t).addClass("changeColor"),e(t).find(".img").addClass("changeColor"),a()):alert(i.ret.resultDes)},error:function(){console.log("error")}})}t();var s=null;e(".newsFont").mouseover(function(){e(".newsFont").hasClass("hasHover")?e(".news").slideDown():(e(".news").slideDown(),a()),s&&clearTimeout(s)}).mouseout(function(){s=setTimeout(function(){e(".news").slideUp(),clearTimeout(s)},500)}),e(document).on("click",'.listNews:not(".H_changeColor")',function(){var a=e(this).attr("data-id");i(this,a),t()})})}),define("main",["jquery","module/util","lazyload","module/dialog","module/checkUserStatus"],function(e){"use strict";e(function(){function t(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}t("_OkLJ_%UJ"),e("#J_PendantClose").on("click",function(t){e(this).closest(".pendant").fadeOut()}),e("#J_Report")[0]&&e("#J_Report").click(function(){var t="";t+='<div class="main">',t+='<a class="qqNumber fw fs16" target="blank" href="http://wpa.qq.com/msgrd?V=3&uin=2976373015&Site=爱学贷在线举报&Menu=yes">',t+="2976373015</a>",t+='<div class="email fw fs16">',t+="fengkongbu@aixuedai.com</div>",t+="</div>",e.AXD.dialog.init({id:"J_ReportBookDialog",title:"举报拿大奖",html:t,width:"900px"})}),aixuedai.userid>0&&requirejs(["module/cartCount","page/index/news"]),e("#J_menuTable")[0]&&(e(".header-bottom.fixed").find(".first").on("mouseenter",function(){e("#J_menuTable").animate({top:"44px"},300,"linear")}),e(".noIndexMenu").on("mouseenter",function(){e(document).scrollTop()<150&&(e("#J_noIndexMenuTable").parent().parent().find(".layout1200").css("height","400px"),e("#J_noIndexMenuTable").animate({top:"0px"},300,"linear"))}),e("#J_menuTable").on("mouseleave",function(){e("#J_menuTable").animate({top:"-355px"},300,"linear")}),e(".noIndexFixed").on("mouseleave",function(){e("#J_noIndexMenuTable").animate({top:"-345px"},300,"linear",function(){e("#J_noIndexMenuTable").parent().parent().find(".layout1200").css("height","0px")})}),e(window).scroll(function(){e("#J_menuTable").stop(),e("#J_menuTable").animate({top:"-347px"},300,"linear");var t=e(window).scrollTop();t>120?e.AXD.util.isIE6()||(e("#J_RSide").stop(),e("#J_RSide").animate({right:"0px"},"linear"),e("#header .header-bottom").addClass("fixed"),e(".menuBox .menu").stop(),e("#J_menuTable").show(),e(".menuBox .menu").animate({top:"-300px"},300,"linear")):e.AXD.util.isIE6()||(e("#J_RSide").stop(),e("#J_RSide").animate({right:"-80px"},"linear"),e("#header .header-bottom").removeClass("fixed"),e(".menuBox .menu").stop(),e("#J_menuTable").hide(),e(".menuBox .menu").animate({top:"0px"},300,"linear"))})),e("#J_RSide .to-top-icon").bind("click",function(){e("html,body").animate({scrollTop:"0px"},300)})})}),function(e){"use strict";"function"==typeof define&&define.amd?define("jqform",["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var a=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(a))}function a(t){var a=t.target,i=e(a);if(!i.is("[type=submit],[type=image]")){var s=i.closest("[type=submit]");if(0===s.length)return;a=s[0]}var n=this;if(n.clk=a,"image"==a.type)if(void 0!==t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=i.offset();n.clk_x=t.pageX-o.left,n.clk_y=t.pageY-o.top}else n.clk_x=t.pageX-a.offsetLeft,n.clk_y=t.pageY-a.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var s={};s.fileapi=void 0!==e("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function a(a){var i,s,n=e.param(a,t.traditional).split("&"),o=n.length,r=[];for(i=0;o>i;i++)n[i]=n[i].replace(/\+/g," "),s=n[i].split("="),r.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return r}function o(i){for(var s=new FormData,n=0;n<i.length;n++)s.append(i[n].name,i[n].value);if(t.extraData){var o=a(t.extraData);for(n=0;n<o.length;n++)o[n]&&s.append(o[n][0],o[n][1])}t.data=null;var r=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(r.xhr=function(){var a=e.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(e){var a=0,i=e.loaded||e.position,s=e.total;e.lengthComputable&&(a=Math.ceil(i/s*100)),t.uploadProgress(e,i,s,a)},!1),a}),r.data=null;var d=r.beforeSend;return r.beforeSend=function(e,a){t.formData?a.data=t.formData:a.data=s,d&&d.call(this,e,a)},e.ajax(r)}function r(a){function s(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(a){i("cannot get iframe.contentWindow document: "+a)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(a){i("cannot get iframe.contentDocument: "+a),t=e.document}return t}function o(){function t(){try{var e=s(g).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(a){i("Server abort: ",a," (",a.name,")"),r(k),C&&clearTimeout(C),C=void 0}}var a=u.attr2("target"),n=u.attr2("action"),o="multipart/form-data",d=u.attr("enctype")||u.attr("encoding")||o;A.setAttribute("target",h),(!l||/post/i.test(l))&&A.setAttribute("method","POST"),n!=f.url&&A.setAttribute("action",f.url),f.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(C=setTimeout(function(){w=!0,r(_)},f.timeout));var c=[];try{if(f.extraData)for(var p in f.extraData)f.extraData.hasOwnProperty(p)&&(e.isPlainObject(f.extraData[p])&&f.extraData[p].hasOwnProperty("name")&&f.extraData[p].hasOwnProperty("value")?c.push(e('<input type="hidden" name="'+f.extraData[p].name+'">').val(f.extraData[p].value).appendTo(A)[0]):c.push(e('<input type="hidden" name="'+p+'">').val(f.extraData[p]).appendTo(A)[0]));f.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",r):g.addEventListener("load",r,!1),setTimeout(t,15);try{A.submit()}catch(m){var b=document.createElement("form").submit;b.apply(A)}}finally{A.setAttribute("action",n),A.setAttribute("enctype",d),a?A.setAttribute("target",a):u.removeAttr("target"),e(c).remove()}}function r(t){if(!b.aborted&&!j){if(T=s(g),T||(i("cannot access response document"),t=k),t===_&&b)return b.abort("timeout"),void D.reject(b,"timeout");if(t==k&&b)return b.abort("server abort"),void D.reject(b,"error","server abort");
if(T&&T.location.href!=f.iframeSrc||w){g.detachEvent?g.detachEvent("onload",r):g.removeEventListener("load",r,!1);var a,n="success";try{if(w)throw"timeout";var o="xml"==f.dataType||T.XMLDocument||e.isXMLDoc(T);if(i("isXml="+o),!o&&window.opera&&(null===T.body||!T.body.innerHTML)&&--X)return i("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var l=T.body?T.body:T.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=T.XMLDocument?T.XMLDocument:T,o&&(f.dataType="xml"),b.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var d=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(d);if(c||f.textarea){var u=T.getElementsByTagName("textarea")[0];if(u)b.responseText=u.value,b.status=Number(u.getAttribute("status"))||b.status,b.statusText=u.getAttribute("statusText")||b.statusText;else if(c){var h=T.getElementsByTagName("pre")[0],m=T.getElementsByTagName("body")[0];h?b.responseText=h.textContent?h.textContent:h.innerText:m&&(b.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==d&&!b.responseXML&&b.responseText&&(b.responseXML=I(b.responseText));try{S=N(b,d,f)}catch(y){n="parsererror",b.error=a=y||n}}catch(y){i("error caught: ",y),n="error",b.error=a=y||n}b.aborted&&(i("upload aborted"),n=null),b.status&&(n=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===n?(f.success&&f.success.call(f.context,S,"success",b),D.resolve(b.responseText,"success",b),p&&e.event.trigger("ajaxSuccess",[b,f])):n&&(void 0===a&&(a=b.statusText),f.error&&f.error.call(f.context,b,n,a),D.reject(b,"error",a),p&&e.event.trigger("ajaxError",[b,f,a])),p&&e.event.trigger("ajaxComplete",[b,f]),p&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,b,n),j=!0,f.timeout&&clearTimeout(C),setTimeout(function(){f.iframeTarget?v.attr("src",f.iframeSrc):v.remove(),b.responseXML=null},100)}}}var d,c,f,p,h,v,g,b,y,x,w,C,A=u[0],D=e.Deferred();if(D.abort=function(e){b.abort(e)},a)for(c=0;c<m.length;c++)d=e(m[c]),n?d.prop("disabled",!1):d.removeAttr("disabled");if(f=e.extend(!0,{},e.ajaxSettings,t),f.context=f.context||f,h="jqFormIO"+(new Date).getTime(),f.iframeTarget?(v=e(f.iframeTarget),x=v.attr2("name"),x?h=x:v.attr2("name",h)):(v=e('<iframe name="'+h+'" src="'+f.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var a="timeout"===t?"timeout":"aborted";i("aborting upload... "+a),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(s){}v.attr("src",f.iframeSrc),b.error=a,f.error&&f.error.call(f.context,b,a,t),p&&e.event.trigger("ajaxError",[b,f,a]),f.complete&&f.complete.call(f.context,b,a)}},p=f.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[b,f]),f.beforeSend&&f.beforeSend.call(f.context,b,f)===!1)return f.global&&e.active--,D.reject(),D;if(b.aborted)return D.reject(),D;y=A.clk,y&&(x=y.name,x&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[x]=y.value,"image"==y.type&&(f.extraData[x+".x"]=A.clk_x,f.extraData[x+".y"]=A.clk_y)));var _=1,k=2,P=e("meta[name=csrf-token]").attr("content"),J=e("meta[name=csrf-param]").attr("content");J&&P&&(f.extraData=f.extraData||{},f.extraData[J]=P),f.forceSync?o():setTimeout(o,10);var S,T,j,X=50,I=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},q=e.parseJSON||function(e){return window.eval("("+e+")")},N=function(t,a,i){var s=t.getResponseHeader("content-type")||"",n="xml"===a||!a&&s.indexOf("xml")>=0,o=n?t.responseXML:t.responseText;return n&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,a)),"string"==typeof o&&("json"===a||!a&&s.indexOf("json")>=0?o=q(o):("script"===a||!a&&s.indexOf("javascript")>=0)&&e.globalEval(o)),o};return D}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,d,c,u=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),l=t.type||this.attr2("method"),d=t.url||this.attr2("action"),c="string"==typeof d?e.trim(d):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var f={};if(this.trigger("form-pre-serialize",[this,t,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var h,m=[],v=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,h=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,f]),f.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,p);h&&(g=g?g+"&"+h:h),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var b=[];if(t.resetForm&&b.push(function(){u.resetForm()}),t.clearForm&&b.push(function(){u.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};b.push(function(a){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](a).each(y,arguments)})}else t.success&&b.push(t.success);if(t.success=function(e,a,i){for(var s=t.context||this,n=0,o=b.length;o>n;n++)b[n].apply(s,[e,a,i||u,u])},t.error){var x=t.error;t.error=function(e,a,i){var s=t.context||this;x.apply(s,[e,a,i,u])}}if(t.complete){var w=t.complete;t.complete=function(e,a){var i=t.context||this;w.apply(i,[e,a,u])}}var C=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),A=C.length>0,D="multipart/form-data",_=u.attr("enctype")==D||u.attr("encoding")==D,k=s.fileapi&&s.formdata;i("fileAPI :"+k);var P,J=(A||_)&&!k;t.iframe!==!1&&(t.iframe||J)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){P=r(v)}):P=r(v):P=(A||_)&&k?o(v):e.ajax(t),u.removeData("jqxhr").data("jqxhr",P);for(var S=0;S<m.length;S++)m[S]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&e.isFunction(e.fn.on),!s.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(s)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return s.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,s,t).on("click.form-plugin",this.selector,s,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,t).bind("click.form-plugin",s,a)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,a){var i=[];if(0===this.length)return i;var n,o=this[0],r=this.attr("id"),l=t?o.getElementsByTagName("*"):o.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=e(l).get()),r&&(n=e(':input[form="'+r+'"]').get(),n.length&&(l=(l||[]).concat(n))),!l||!l.length)return i;var d,c,u,f,p,h,m;for(d=0,h=l.length;h>d;d++)if(p=l[d],u=p.name,u&&!p.disabled)if(t&&o.clk&&"image"==p.type)o.clk==p&&(i.push({name:u,value:e(p).val(),type:p.type}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}));else if(f=e.fieldValue(p,!0),f&&f.constructor==Array)for(a&&a.push(p),c=0,m=f.length;m>c;c++)i.push({name:u,value:f[c]});else if(s.fileapi&&"file"==p.type){a&&a.push(p);var v=p.files;if(v.length)for(c=0;c<v.length;c++)i.push({name:u,value:v[c],type:p.type});else i.push({name:u,value:"",type:p.type})}else null!==f&&"undefined"!=typeof f&&(a&&a.push(p),i.push({name:u,value:f,type:p.type,required:p.required}));if(!t&&o.clk){var g=e(o.clk),b=g[0];u=b.name,u&&!b.disabled&&"image"==b.type&&(i.push({name:u,value:g.val()}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var a=[];return this.each(function(){var i=this.name;if(i){var s=e.fieldValue(this,t);if(s&&s.constructor==Array)for(var n=0,o=s.length;o>n;n++)a.push({name:i,value:s[n]});else null!==s&&"undefined"!=typeof s&&a.push({name:this.name,value:s})}}),e.param(a)},e.fn.fieldValue=function(t){for(var a=[],i=0,s=this.length;s>i;i++){var n=this[i],o=e.fieldValue(n,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(a,o):a.push(o))}return a},e.fieldValue=function(t,a){var i=t.name,s=t.type,n=t.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!i||t.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!t.checked||("submit"==s||"image"==s)&&t.form&&t.form.clk!=t||"select"==n&&-1==t.selectedIndex))return null;if("select"==n){var o=t.selectedIndex;if(0>o)return null;for(var r=[],l=t.options,d="select-one"==s,c=d?o+1:l.length,u=d?o:0;c>u;u++){var f=l[u];if(f.selected){var p=f.value;if(p||(p=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),d)return p;r.push(p)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,s=this.tagName.toLowerCase();a.test(i)||"textarea"==s?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("module/numSelect",["jquery"],function(e){function t(a,i){var s=this;s.$elem=e(a),s.options=e.extend({},t.DEFAULTS,i),s.init()}t.DEFAULTS={callback:null},t.prototype.callback=function(e,t){"function"==typeof this.options.callback&&this.options.callback(e,t)},t.prototype.init=function(){var t=this,a=t.$elem.closest(".counts").find(".add"),i=t.$elem.closest(".counts").find(".sub");a[0]||(a=e('<a href="javascript:;" class="add">+</a>')),i[0]||(i=e('<a href="javascript:;" class="sub">&ndash;</a>'));var s=parseInt(t.$elem.attr("max-value"));s=s>10?10:s;var n=parseInt(t.$elem.val()||0);1>=n||0===s?i.addClass("unc"):i.removeClass("unc"),n>=s||0===s?a.addClass("unc"):a.removeClass("unc"),a.off("click").on("click",function(){if(!e(this).hasClass("unc")){i.removeClass("unc");var a=parseInt(t.$elem.val())+1,s=parseInt(t.$elem.attr("max-value"));if(s=s>10?10:s,a>=s)return e(this).addClass("unc"),t.$elem.val(a),void t.callback(t.$elem,a);t.callback(t.$elem,a),t.$elem.val(a)}}),i.off("click").on("click",function(){if(!e(this).hasClass("unc")){a.removeClass("unc");var i=parseInt(t.$elem.val())-1;if(1>=i)return t.$elem.val("1"),e(this).addClass("unc"),void t.callback(t.$elem,i);t.callback(t.$elem,i),t.$elem.val(i)}}),t.$elem.off("keyup").on("keyup",function(){if(a.removeClass("unc"),t.$elem.val()<=1)return t.$elem.val("1"),i.addClass("unc"),void t.callback(t.$elem,1);if(!t.$elem.val().match(/^\d+$/))return e(this).val("1"),i.addClass("unc"),void t.callback(t.$elem,1);var s=parseInt(t.$elem.attr("max-value"));if(s=s>10?10:s,t.$elem.val()>s)return t.$elem.val("1"),a.addClass("unc"),void t.callback(t.$elem,1);var n=e(this).val();t.callback(t.$elem,n)})},e.fn.numSelect=function(a){return this.each(function(){var i=e(this),s=i.data("axd.numSelect"),n="object"==typeof a&&a;s||i.data("axd.numSelect",s=new t(this,n))})}}),define("module/customselect",["jquery"],function(e){e.fn.customSelect=function(t){var a={selecttextbox:".base-select-text-box",selecttext:".base-select-text",selectdown:".base-select-ul",callback:function(){}};a=e.extend(a,t);var i=e(this),s=i.find(a.selectdown),n=i.find(a.selecttext);e(document).live("click",function(){s.hide()}),i.find(a.selecttextbox).live("click",function(t){t.stopPropagation(),e(a.selectdown).hide(),"none"==s.css("display")?s.show():s.hide()}),s.find("a").live("click",function(t){t.stopPropagation();var i=e(this);n.text(i.text()),n.attr("data-val",i.attr("data-val")),n.attr("data-index",s.find("a").index(i)),s.hide(),a.callback()})}}),define("module/initschool",["jquery","module/dialog","module/customselect"],function(e){e.AXD.school={conf:{schoolInput:e("#J_ChooseSchoolCity"),getProvinceUrl:aixuedai.path+"common/provinces",getCityUrl:aixuedai.path+"common/cities",getSchoolUrl:aixuedai.path+"common/schools",showMask:!0},init:function(t){var a=e.AXD.school;t&&e.extend(a.conf,t);var i=a.conf;i.schoolInput.live("click",function(){var t="";t+='<div class="clearfix">',t+='<div class="fl base-select-outer" id="J_ChooseProvince">',t+='<div class="clearfix base-select-text-box">',t+='<span class="fl base-select-text fs16">请选择所在的省份</span>',t+='<span class="common-icon select-down-arrow fr"></span>',t+="</div>",t+='<ul class="base-select-ul">',t+="</ul>",t+="</div>",t+='<div class="fl base-select-outer ml10" id="J_ChooseCity">',t+='<div class="clearfix base-select-text-box">',t+='<span class="fl base-select-text fs16">请选择学校所在市</span>',t+='<span class="common-icon select-down-arrow fr"></span>',t+="</div>",t+='<ul class="base-select-ul">',t+="</ul>",t+="</div>",t+='<div class="fl ml10 clarfix school-search-box disabled">',t+='<input type="text" placeholder="搜索学校" class="base-input fl" disabled="disabled"/>',t+='<a class="common-icon search-icon fl mt10 ml10" id="J_SearchSchoolIcon"></a>',t+="</div>",t+="</div>",t+='<ul id="J_SchoolBox" class="clearfix mt10"></ul>',jQuery.AXD.dialog.init({id:"J_ChooseSchoolDialog",title:"选择大学",html:t,showMask:i.showMask,callback:function(){a.initEvent(),a.initProvincedata(e("#J_ChooseProvince")),e("#J_ChooseCity").find("ul li a").live("click",function(t){var i=e(this).attr("data-val");i&&a.initSchooldata(e("#J_SchoolBox"),i)}),e("#J_ChooseProvince").customSelect(),e("#J_ChooseCity").customSelect()}})})},initEvent:function(){var t=this;e("#J_ChooseSchoolDialog").on("click","#J_SchoolBox li",function(){var a=e(this),i=a.attr("data-schoolName"),s=a.attr("data-schoolId"),n=a.attr("data-cityId"),o=a.attr("data-cityName"),r=a.attr("data-provinceId"),l=a.attr("data-provinceName");if("function"==typeof t.conf.selectSchoolCallback){var d={schoolId:s,schoolName:i,cityId:n,cityName:o,provinceId:r,provinceName:l};t.conf.selectSchoolCallback(d)}else t.conf.schoolInput.find(".base-select-text").html(i),t.conf.schoolInput.attr("schoolName",i),t.conf.schoolInput.attr("schoolId",s),t.conf.schoolInput.attr("cityId",n),t.conf.schoolInput.attr("cityName",o),t.conf.schoolInput.attr("provinceId",r),t.conf.schoolInput.attr("provinceName",l);e("#J_ChooseSchoolDialog").data("overlay").close()}),e("#J_ChooseSchoolDialog").on("keypress",".school-search-box input",function(a){var i=e(this);if(13==a.keyCode){var s=e("#J_SchoolBox"),n=e.trim(i.val()),o=e("#J_ChooseCity").find(".base-select-text").attr("data-val");e.post(t.conf.getSchoolUrl,{cityId:o,schoolName:n},function(t){if(t&&t.ret.success&&t.ret.result){s.html("");var a="",i=t.ret.result;e.each(i,function(e,t){var i=t.schoolName;i.indexOf(n)>=0&&(a+='<li data-provinceId="'+t.provinceId+'" data-cityId="'+t.cityId+'" data-provinceId="'+t.provinceId+'" data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>")}),s.html(a)}})}}),e("#J_ChooseSchoolDialog").on("click","#J_SearchSchoolIcon",function(){var a=e(this);if(!a.parent().hasClass("disabled")){var i=e("#J_SchoolBox"),s=e.trim(e("#J_ChooseSchoolDialog .school-search-box input").val()),n=e("#J_ChooseCity").find(".base-select-text").attr("data-val");e.post(t.conf.getSchoolUrl,{cityId:n,schoolName:s},function(t){if(t&&t.ret.success&&t.ret.result){i.html("");var a="",n=t.ret.result;e.each(n,function(e,t){var i=t.schoolName;i.indexOf(s)>=0&&(a+='<li data-provinceId="'+t.provinceId+'" data-cityId="'+t.cityId+'" data-provinceName="'+t.provinceId+'" data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>")}),i.html(a)}})}})},getProvincedata:function(t,a){var i=e.AXD.school,s=i.conf;e.post(s.getProvinceUrl,function(e){e.ret.success&&e.ret.result&&"function"==typeof a&&a(e)})},getCitydata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getCityUrl,{provinceId:a},function(e){e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},getAreadata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getCityUrl,{cityId:a},function(e){e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},getSchooldata:function(t,a,i){var s=e.AXD.school,n=s.conf;a&&e.post(n.getSchoolUrl,{cityId:a},function(e){e.ret.success&&e.ret.result&&e.ret.success&&e.ret.result&&"function"==typeof i&&i(e)})},initProvincedata:function(t){var a=e.AXD.school;a.getProvincedata(t,function(i){var s="",n=i.ret.result;e.each(n,function(e,t){s+='<li><a href="javascript:;" data-val="'+t.provinceId+'">'+t.provinceName+"</a></li>"}),t.find("ul").html(s),t.find("ul li a").live("click",function(i){a.initCitydata(e("#J_ChooseCity"),t.find(".base-select-text").attr("data-val")),e("#J_ChooseCity").find(".base-select-text").text("请选择学校所在市").attr("data-val","")})})},initCitydata:function(t,a){var i=e.AXD.school;i.conf;i.getCitydata(t,a,function(a){var i="",s=a.ret.result;e.each(s,function(e,t){i+='<li><a href="javascript:;" data-val="'+t.cityId+'">'+t.cityName+"</a></li>"}),t.find("ul").html(i)})},initSchooldata:function(t,a){var i=e.AXD.school;i.conf;i.getSchooldata(t,a,function(a){var i="",s=a.ret.result;e.each(s,function(e,t){i+='<li data-provinceId="'+t.provinceId+'" data-provinceName="'+t.provinceName+'" data-cityId="'+t.cityId+'" data-cityname="'+t.cityName+'"  data-schoolId="'+t.schoolId+'" data-schoolName="'+t.schoolName+'">'+t.schoolName+"</li>"}),t.html(i),""!=i?(e("#J_ChooseSchoolDialog .school-search-box").removeClass("disabled"),e("#J_ChooseSchoolDialog .school-search-box input").removeAttr("disabled")):(e("#J_ChooseSchoolDialog .school-search-box").addClass("disabled"),e("#J_ChooseSchoolDialog .school-search-box input").attr("disabled","disabled"))})}}}),define("module/getProvinceCityCountry",["jquery","module/util","module/dialog","module/customselect","module/initschool"],function(e){e(function(){function t(t){var a=["北京市","天津市","上海市","重庆市"],i=!1;return e.each(a,function(e,a){return t==a?(i=!0,!1):void 0}),i}function a(t,a){var i=e("#"+t),s=e('<span class="regError fs14">'+a+"</span>");return i.parent().find(e(".regError")).remove(),""===i.val()?(i.parent().append(s),!1):!0}function i(){var t=e("#J_tel"),a=e('<span class="regError fs14">请输入格式正确的手机号！</span>'),i=e.AXD.util.isPhoneNumber(e.trim(t.val()));return 0==i?(t.parent().append(a),!1):!0}var s='<div class="addrbox"><div class="unit clearfix"><label class="eleb fl" id="labelOne">省市区:</label>&nbsp;<div class="parent fl" id="chospca"><div type="text" class="base-input citys intro-color ofh" id="detailAddr">请选择省市区</div><div class="provices"><h3 class="pca mb5"><a class="on">省份</a><a>城市</a><a>县区</a></h3><div class="prodv"></div><div class="prodv dn"> </div><div class="prodv dn"> </div></div></div></div><div class="unit clearfix mt20"><label class="eleb">详细地址:</label><input type="text" class="base-input" placeholder="请输入详细地址" id="J_addr"></div><div class="unit clearfix mt20"><label class="eleb">收货人姓名:</label><input type="text" class="base-input" placeholder="请输入收货人姓名" id="J_name"></div><div class="unit clearfix mt20"><label class="eleb">手机号码:</label><input type="text" class="base-input" placeholder="请输入手机号码" id="J_tel"></div><div class="unit clearfix fs16 mt5"><label class="eleb">&nbsp;</label><b class="chkDeft" id="defAddr"></b>&nbsp;设置为默认收货地址</div><div class="unit clearfix fs16 mt30"><label class="eleb">&nbsp;</label><a class="common-btn orange eleb bigOrange" id="J_addrSub">保 存</a></div></div>';e.AXD.getProvinceCityCountry={conf:{callback:function(){window.location.reload(!0)},setDefaultCallBack:function(){window.location.reload(!0)}}},e(document).on("click","#detailAddr",function(t){var a=e(this);e.AXD.school.conf.getProvinceUrl=aixuedai.path+"mall/selectProvinces",e.AXD.school.getProvincedata(null,function(e){for(var t=[],i="",s=e.ret.result,n=s.length,o=0,r=n;r>o;o++)i+='<a href="javascript:;" data-provinceid="'+s[o].provinceCode+'">'+s[o].province+"</a>";t.push(i);var l='<dl class="prodl dl2 fs14"><dd>'+t+"</dd></dl></dl>";'<dl class="prodl dl2 fs14"><dd>'+t[1]+'</dd></dl><dl class="prodl"><dd>'+t[2]+'</dd></dl><dl class="prodl"><dd>'+t[3]+'</dd></dl><dl class="prodl"><dd>'+t[4]+"</dd></dl>";a.next().find(".prodv").eq(0).html("").append(l)})}),e(document).on("click",".addAddr, #addAddrBtn",function(){var t,a;e("#realName").length>0?(t=e("#realName").text(),a=e("#cellphone").text()):e("li[data-deliverid] p:eq(0) span:eq(1)").length>0&&(t=e("li[data-deliverid] p:eq(0) span:eq(1)").html(),a=e("li[data-deliverid] p:eq(2) span:eq(0)").html()),e("#idConfirmBox").length>0&&e("#idConfirmBox").remove(),e.AXD.dialog.init({id:"J_Add_Addr",title:"新增收货地址",html:s,showtitle:!0,width:"700px",callback:function(){e("#J_name").val(t).attr("disabled","disabled").addClass("bgwhite bornone"),e("#J_tel").val(a).attr("disabled","disabled").addClass("bgwhite bornone");var i=e("#J_Add_Addr").data("overlay");i.onClose=function(){e("#J_Add_Addr").remove()},e("#J_Add_Addr .pca a:last-child, #J_Add_Addr .pca a.on:last-child").css("border-right","none"),e("#J_addrSub").attr("data-fromwhere","add")}})});var n=!1;e(document).on("click",".prodv a",function(a){a.stopPropagation();var i=e(".provices .prodv").index(e(this).closest(".prodv")),s=e(".pca a").length-1,o=e(this).html();e(".prodv:eq("+i+") a").removeClass(),e(this).addClass("current"),e(".pca a:eq("+i+")").html(o).removeClass("on").next("a").addClass("on"),e(this).closest(".prodv").addClass("dn").next(".prodv").removeClass("dn");var r="",l={};if(0==i){var d=e(this).data("provinceid"),c=e(this).text();e("#detailAddr").attr({"data-province":c,"data-provinceCode":d}),n=t(c),r="city",l.provName=o,e.ajax({type:"POST",url:"/mall/selectCitys",data:{provinceCode:d},success:function(t){for(var a="",s=t.ret.result,o=s.length,l=0,d=o;d>l;l++)a+='<a href="javascript:;" data-cityid="'+s[l].cityCode+'">'+s[l].city+"</a>";n&&(a='<a href="javascript:;" data-cityid="'+s[0].cityCode+'">'+s[0].city+"</a>");var c='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";if(e(".prodv:eq("+(i+1)+")").html("").append(c),n){e(".pca a").removeClass("on").last().addClass("on");var u=s[0].cityCode,f=s[0].city;e("#detailAddr").attr({"data-city":f,"data-cityCode":u}),r="area",t.city=f,e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:u},success:function(t){for(var a="",i=t.ret.result,s=i.length,n=0,o=s;o>n;n++)a+='<a href="javascript:;" data-countyid="'+i[n].countyCode+'">'+i[n].county+"</a>";var r='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";e(".prodv").addClass("dn"),e(".prodv:eq(2)").removeClass("dn").html("").append(r)}}),e(".pca a:eq(1)").html(f),e(".pca a:eq(2)").html("县区")}}}),e(".pca a:eq(1)").html("城市"),e(".pca a:eq(2)").html("县区")}else if(1==i){var u=e(this).data("cityid"),f=e(this).text();e("#detailAddr").attr({"data-city":f,"data-cityCode":u}),r="area",l.city=o,e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:u},success:function(t){for(var a="",s=t.ret.result,n=s.length,o=0,r=n;r>o;o++)a+='<a href="javascript:;" data-countyid="'+s[o].countyCode+'">'+s[o].county+"</a>";var l='<dl class="prodl dl2 fs14"><dd>'+a+"</dd></dl>";e(".prodv:eq("+(i+1)+")").html("").append(l)}}),e(".pca a:eq(2)").html("县区")}if(i===s){var p=e(this).data("countyid"),h=e(this).text();e("#detailAddr").attr({"data-county":h,"data-countyCode":p}),e(".pca a:eq("+i+")").addClass("on"),e(this).closest(".prodv").removeClass("dn");var m=e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(1)").html()+"/"+e(".pca a:eq(2)").html();n&&(m=e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(0)").html()+"/"+e(".pca a:eq(2)").html()),e("#detailAddr").html(m).css("color","#333"),e("#J_Add_Addr .provices").hide(),e("#detailAddr").closest(".unit").find(".regError").remove()}}),e(document).on("click","#J_addrSub",function(){var t=e("#detailAddr"),s=e(this).attr("data-isAuth"),n="";if("请选择省市区"==e("#detailAddr").html()){var o=e('<span class="regError fs14 mt15">省市区不能为空！</span>');e("#detailAddr").parent().parent().append(o)}else e("#detailAddr").closest(".unit").find(".regError").remove();if("请选择"==e("#chooseArea").html()){e("#chooseArea").closest(".unit").find(".regError").remove();var o=e('<span class="regError fs14 mt15">请选择城区！</span>');e("#chooseArea").closest(".unit").append(o)}else e("#chooseArea").closest(".unit").find(".regError").remove();var r="请输入详细地址！";a("J_addr",r);var l="请输入收货人姓名！";a("J_name",l);var l="请输入手机号！";if(a("J_tel",l)&&i()){n="y"===s?e("#chooseArea").attr("data-val"):t.data("countycode");var d={id:t.data("id"),zoneCode:n,address:e("#J_addr").val(),name:e("#J_name").val(),mobilephone:e("#J_tel").val(),isAuth:s,status:e("#defAddr").hasClass("checked")?"y":"n"};switch(e(this).data("fromwhere")){case"add":e.ajax({type:"POST",url:"/mall/deliver/saveDeliver",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.callback()}});break;case"modify":e.ajax({type:"POST",url:"/mall/deliver/editDeliver",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.callback()}})}}}),e.AXD.changeAddress={getDeliver:function(t){var a='<div class="unit clearfix  mt20"><label class="eleb fl" id="labelOne">区:</label>&nbsp;<div class="parent fl"><div id="addressArea" class="fs16 clearfix base-select-outer in-wid270"> <div class="clearfix base-select-text-box"><span class="intro-color fl base-select-text" data-val="" id="chooseArea">请选择</span><span class="common-icon select-down-arrow fr"></span></div><ul class="base-select-ul" style="display: none;"></ul></div></div><span class="regError fs14 mt15">请选择城区</span></div>';e.ajax({type:"POST",url:"/mall/deliver/getDeliverById",data:{deliverId:t},success:function(t){var i=t.deliverAddress;e.AXD.dialog.init({id:"J_Add_Addr",title:"修改收货地址",html:s,showtitle:!0,width:"700px",callback:function(){var t=e("#J_Add_Addr").data("overlay");if(t.onClose=function(){e("#J_Add_Addr").remove()},"y"===i.isAuth){var s=e("#J_addr").closest(".unit"),n='<div class="eleb fs16 cc6 mt10" style="width:470px;">'+i.address+"</div>";e("#J_Add_Addr").find(".close").remove();var o='<div class="parent fl"><div type="text" class="base-input intro-color ofh bornone" id="detailAddr" data-id="'+i.id+'">'+i.province+"/"+i.city+"</div></div>";e("#labelOne").html("省市:"),e("#labelOne").after(o),e("#chospca").remove(),e("#labelOne").closest(".unit").after(a),e("#J_addr").val(i.address).attr("disabled","disabled").addClass("bgwhite bornone"),s.append(n).find("#J_addr").hide(),e.AXD.changeAddress.intoCountyData("addressArea",i.cityCode),e("#addressArea").customSelect({callback:function(){e(this);e("#chooseArea").closest(".unit").find(".regError").remove()}})}else e("#J_Add_Addr .pca a:last-child, #J_Add_Addr .pca a.on:last-child").css("border-right","none"),e("#detailAddr").html(i.province+"/"+i.city+"/"+i.county).attr("data-countycode",i.zoneCode).attr("data-id",i.id),e("#J_addr").val(i.address);switch(e("#J_addrSub").attr({"data-fromwhere":"modify","data-isAuth":i.isAuth}),e("#J_name").val(i.name).attr("disabled","disabled").addClass("bgwhite bornone"),e("#J_tel").val(i.mobilephone).attr("disabled","disabled").addClass("bgwhite  bornone"),i.status){case"n":break;case"y":e("#defAddr").addClass("checked chekdef")}}})}})},intoCountyData:function(t,a){var i=e("#addressArea");e.ajax({type:"POST",url:"/mall/selectCountys",data:{cityCode:a},success:function(t){var a="",s=t.ret.result;e.each(s,function(e,t){a+='<li><a href="javascript:;" data-val="'+t.countyCode+'">'+t.county+"</a></li>"}),i.find("ul").html(a)}})}},e(document).on("click","i, #modifyAddr",function(t){t.stopPropagation();var a=e(this).parent().data("deliverid");e("#idConfirmBox").length>0&&(e("#idConfirmBox").remove(),a=e(this).closest("li").data("deliverid")),e.AXD.changeAddress.getDeliver(a)}),e(document).on("blur","#J_addr",function(){var e="请输入详细地址！";a("J_addr",e)}),e(document).on("blur","#J_name",function(){var e="请输入收货人姓名！";a("J_name",e)}),e(document).on("blur","#J_tel",function(){var e="请输入手机号！";a("J_tel",e)&&i()}),e(document).on("click","#chospca",function(t){t.stopPropagation(),e(".provices").css("display","block")}),e(document).on("click",function(t){e(".provices").css("display","none")}),e(document).on("click",".pca a",function(){e(".pca a").removeClass(),e(".prodv").addClass("dn"),e(this).addClass("on"),e(".prodv").eq(e(this).index()).removeClass("dn")}),e(document).on("click","#defAddr",function(){e(this).toggleClass("checked chekdef")}),e(document).on("click","#setDefaultId, #setDefaultAddr",function(t){t.stopPropagation();e(this);e.ajax({type:"POST",url:"/mall/deliver/setDefault",data:{deliverId:e(this).closest("li").data("deliverid")},success:function(t){t.ret.success&&e.AXD.getProvinceCityCountry.conf.setDefaultCallBack()}})})})}),define("module/authDetail",["jquery","module/util","module/dialog"],function(e){e.AXD.showAuthDialog=function(){var t='<div class="authDetails-box pl40">      </div>';e.AXD.dialog.init({id:"authDetails_box",title:"认证详情",html:t,showtitle:!0,width:"600px",callback:function(){e.ajax({url:"/mall/authProgress",dataType:"json",type:"post",success:function(t){var a="";t.ret.success&&e.each(t.ret.result,function(e,t){var i=0==e?"on":"";a+='<dl class="authpart clearfix"><dt><span class="cc9">'+t.time+'</span></dt><dd><h3 class="'+i+'">'+t.name+'</h3><p class="cc9 fs14">'+t.content+"</p></dd></dl>"}),e(".authDetails-box").html(a)}})}})}}),define("page/cart/cartConfirm",["jquery","jqform","module/util","module/dialog","module/numSelect","module/tipshow","module/getProvinceCityCountry","module/authDetail"],function(e){e(function(){function t(t){var t=e("#subOrd"),s=!1,n=e("#subOrd").closest("form").formSerialize();return e.ajax({type:"POST",url:"/mall/trade/checkCreate",data:n,async:!1,success:function(n){if(n.ret.success)s=!0;else{if("8000"===n.ret.result){var o="";return o+='<div class="fs14 tac mt20 mb20" > ',o+='<h3 class="clearfix unit mt10 fs18" >信用额度不足，请先提高额度再购买</h3>',o+='<div class="clearfix unit mt10" >我们服务专员将上门为您服务，请保持电话畅通</div>',o+='<div class="clearfix unit mt20" style="width: 216px;"><a href="javascript:;" class="btn common-btn  orange mr10 fl J_SaveED">提高额度</a><a href="javascript:;" class=" fl close-dialog" style="padding-top: 20px;color: #129BEF;">下次再说</a></div>',o+="</div> ",e.AXD.dialog.init({id:"J_DialogED",title:"",showtitle:!1,width:"500px",html:o,callback:function(){e(".J_SaveED").off("click").on("click",function(){e("#J_DialogED").data("overlay")&&e("#J_DialogED").data("overlay").close();
var t=e(this);i(t)})}}),t.enableBtn(),s}if("AuthStatus3"===n.ret.result)return a(),t.enableBtn(),s;e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,n.ret.resultDes),t.enableBtn()}},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}}),s}function a(){var t="";t+='<div class="fs14 tac mt20 mb20" > ',t+='<div class="clearfix unit mt20" >抱歉，您的身份信息认证中，请耐心等待审核通过后再继续当前操作</div>',t+='<div class="clearfix unit mt20" style="width: 216px;"><a href="javascript:;" class="btn common-btn  orange mr10 fl J_BuyMon">我想现金购买</a><a href="/" class=" fl" style="padding-top: 20px;color: #129BEF;">知道了</a></div>',t+="</div> ",e.AXD.dialog.init({id:"J_DialogED",title:"",showtitle:!1,width:"500px",html:t,callback:function(){e(".J_BuyMon").off("click").on("click",function(){e("#J_DialogED").data("overlay")&&e("#J_DialogED").data("overlay").close();e(this);l=!0,e("form").submit()})}})}function i(t){t.hasClass("disabled")||(t.disableBtn(),e.ajax({url:"/mall/userAuth",type:"post",dataType:"json",success:function(a){a.ret.success===!0?s():(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,a.ret.resultDes),t.enableBtn())},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(t,"服务器繁忙，请稍候再试!"),t.enableBtn()}}))}function s(){var t="";t+='<div class="fs14 tac mt20 mb20" > ',t+='<h3 class="clearfix unit mt10 fs18" >提交成功，请保持电话畅通</h3>',t+='<div class="mt20 tac intro-color fs14"><em class="red-color">5</em>秒后跳转至首页。</div>',t+="</div> ",e.AXD.dialog.complete(t,function(){window.location.href="/"},5)}function n(){if(e("#J_deliverId")[0]){var t=[],a=[];e(".cartList li").each(function(i,s){var n=e(s).find("[cartid]").attr("cartid"),o=e(s).find(".counts ").text();t.push(n),a.push(n+","+o)});var i=e(".addrlist li.on").attr("data-deliverId");e("#J_deliverId").val(i),e("#J_cartIds").val(t.join(",")),""===e("#J_skuIdNum").val()&&e("#J_skuIdNum").val(a.join(";"))}o()}function o(){var t=e(".addrlist");e.ajax({type:"GET",url:"/mall/deliver/getdeliverListJson",success:function(a){if(a.ret.success){var i=a.ret.result;i.length>=3&&e("#addAddrBtn").remove();for(var s="",n=0,o=i.length;o>n;n++){var l="y"==i[n].status?'class="on"':"";l+="y"==i[n].isAuth?' data-isauth="y"':' data-isauth="n"';var d=null==i[n].province?"":i[n].province,c=null==i[n].city?"":i[n].city,u=null==i[n].county?"":i[n].county,f=null==i[n].address?"":i[n].address,u=null==i[n].county?"":i[n].county;if(s+='<li data-deliverid="'+i[n].id+'"'+l+' data-county="'+u+'"><i>修改地址</i><p class="addrProv" title="'+d+"&nbsp;"+c+"("+i[n].name+')收"><span>'+d+"&nbsp;"+c+" </span>(<span> "+i[n].name+' </span>)收</p><p class="mt10" style="max-height:50px" title="'+u+f+'" data-title="'+u+f+'">'+u+"&nbsp;"+f+'</p><p><span class="fl">'+i[n].mobilephone+"</span>","y"==i[n].status){s+='<span class="fr intro-color">默认地址</span></p>';var p=i[n].id;e("#J_deliverId").val(p)}else s+='<a class="fr blue-color" id="setDefaultId" href="javascript:void(0);">设为默认地址</a><p>'}i.length<3&&(s+='<li><p class="addrProv">&nbsp;</p><a class="addAddr blue-color"><label class="fs18">＋</label> 添加地址</a></li>'),t.find("ul").html("").append(s),r()}}})}function r(){var t=e(".addrlist").find("li").eq(0),a=t.data("deliverid"),i=t.data("isauth"),s=t.data("county");"y"===i&&!s&&t.hasClass("on")&&e.AXD.changeAddress.getDeliver(a)}var l=!1;e.AXD.getProvinceCityCountry={conf:{callback:function(){e(".g-dialog").data("overlay").close(),o()},setDefaultCallBack:function(){o()}}},e(document).on("click","li[data-deliverid]",function(){e(this).addClass("on").siblings().removeClass("on"),e("#J_deliverId").val(e(this).data("deliverid"));var t=e(this).data("isauth"),a=e(this).data("county"),i=e(this).data("deliverid"),s=e(this).find("p:eq(0) span").html(),n=e.trim(e(this).find("p:eq(1)").attr("data-title")),o=s+" "+n;e(".J_subInfo span").html(o),"y"!==t||a||e.AXD.changeAddress.getDeliver(i)}),e(".J_checkItem").on("click",function(){var t=e(this).closest("li"),a=t.data("deliverid"),i=t.data("isauth"),s=t.data("county");"y"!==i||s||e.AXD.changeAddress.getDeliver(a),e(this).toggleClass("checked chkDeft"),e("#acm").animate({width:"toggle"},1e3),e(this).hasClass("checked")||e("#acm").val("")}),e("form").on("submit",function(a){var i=e("#subOrd");if(!i.hasClass("disabled")){if(i.disableBtn(),l)return!0;var s=t(i);return s?!0:(a.preventDefault(),!1)}}),n(),e(document).on("mouseenter",'.addrlist ul li[data-isauth="n"]',function(){e(this).find("i").css("display","block")}),e(document).on("mouseleave",'.addrlist ul li[data-isauth="n"]',function(){e(this).find("i").css("display","none")})})}),requirejs(["main","page/cart/cartConfirm"]),define("boot/cart/cartConfirm",function(){});