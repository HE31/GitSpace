define("module/util",["jquery"],function(e){e.AXD=e.AXD||{versions:"aixuedai1.0"},e.AXD.util={isIE6:function(){return e.browser.msie&&"6.0"==e.browser.version?!0:!1},isIOS:function(){return/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)},isValidReg:function(e){var t=/<|>|\[|\]|\{|\}|『|』|※|○|●|◎|§|△|▲|☆|★|◇|◆|□|▼|㊣|﹋|⊕|⊙|〒|ㄅ|ㄆ|ㄇ|ㄈ|ㄉ|ㄊ|ㄋ|ㄌ|ㄍ|ㄎ|ㄏ|ㄐ|ㄑ|ㄒ|ㄓ|ㄔ|ㄕ|ㄖ|ㄗ|ㄘ|ㄙ|ㄚ|ㄛ|ㄜ|ㄝ|ㄞ|ㄟ|ㄢ|ㄣ|ㄤ|ㄥ|ㄦ|ㄧ|ㄨ|ㄩ|■|▄|▆|\*|@|#|\^|\\/;return 1==t.test(e)?!1:!0},isValidURL:function(t){var n=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(n)?!1:!0)},isValidDomain:function(t){var n=/^(\S+\.\S+)$/;return e.AXD.util.isNULL(t)?!1:(t=e.AXD.util.trim(t),null==t.match(n)?!1:!0)},isEmail:function(e){var t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?!0:!1},isPhoneNumber:function(e){var t=/^1[0-9]{10}$/;return t.test(e)?!0:!1},isDate:function(e){var t=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return t.test(e)?!0:!1},isNumber:function(e){var t=/^\d*$/;return null==e.match(t)?!1:!0},isQq:function(e){var t=/^\d{5,10}$/;return t.test(e)?!0:!1},isDecimal:function(e){var t=/^\d{0,8}\.{0,1}(\d{1,2})?$/;return null==e.match(t)?!1:!0},isValidPost:function(e){var t=/^\d{6}$/;return null==e.match(t)?!1:!0},isCERT:function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return null==e.match(t)?!1:!0},getBrithday:function(e){var t="";return t=15==e.length?"19"+e.substring(6,8):e.substring(6,10)},isAdult:function(t){var n=parseInt(e.AXD.util.getBrithday(t)),r=parseInt((new Date).getFullYear());return r-n>=18?!0:!1},isBirthday:function(e){var t=/\d{4}-\d{2}-\d{2}/;return null==e.match(t)?!1:!0},requestPrameVal:function(e){var t=location.href,n=t.substring(t.indexOf("?")+1,t.length).split("&"),r={};for(i=0;j=n[i];i++)r[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);var a=r[e.toLowerCase()];return"undefined"==typeof a?"":a},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},lTrim:function(e){return e.replace(/(^\s*)/g,"")},rTrim:function(e){return e.replace(/(\s*$)/g,"")},isNULL:function(t){return null==t?!0:0==e.AXD.util.trim(t).length?!0:!1},isInt:function(e){var t=/^(-|\+)?\d+$/;return t.test(e)},getMsgLength:function(e){for(var t=0,n=e.length,r=0;n>r;r++){var i=e.charCodeAt(r);t+=i>=1&&126>=i||i>=65376&&65439>=i?.5:1}return t},checkAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!0},uncheckAll:function(e){if(null!=e)for(i=0;i<e.length;i++)e[i].checked=!1},getWordLength:function(t){t=e.AXD.util.trim(t);var n=0,r=0;return r=t.replace(/[^\x00-\xff]/g,"**").length,n=parseInt(r/2)==r/2?r/2:parseInt(r/2)+1},getDomain:function(e){var t="null";("undefined"==typeof e||null==e)&&(e=window.location.href);var n=/.*\:\/\/([^\/]*).*/,r=e.match(n);return"undefined"!=typeof r&&null!=r&&(t=r[1]),t},addFavorite:function(e,t){var n=-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL";document.all?window.external.addFavorite(e,t):window.sidebar?window.sidebar.addPanel(e,t,""):alert("您可以尝试通过快捷键"+n+" + D 加入到收藏夹~")},addNDays:function(e,t){var n=new Date(Date.parse(e.replace(/-/g,"/")));return n.setDate(n.getDate()+parseInt(t)),n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getPosition:function(t){var n=t.offset().top,r=t.offset().left,i=n+t.outerHeight(),a=r+t.outerWidth(),o=r+t.outerWidth()/2,s=n+t.outerHeight()/2;/iPad/i.test(navigator.userAgent)&&(n-=e(window).scrollTop(),i-=e(window).scrollTop(),s-=e(window).scrollTop());var l={leftTop:function(){return{x:r,y:n}},leftMid:function(){return{x:r,y:s}},leftBottom:function(){return{x:r,y:i}},topMid:function(){return{x:o,y:n}},rightTop:function(){return{x:a,y:n}},rightMid:function(){return{x:a,y:s}},rightBottom:function(){return{x:a,y:i}},MidBottom:function(){return{x:o,y:i}},middle:function(){return{x:o,y:s}}};return l},queryTransform:function(){for(var e=location.search.slice(1).split("&"),t={},n="",r=0,i=e.length;i>r;r++)n=e[r].split("="),n.length>1&&(t[n[0]]=n[1]);return t},toDecimal2:function(e){var t=parseFloat(e);if(isNaN(t))return!1;var t=Math.round(100*e)/100,n=t.toString(),r=n.indexOf(".");for(0>r&&(r=n.length,n+=".");n.length<=r+2;)n+="0";return n}},e.fn.extend({disableBtn:function(){e(this).addClass("disabled")},enableBtn:function(){var t=e(this);setTimeout(function(){t.removeClass("disabled")},100)}}),Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1})}),define("module/cartCount",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/cart/getCartCount",type:"POST",dataType:"json",success:function(t){e(".J_cart").find("b").text(t.cartCount)}})}e.AXD.getCartCount=t,aixuedai.userid>0&&t()})}),define("page/index/news",["jquery","module/util"],function(e){e(function(){function t(){e.ajax({url:"/mall/message/unreadnum",dataType:"json",data:{},type:"POST",success:function(t){t.ret.success?e(".H_newsNum").text(t.ret.result):alert(t.ret.resultDes)},error:function(){console.log("error")}})}function n(){e.ajax({url:"/mall/message/nearlNewsList",dataType:"json",data:{},type:"POST",success:function(t){if(t.issuccess){e(".newsFont").addClass("hasHover");var n="";e.each(t.bizObj.list,function(e,t){var r=t.isRead,i="";"y"==r&&(i="H_changeColor");var a=t.title,o=t.iconUrl,s=t.content,l=t.time,c=t.isOutlink,d=t.outlinkUrl;"y"===c&&null!==d&&""!==d&&"null"!==d||(d="javascript:"),n+='<a class="listNews '+i+'" data-id="'+t.id+'" href="'+d+'" target="_blank"><img src="'+aixuedai.staticpath+"/images/news/"+o+'" class="'+i+'"><p>'+a+'</p><span class="fr mr10 timeNews">'+l+'</span><p class="downFont cc9 fs12">'+s+"</p></a>"}),e(".news").html('<div class="hg5 fs14">未读消息(<b class="orange-color newsNum">'+e(".H_newsNum").text()+"</b>)</div>"+n+'<a class="chakan fs16 clearfix checkNews" href="/mall/message/gonews.html" target="_blank">查看所有消息</a>'),e(".newsFont").addClass("H_hover")}else alert(t.result.resultDes)},error:function(){console.log("error")}})}function r(t,r){e.ajax({url:"/mall/message/read",dataType:"json",type:"POST",data:{id:r},success:function(r){r.ret.success?(e(t).addClass("changeColor"),e(t).find(".img").addClass("changeColor"),n()):alert(r.ret.resultDes)},error:function(){console.log("error")}})}t();var i=null;e(".newsFont").mouseover(function(){e(".newsFont").hasClass("hasHover")?e(".news").slideDown():(e(".news").slideDown(),n()),i&&clearTimeout(i)}).mouseout(function(){i=setTimeout(function(){e(".news").slideUp(),clearTimeout(i)},500)}),e(document).on("click",'.listNews:not(".H_changeColor")',function(){var n=e(this).attr("data-id");r(this,n),t()})})}),define("module/tipshow",["jquery","module/util"],function(e){e.AXD.tip={conf:{timer:null,timerLength:3e3,tipClass:"tipmodal tipmodal-error"},show:function(t,n){clearTimeout(e.AXD.tip.conf.timer);var r=e.AXD.util.getPosition(t).topMid();e(".tipbox")[0]||e("body").append('<div class="tipbox "'+n+"></div>"),e(".tipbox").attr("class","tipbox "+e.AXD.tip.conf.tipClass),e(".tipbox").html(n);var i=e(".tipbox").outerWidth(),a=e(".tipbox").outerHeight();e(".tipbox").css({left:r.x-i/2+"px",top:r.y-a-10+"px"}).fadeIn(),e.AXD.tip.conf.timer=setTimeout(function(){e(".tipbox").fadeOut()},e.AXD.tip.conf.timerLength)}}}),define("module/dialog",["jquery","module/util","jqtools","overlay"],function(e){e.AXD.dialog={conf:{id:"J_AXDDialog",title:"提示",html:"",callback:function(){},showtitle:!0,showclose:!0,showMask:!0,width:"",closecallback:function(){}},init:function(t){var n=e.AXD.dialog.conf;t&&e.extend(n,t);var r=n.id,i=""!==n.width?"width:"+n.width+"!important":"";if(e("#"+r)[0])e("#"+r).data("overlay").load();else{var a="";a+='<div id="'+r+'" class="g-dialog" style="'+i+'">',n.showtitle&&(a+='<div class="hd">',a+="<h3>"+n.title+"</h3>",a+="</div>"),a+='<div class="bd">',a+=n.html,a+="</div>",n.showclose&&(a+='<a class="common-icon close" href="javascript:;"></a>'),a+="</div>",e("body").append(a);var o={top:"center",oneInstance:!1,closeOnClick:!1,load:!0,closeOnEsc:!1};n.showMask&&(o.mask={color:"#000",loadSpeed:200,closeSpeed:0,opacity:.3}),e("#"+r).overlay(o),0==n.showclose&&e("#"+r+" .close").remove(),e("#"+r+" .close").unbind().bind("click",function(){e("#"+r).data("overlay").close(),e("#"+r).remove(),n.closecallback()}),e("#"+r+" .close-dialog").bind("click",function(){e("#"+r).data("overlay").close(),e("#"+r).remove()}),n.callback()}},confirm:function(t,n){var r='<div class="clearfix unit mt10" style="height:60px;font-size:16px;text-align: center;">'+t+"</div>";r+='<div class="clearfix unit mt10" style="width: 306px;"><a href="javascript:;" class="btn common-btn mr10 gray fl close-dialog">否</a><a href="javascript:;" class="btn common-btn  orange fl J_Save">是</a></div>',e.AXD.dialog.init({id:"J_Confirm",title:"提示",html:r,showtitle:!0,width:"500px",callback:function(){e("#J_Confirm .J_Save").off("click").live("click",function(){"function"==typeof n&&n()})}})},complete:function(t,n,r){e.AXD.dialog.init({id:"J_CompleteDialog",title:"",html:t,showtitle:!1,showclose:!1,width:"500px",callback:function(){var t=r||3,i=setInterval(function(){t--,e("#J_CompleteDialog em").text(t),0==t&&(e("#J_CompleteDialog").data("overlay").close(),clearInterval(i),"function"==typeof n&&n())},1e3)}})}}}),define("module/getverificationcode",["jquery","module/util","module/tipshow"],function(e){function t(t){r=null,nowSecond=60,t.html('<em id="J_Countdown">60</em>秒后重新发送'),r=setInterval(function(){0==nowSecond?(clearInterval(r),t.html("获取短信验证码"),t.removeClass("disabled timing")):(nowSecond-=1,e("#J_Countdown").text(nowSecond),t.addClass("disabled timing"))},1e3)}function n(e){clearInterval(r),e.html("获取短信验证码"),e.removeClass("disabled timing")}var r=null;e.fn.getVerifactionCode=function(i){var a={url:aixuedai.path+"common/sendCodeMsg",telselector:"",smstype:"",oldtel:"",failcallback:null};a=e.extend(a,i),e(this).on("click",function(){var i=e(this);if(!e(this).hasClass("disabled")){var o=a.telValue?a.telValue:e.trim(e(a.telselector).val());if(""==o)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"手机号码不能为空!"),!1;if(!e.AXD.util.isPhoneNumber(o))return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"手机号码格式不正确"),!1;if(""!==a.oldtel&&o===a.oldtel)return e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"新手机号不能与原手机号相同"),!1;r&&clearInterval(r),t(e(this));var s=a.virifyselector?e.trim(e(a.virifyselector).val()):"";e.ajax({url:a.url,type:"post",dataType:"json",data:{telphone:o,smstype:a.smstype,verify:s},success:function(t){t&&(t.ret.success===!0?(e.AXD.tip.conf.tipClass="tipmodal tipmodal-ok",e.AXD.tip.show(i,t.ret.resultDes)):"function"==typeof a.failcallback?(n(i),a.failcallback(t)):(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,t.ret.resultDes)),a.virifyselector&&e(a.virifyselector).parent().find("img").attr("src",aixuedai.path+"vcode?t="+Math.random()))},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"服务器繁忙，请稍候再试!")}})}})}}),define("page/register/reg",["jquery","module/util","module/tipshow","module/dialog","module/getverificationcode","cookie"],function(e){e(function(){function t(){var t=e("#regtel"),n=e('<span class="regError fs14">请输入正确的手机号！</span>'),r=!!e.trim(t.val()).match(/^1[0-9]{10}$/);return 0==r?(t.parent().append(n),!1):!0}function n(){var t=e('<span class="regError fs14">输入密码不一致</span>');return e("#regpwd2").val()!==e("#regpwd1").val()?(e("#regpwd2").parent().append(t),!1):!0}function r(t,n){var r=e("#"+t),i=e('<span class="regError fs14">'+n+"</span>");return r.parent().find(e(".regError")).remove(),""===r.val()?(r.parent().append(i),!1):!0}function i(t,n){var r=e("#"+t),i=e('<span class="regError fs14">'+n+"</span>");r.parent().find(e(".regError")).remove();var a=r.val();return""==a?(n="请输入密码",i=e('<span class="regError fs14">'+n+"</span>"),r.parent().append(i),!1):a.length<8?(n="密码长度必须大于8位",i=e('<span class="regError fs14">'+n+"</span>"),r.parent().append(i),!1):a.length>16?(n="密码长度必须小于16位",i=e('<span class="regError fs14">'+n+"</span>"),r.parent().append(i),!1):/[a-zA-Z]+/.test(a)&&/[0-9]+/.test(a)?!0:(n="格式错误，请设置8-16位数字字母组合密码",i=e('<span class="regError fs14">'+n+"</span>"),r.parent().append(i),!1)}function a(t,n){var r="";r+="<div>",r+='<div class="mt20 tac fs16">验证码收不到? 放心有后招！短信发送<em class="orange-color">'+t+'</em>到<em class="orange-color">'+n+"</em>，<br>给小爱你的专属验证码，点击【注册】妥妥的！</div>",r+='    <div class="clearfix unit mt10" style="width: 150px;"> <a href="javascript:;" class="btn common-btn  orange fl disabled J_Save">确定 <em>30s</em> </a></div>',r+="</div>",e.AXD.dialog.init({id:"J_NoMsgReceiveDialog",title:"",html:r,showtitle:!1,showclose:!1,width:"600px",callback:function(){var t=30,n=e("#J_NoMsgReceiveDialog .J_Save");o=setInterval(function(){return t-=1,0>=t?(n.removeClass("disabled"),n.find("em").text(""),clearInterval(o),!1):(n.addClass("disabled"),void n.find("em").text(" ("+t+"s) "))},1e3),e("#J_NoMsgReceiveDialog .J_Save").off("click").live("click",function(){e("#J_NoMsgReceiveDialog").data("overlay")&&e("#J_NoMsgReceiveDialog").data("overlay").close(),e("#J_NoMsgReceiveDialog").remove()})}})}e("#regtel").on("blur",function(){var n="请输入手机号！";r("regtel",n)&&t()&&e.ajax({type:"POST",url:"/getCellphoneExists",dataType:"json",data:{cellphone:e.trim(e("#regtel").val())},success:function(t){if(t.ret.success===!1){var n=t.ret.resultDes,r=e('<span class="regError fs14">'+n+"</span>");e("#regtel").parent().append(r),e("#regBtn").addClass("disabled")}else e("#regBtn").hasClass("disabled")&&e("#regBtn").removeClass("disabled")},error:function(){console.log("error")}})}),e("#regtel").on("change",function(){e("#J_Code").hasClass("timing")||(e("#J_Code").enableBtn(),e("#J_Code").html("获取验证码").removeClass("J_NoMsgReceive"),e("#regcode").removeClass("disabled noMsgReceive"))}),e("#regcode").on("blur",function(){var e="请输入短信验证码！";r("regcode",e)}),e("#regpwd1").on("blur",function(){var e="请输入密码！";i("regpwd1",e)}),e("#regpwd2").on("blur",function(){var e="请再次输入密码！";i("regpwd2",e)&&n()}),e("#recommend").on("blur",function(){e.trim(e(this).val()).length<=0&&(e("#mqdiv").hide(),e("#mqdiv").find("#mqperson").removeClass("checked").addClass("chekdef"))}),e("#recommend").on("focus",function(){e("#mqdiv").show()}),e("#agree").on("click",function(){var t=e(this);t.toggleClass("checked chekdef"),t.hasClass("checked")?e("#regBtn").removeClass("disabled"):e("#regBtn").addClass("disabled")}),e("#mqperson").on("click",function(){var t=e(this);t.toggleClass("checked chekdef")}),e("#J_Code").getVerifactionCode({smstype:"reg",telselector:"#regtel",failcallback:function(t){if(t.uuidcache&&t.uuidcache.num&&parseInt(t.uuidcache.num)>2){e("#J_Code").enableBtn(),e("#J_Code").html("收不到验证码？").addClass("J_NoMsgReceive"),e("#regcode").addClass("disabled noMsgReceive");var n=t.servtel,r=t.code;e("#J_Code").attr("code",r).attr("servtel",n),e("#regcode").siblings(".regError").remove(),a(r,n)}else e.AXD.tip.show(e("#J_Code"),t.ret.resultDes)}});var o=null;e(document).on("click",".J_NoMsgReceive",function(t){t.preventDefault();var n=e(this).attr("servtel"),r=e(this).attr("code");a(r,n)});var o=null;e("#J_Codex").on("click",function(){if(e("#J_Code").hasClass("disabled"))return!1;clearInterval(o);var n="请输入手机号！";if(r("regtel",n)===!0&&t()){var i=60,a=this;o=setInterval(function(){return i-=1,0>=i?(e(a).html("获取验证码").removeClass("disabled"),clearInterval(o),!1):void e(a).html(i+"秒后可重发").addClass("disabled")},1e3)}else alert("请输入手机号码！")}),e("#regBtn").on("click",function(){var i=e(this),a="请输入手机号！";r("regtel",a)===!0&&t();var o="请输入验证码！";e("#regcode").hasClass("noMsgReceive")||r("regcode",o);var s="请输入密码！";r("regpwd1",s);var s="请再次输入密码！";if(r("regpwd2",s)===!0&&n(),e("#agree").hasClass("chekdef")){e("#agree").parent().find(e(".regError")).remove();var l=e('<span class="regError fs14">请先选择同意合约！</span>');return e("#agree").parent().append(l),!1}if(e("#agree").parent().find(e(".regError")).remove(),!(e(".regError").length>0||i.hasClass("disabled"))){i.disableBtn();var c={telphone:e.trim(e("#regtel").val()),checkCode:e.trim(e("#regcode").val()),password:e("#regpwd1").val(),recommendCode:e.trim(e("#recommend").val()),deviceid:e.cookie("FRMS_FINGERPRINT")};e("#mqperson").hasClass("checked")&&(c.isAppoint="y"),e.ajax({type:"POST",url:"/user/reg",dataType:"json",data:c,success:function(t){t.ret.success===!0?window.location.href="/mall/goinfo.html":(e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,t.ret.resultDes),i.enableBtn())},error:function(){e.AXD.tip.conf.tipClass="tipmodal tipmodal-error",e.AXD.tip.show(i,"网络不给力，请稍后再试"),i.enableBtn()}})}})}),e(".J_protocol").on("click",function(){var t="";t+="<div >",t+='<iframe src="/protocol/user.html" style="width:100%;height:500px;" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes" allowtransparency="yes"></iframe>',t+="</div>",e.AXD.dialog.init({id:"J_JnhDialog",showtitle:!1,title:"爱学贷用户注册协议",html:t,width:"800px"})})}),requirejs(["common"],function(e){requirejs(["module/cartCount","page/index/news","page/register/reg"])}),define("boot/register/reg",function(){});